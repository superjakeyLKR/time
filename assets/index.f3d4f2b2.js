/* empty css                    */import"./vue.c3499eac.js";import{q as Mt,C as o,ab as A,t as E,aF as b,a1 as k,aL as Qe,bv as Et,G as X,as as bt,_ as O,az as Bt,a2 as g,J as L,O as j,aK as We,a0 as F,I as se,a8 as P,a9 as p,b7 as q,aI as De,aG as qe,u as Xt,b2 as $e,l as ue,j as Vr,bw as nt,aH as zt,A as de,$ as R,b9 as gn,bt as Er,ar as ze,bc as Wn,T as Dr,b3 as je,aM as we,aD as Yn,w as Se,ap as qr,aO as ae,z as rt,bs as Rr,am as Jt,H as Lr,y as Dn,bo as Ar,ay as Br,bf as Ur}from"./@vue.6f8187b0.js";import{L as ft}from"./lz-string.bfbf8ec3.js";import{c as Jn}from"./nanoevents.1080beb7.js";import{i as jr}from"./unofficial-galaxy-sdk.21372393.js";import{p as zr}from"./vue-textarea-autosize.35804eaf.js";import{s as Gr,u as Hr}from"./vue-toastification.c30555b4.js";import{D as Wr}from"./vuedraggable.987e5684.js";import{Y as Yr}from"./vue-next-select.ccd7a9ab.js";import"./sortablejs.5e46dd67.js";const Jr=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}};Jr();const Kr="modulepreload",qn={},Zr="./",Dt=function(t,n){return!n||n.length===0?t():Promise.all(n.map(r=>{if(r=`${Zr}${r}`,r in qn)return;qn[r]=!0;const i=r.endsWith(".css"),s=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${s}`))return;const a=document.createElement("link");if(a.rel=i?"stylesheet":Kr,i||(a.as="script",a.crossOrigin=""),a.href=r,document.head.appendChild(a),i)return new Promise((u,c)=>{a.addEventListener("load",u),a.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())},Xr="./projInfo-schema.json",Qr="time",ei="A project made in Profectus",ti="time",ni="SuperjakeyLKR",ri="",ii="",si="0.0",ai="Initial Commit",oi=!0,li=!1,ui=2,ci=!0,di=null,fi="",gi=["main"],mi=3600,pi=1,hi=!0,vi="base64",bi=!1;var z={$schema:Xr,title:Qr,description:ei,id:ti,author:ni,discordName:ri,discordLink:ii,versionNumber:si,versionTitle:ai,allowGoBack:oi,defaultShowSmall:li,defaultDecimalsShown:ui,useHeader:ci,banner:di,logo:fi,initialTabs:gi,maxTickLength:mi,offlineLimit:pi,enablePausing:hi,exportEncoding:vi,disableHealthWarning:bi};const yi=Mt({id:"",devSpeed:null,name:"",tabs:[],time:-1,autosave:!0,offlineProd:!0,offlineTime:null,timePlayed:0,keepGoing:!1,modID:"",modVersion:"",layers:{}});var D=window.player=yi;function St(e){return JSON.stringify(e,(t,n)=>{var r;return(r=o(n))!=null?r:null})}var G=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n};const _i=["onClick"],wi=A({__name:"FeedbackButton",props:{left:{type:Boolean}},emits:["click"],setup(e,{emit:t}){const n=E(!1),r=E(null);function i(){t("click"),r.value&&clearTimeout(r.value),n.value=!1,bt(()=>{n.value=!0,r.value=setTimeout(()=>n.value=!1,500)})}return(s,a)=>(b(),k("button",{onClick:Et(i,["stop"]),class:X(["feedback",{activated:n.value,left:e.left}])},[Qe(s.$slots,"default",{},void 0,!0)],10,_i))}});var mn=G(wi,[["__scopeId","data-v-01a1b95c"]]);const Qt=e=>(De("data-v-ac351c02"),e=e(),qe(),e),Ni={class:"error"},Ci={class:"error-title"},ki={class:"error-details",style:{"margin-top":"-10px"}},Si={key:0},Ii={class:"instructions"},Mi=["href"],$i=Qt(()=>g("span",{class:"material-icons",style:{"font-size":"16px"}},"content_paste",-1)),Ti=Qt(()=>g("span",{style:{"margin-left":"8px","font-size":"medium"}},"Copy Save",-1)),Pi=Qt(()=>g("br",null,null,-1)),Oi={key:0,style:{"margin-top":"20px"}},Fi=Qt(()=>g("h3",null,"Other errors",-1)),xi=[Fi],Vi={class:"error-details"},Ei={key:0,style:{"margin-top":"10px"}},Di={key:1,style:{"margin-top":"10px"}},qi=A({__name:"Error",props:{errors:null},setup(e){const t=e,n=O(()=>t.errors[0]),r=O(()=>t.errors.map(a=>a.stack==null?[]:a.stack.split(`
`))),i=O(()=>t.errors.map(a=>a.cause==null?[]:(typeof a.cause=="string"?a.cause:JSON.stringify(a.cause)).split(`
`)));function s(){let a=St(D);switch(z.exportEncoding){default:console.warn(`Unknown save encoding: ${z.exportEncoding}. Defaulting to lz`);case"lz":a=ft.compressToUTF16(a);break;case"base64":a=btoa(unescape(encodeURIComponent(a)));break;case"plain":break}console.log(a);const u=document.createElement("textarea");u.value=a,document.body.appendChild(u),u.select(),u.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(u)}return Bt(()=>{D.autosave=!1,D.devSpeed=0}),(a,u)=>(b(),k("div",Ni,[g("h1",Ci,L(o(n).name)+": "+L(o(n).message),1),g("div",ki,[o(n).cause?(b(),k("div",Si,[(b(!0),k(j,null,We(o(i)[0],c=>(b(),k("div",{key:c},L(c),1))),128))])):F("",!0),o(n).stack?(b(),k("div",{key:1,style:se(o(n).cause?"margin-top: 10px":"")},[(b(!0),k(j,null,We(o(r)[0],c=>(b(),k("div",{key:c},L(c),1))),128))],4)):F("",!0)]),g("div",Ii,[P(" Check the console for more details, and consider sharing it with the developers on "),g("a",{href:o(z).discordLink||"https://discord.gg/yJ4fjnjU54",class:"discord-link"},"discord",8,Mi),P("! "),p(mn,{onClick:s,class:"button",style:{display:"inline-flex"}},{default:q(()=>[$i,Ti]),_:1}),Pi,e.errors.length>1?(b(),k("div",Oi,xi)):F("",!0),(b(!0),k(j,null,We(e.errors.slice(1),(c,f)=>(b(),k("div",{key:f,style:{"margin-top":"20px"}},[g("details",Vi,[g("summary",null,L(c.name)+": "+L(c.message),1),c.cause?(b(),k("div",Ei,[(b(!0),k(j,null,We(o(i)[f+1],h=>(b(),k("div",{key:h},L(h),1))),128))])):F("",!0),c.stack?(b(),k("div",Di,[(b(!0),k(j,null,We(o(r)[f+1],h=>(b(),k("div",{key:h},L(h),1))),128))])):F("",!0)])]))),128))])]))}});var Kn=G(qi,[["__scopeId","data-v-ac351c02"]]);const mt={variables:{"--foreground":"#dfdfdf","--background":"#0f0f0f","--feature-foreground":"#0f0f0f","--tooltip-background":"rgba(0, 0, 0, 0.75)","--raised-background":"#0f0f0f","--points":"#ffffff","--locked":"#bf8f8f","--highlighted":"#333","--bought":"#77bf5f","--danger":"rgb(220, 53, 69)","--link":"#02f2f2","--outline":"#dfdfdf","--accent1":"#627a82","--accent2":"#658262","--accent3":"#7c6282","--border-radius":"15px","--modal-border":"solid 2px var(--color)","--feature-margin":"0px"},floatingTabs:!0,mergeAdjacent:!0,showPin:!0};var pn=(e=>(e.Classic="classic",e.Paper="paper",e.Nordic="nordic",e.Aqua="aqua",e))(pn||{}),Ut={classic:mt,paper:{...mt,variables:{...mt.variables,"--background":"#2a323d","--feature-foreground":"#000","--raised-background":"#333c4a","--locked":"#3a3e45","--bought":"#5C8A58","--outline":"#333c4a","--border-radius":"4px","--modal-border":"","--feature-margin":"5px"},floatingTabs:!1},nordic:{...mt,variables:{...mt.variables,"--foreground":"#D8DEE9","--background":"#2E3440","--feature-foreground":"#000","--raised-background":"#3B4252","--points":"#E5E9F0","--locked":"#4c566a","--highlighted":"#434c5e","--bought":"#8FBCBB","--danger":"#D08770","--link":"#88C0D0","--outline":"#3B4252","--accent1":"#B48EAD","--accent2":"#A3BE8C","--accent3":"#EBCB8B","--border-radius":"4px","--modal-border":"solid 2px #3B4252","--feature-margin":"5px"},floatingTabs:!1},aqua:{...mt,variables:{...mt.variables,"--foreground":"#bfdfff","--background":"#001f3f","--tooltip-background":"rgba(0, 15, 31, 0.75)","--raised-background":"#001f3f","--points":"#dfefff","--locked":"#c4a7b3","--outline":"#bfdfff"}}},te=window.state=Xt({lastTenTicks:[],mouseActivity:[!1],hasNaN:!1,NaNPath:[],errors:Mt([])});const me=Jn();"fonts"in document&&(document.fonts.onloadingdone=()=>me.emit("fontsLoaded"));document.onmousemove=function(){te.mouseActivity[te.mouseActivity.length-1]=!0};var Ri=Object.freeze(Object.defineProperty({__proto__:null,globalBus:me},Symbol.toStringTag,{value:"Module"}));function Ze(e={}){return Object.assign({id:`${z.id}-0`,name:"Default Save",tabs:z.initialTabs.slice(),time:Date.now(),autosave:!0,offlineProd:!0,offlineTime:0,timePlayed:0,keepGoing:!1,modID:z.id,modVersion:z.versionNumber,layers:{}},e)}function ge(e){const t=ft.compressToUTF16(St(e!=null?e:D));return localStorage.setItem((e!=null?e:D).id,t),t}async function Li(){ji();try{let e=localStorage.getItem(Y.active);if(e==null){await Xe(Nt());return}if(e=ct(e),e==null)throw"Unable to determine save encoding";const t=JSON.parse(e);if(t.modID!==z.id){await Xe(Nt());return}t.id=Y.active,await Xe(t)}catch(e){console.error(`Failed to load save. Falling back to new save.
`,e),await Xe(Nt())}}function ct(e){if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=ft.decompressFromUTF16(e);else return console.warn("Unable to determine preset encoding",e),null;return e}function Nt(){const e=Vt(),t=Ze({id:e});return ge(t),Y.saves.push(e),t}function Vt(){let e,t=0;do e=`${z.id}-${t++}`;while(localStorage.getItem(e)!=null);return e}const hn=E(!1);async function Xe(e){console.info("Loading save",e),hn.value=!0;const{layers:t,removeLayer:n,addLayer:r}=await Dt(()=>Promise.resolve().then(function(){return to}),void 0),{fixOldSave:i,getInitialLayers:s}=await Dt(()=>Promise.resolve().then(function(){return Su}),void 0);for(const a in t){const u=t[a];u&&n(u)}s(e).forEach(a=>r(a,e)),e=Ze(e),e.offlineProd&&e.time!=null&&e.time&&e.devSpeed!==0&&(e.offlineTime==null&&(e.offlineTime=0),e.offlineTime+=Math.min(e.offlineTime+(Date.now()-e.time)/1e3,z.offlineLimit*3600)),e.time=Date.now(),e.modVersion!==z.versionNumber&&(i(e.modVersion,e),e.modVersion=z.versionNumber),Object.assign(D,e),Y.active=D.id,me.emit("onLoad")}const Fe=Xt({});function Ai(e){if(Fe[e]==null){let t=localStorage.getItem(e);if(t==null)Fe[e]={error:"Save doesn't exist in localStorage",id:e};else if(t==="dW5kZWZpbmVk")Fe[e]={error:"Save is undefined",id:e};else try{if(t=ct(t),t==null)return console.warn("Unable to determine preset encoding",t),Fe[e]={error:"Unable to determine preset encoding",id:e},Fe[e];Fe[e]={...JSON.parse(t),id:e}}catch(n){Fe[e]={error:n,id:e},console.warn(`Failed to load info about save with id ${e}:
${n}
${t}`)}}return Fe[e]}function Bi(){Object.keys(Fe).forEach(e=>delete Fe[e])}function Gt(e){Fe[e]=void 0}setInterval(()=>{D.autosave&&ge()},1e3);window.onbeforeunload=()=>{D.autosave&&ge()};window.save=ge;const Ui=window.hardReset=async()=>{await Xe(Nt())};window.deleteLowerSaves=()=>{const e=Object.values(Y.saves).indexOf(D.id)+1;Object.values(Y.saves).slice(e).forEach(t=>localStorage.removeItem(t)),Y.saves=Y.saves.slice(0,e)};const qt=Mt({active:"",saves:[],showTPS:!0,theme:pn.Nordic,unthrottled:!1,alignUnits:!1,showHealthWarning:!0});$e(qt,e=>{const t=ft.compressToUTF16(JSON.stringify(e));localStorage.setItem(z.id,t)},{deep:!0});var Y=window.settings=qt;window.hardResetSettings=()=>{const e={active:"",saves:[],showTPS:!0,theme:pn.Nordic,unthrottled:!1,alignUnits:!1,showHealthWarning:!0};me.emit("loadSettings",e),Object.assign(qt,e),Ui()};function ji(){try{let e=localStorage.getItem(z.id);if(e!=null&&e!==""){if(e=ct(e),e==null){console.warn("Unable to determine settings encoding",e);return}const t=JSON.parse(e);typeof t=="object"&&Object.assign(qt,t)}me.emit("loadSettings",qt)}catch{}}const zi=Mt([]),Zn=Mt([]);function Gi(e){Zn.push(e)}const Hi=Mt([]);class Wi{constructor(t){this.map=new Map,this.first=void 0,this.last=void 0,this.maxSize=t}get size(){return this.map.size}get(t){const n=this.map.get(t);if(n!==void 0)return n!==this.first&&(n===this.last?(this.last=n.prev,this.last.next=void 0):(n.prev.next=n.next,n.next.prev=n.prev),n.next=this.first,this.first.prev=n,this.first=n),n.value}set(t,n){if(this.maxSize<1)return;if(this.map.has(t))throw new Error("Cannot update existing keys in the cache");const r=new Yi(t,n);for(this.first===void 0?(this.first=r,this.last=r):(r.next=this.first,this.first.prev=r,this.first=r),this.map.set(t,r);this.map.size>this.maxSize;){const i=this.last;this.map.delete(i.key),this.last=i.prev,this.last.next=void 0}}}class Yi{constructor(t,n){this.next=void 0,this.prev=void 0,this.key=t,this.value=n}}const on=17,Ji=9e15,Ki=Math.log10(9e15),Zi=1/9e15,Xi=308,Qi=-324,Rn=5,es=(1<<10)-1,ts=function(){const e=[];for(let n=Qi+1;n<=Xi;n++)e.push(Number("1e"+n));const t=323;return function(n){return e[n+t]}}(),pt=[2,Math.E,3,4,5,6,7,8,9,10],ns=[[1,1.0891180521811203,1.1789767925673957,1.2701455431742086,1.3632090180450092,1.4587818160364217,1.5575237916251419,1.6601571006859253,1.767485818836978,1.8804192098842727,2],[1,1.1121114330934079,1.231038924931609,1.3583836963111375,1.4960519303993531,1.6463542337511945,1.8121385357018724,1.996971324618307,2.2053895545527546,2.4432574483385254,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.1840100246247336,1.4061375836156955,1.6802272208863964,2.026757028388619,2.4770056063449646,3.080525271755482,3.9191964192627284,5.135152840833187,6.989961179534715,10]],rs=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]];let _=function(t){return l.fromValue_noAlloc(t)},B=function(e,t,n){return l.fromComponents(e,t,n)},U=function(t,n,r){return l.fromComponents_noNormalize(t,n,r)};const ot=function(t,n){const r=n+1,i=Math.ceil(Math.log10(Math.abs(t))),s=Math.round(t*Math.pow(10,r-i))*Math.pow(10,i-r);return parseFloat(s.toFixed(Math.max(r-i,0)))},ln=function(e){return Math.sign(e)*Math.log10(Math.abs(e))},is=function(e){if(!isFinite(e))return e;if(e<-50)return e===Math.trunc(e)?Number.NEGATIVE_INFINITY:0;let t=1;for(;e<10;)t=t*e,++e;e-=1;let n=.9189385332046727;n=n+(e+.5)*Math.log(e),n=n-e;const r=e*e;let i=e;return n=n+1/(12*i),i=i*r,n=n+1/(360*i),i=i*r,n=n+1/(1260*i),i=i*r,n=n+1/(1680*i),i=i*r,n=n+1/(1188*i),i=i*r,n=n+691/(360360*i),i=i*r,n=n+7/(1092*i),i=i*r,n=n+3617/(122400*i),Math.exp(n)/t},Xn=.5671432904097838,Ln=function(e,t=1e-10){let n,r;if(!Number.isFinite(e)||e===0)return e;if(e===1)return Xn;e<10?n=0:n=Math.log(e)-Math.log(Math.log(e));for(let i=0;i<100;++i){if(r=(e*Math.exp(-n)+n*n)/(n+1),Math.abs(r-n)<t*Math.abs(r))return r;n=r}throw Error(`Iteration failed to converge: ${e.toString()}`)};function An(e,t=1e-10){let n,r,i,s;if(!Number.isFinite(e.mag)||e.eq(l.dZero))return e;if(e.eq(l.dOne))return l.fromNumber(Xn);n=l.ln(e);for(let a=0;a<100;++a){if(r=n.neg().exp(),i=n.sub(e.mul(r)),s=n.sub(i.div(n.add(1).sub(n.add(2).mul(i).div(l.mul(2,n).add(2))))),l.abs(s.sub(n)).lt(l.abs(s).mul(t)))return s;n=s}throw Error(`Iteration failed to converge: ${e.toString()}`)}const v=class{constructor(e){this.sign=0,this.mag=0,this.layer=0,e instanceof v?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"&&this.fromString(e)}get m(){if(this.sign===0)return 0;if(this.layer===0){const e=Math.floor(Math.log10(this.mag));let t;return this.mag===5e-324?t=5:t=this.mag/ts(e),this.sign*t}else if(this.layer===1){const e=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,e)}else return this.sign}set m(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer=0,this.exponent=0))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(e){this.fromMantissaExponent(this.m,e)}get s(){return this.sign}set s(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}get mantissa(){return this.m}set mantissa(e){this.m=e}get exponent(){return this.e}set exponent(e){this.e=e}static fromComponents(e,t,n){return new v().fromComponents(e,t,n)}static fromComponents_noNormalize(e,t,n){return new v().fromComponents_noNormalize(e,t,n)}static fromMantissaExponent(e,t){return new v().fromMantissaExponent(e,t)}static fromMantissaExponent_noNormalize(e,t){return new v().fromMantissaExponent_noNormalize(e,t)}static fromDecimal(e){return new v().fromDecimal(e)}static fromNumber(e){return new v().fromNumber(e)}static fromString(e){return new v().fromString(e)}static fromValue(e){return new v().fromValue(e)}static fromValue_noAlloc(e){if(e instanceof v)return e;if(typeof e=="string"){const t=v.fromStringCache.get(e);return t!==void 0?t:v.fromString(e)}else return typeof e=="number"?v.fromNumber(e):v.dZero}static abs(e){return _(e).abs()}static neg(e){return _(e).neg()}static negate(e){return _(e).neg()}static negated(e){return _(e).neg()}static sign(e){return _(e).sign}static sgn(e){return _(e).sign}static round(e){return _(e).round()}static floor(e){return _(e).floor()}static ceil(e){return _(e).ceil()}static trunc(e){return _(e).trunc()}static add(e,t){return _(e).add(t)}static plus(e,t){return _(e).add(t)}static sub(e,t){return _(e).sub(t)}static subtract(e,t){return _(e).sub(t)}static minus(e,t){return _(e).sub(t)}static mul(e,t){return _(e).mul(t)}static multiply(e,t){return _(e).mul(t)}static times(e,t){return _(e).mul(t)}static div(e,t){return _(e).div(t)}static divide(e,t){return _(e).div(t)}static recip(e){return _(e).recip()}static reciprocal(e){return _(e).recip()}static reciprocate(e){return _(e).reciprocate()}static cmp(e,t){return _(e).cmp(t)}static cmpabs(e,t){return _(e).cmpabs(t)}static compare(e,t){return _(e).cmp(t)}static isNaN(e){return e=_(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag)}static isFinite(e){return e=_(e),isFinite(e.sign)&&isFinite(e.layer)&&isFinite(e.mag)}static eq(e,t){return _(e).eq(t)}static equals(e,t){return _(e).eq(t)}static neq(e,t){return _(e).neq(t)}static notEquals(e,t){return _(e).notEquals(t)}static lt(e,t){return _(e).lt(t)}static lte(e,t){return _(e).lte(t)}static gt(e,t){return _(e).gt(t)}static gte(e,t){return _(e).gte(t)}static max(e,t){return _(e).max(t)}static min(e,t){return _(e).min(t)}static minabs(e,t){return _(e).minabs(t)}static maxabs(e,t){return _(e).maxabs(t)}static clamp(e,t,n){return _(e).clamp(t,n)}static clampMin(e,t){return _(e).clampMin(t)}static clampMax(e,t){return _(e).clampMax(t)}static cmp_tolerance(e,t,n){return _(e).cmp_tolerance(t,n)}static compare_tolerance(e,t,n){return _(e).cmp_tolerance(t,n)}static eq_tolerance(e,t,n){return _(e).eq_tolerance(t,n)}static equals_tolerance(e,t,n){return _(e).eq_tolerance(t,n)}static neq_tolerance(e,t,n){return _(e).neq_tolerance(t,n)}static notEquals_tolerance(e,t,n){return _(e).notEquals_tolerance(t,n)}static lt_tolerance(e,t,n){return _(e).lt_tolerance(t,n)}static lte_tolerance(e,t,n){return _(e).lte_tolerance(t,n)}static gt_tolerance(e,t,n){return _(e).gt_tolerance(t,n)}static gte_tolerance(e,t,n){return _(e).gte_tolerance(t,n)}static pLog10(e){return _(e).pLog10()}static absLog10(e){return _(e).absLog10()}static log10(e){return _(e).log10()}static log(e,t){return _(e).log(t)}static log2(e){return _(e).log2()}static ln(e){return _(e).ln()}static logarithm(e,t){return _(e).logarithm(t)}static pow(e,t){return _(e).pow(t)}static pow10(e){return _(e).pow10()}static pow_base(e,t){return _(e).pow_base(t)}static root(e,t){return _(e).root(t)}static factorial(e,t){return _(e).factorial()}static gamma(e,t){return _(e).gamma()}static lngamma(e,t){return _(e).lngamma()}static exp(e){return _(e).exp()}static sqr(e){return _(e).sqr()}static sqrt(e){return _(e).sqrt()}static cube(e){return _(e).cube()}static cbrt(e){return _(e).cbrt()}static tetrate(e,t=2,n=U(1,0,1)){return _(e).tetrate(t,n)}static iteratedexp(e,t=2,n=U(1,0,1)){return _(e).iteratedexp(t,n)}static iteratedlog(e,t=10,n=1){return _(e).iteratedlog(t,n)}static layeradd10(e,t){return _(e).layeradd10(t)}static layeradd(e,t,n=10){return _(e).layeradd(t,n)}static slog(e,t=10){return _(e).slog(t)}static lambertw(e){return _(e).lambertw()}static ssqrt(e){return _(e).ssqrt()}static pentate(e,t=2,n=U(1,0,1)){return _(e).pentate(t,n)}static sin(e){return _(e).sin()}static cos(e){return _(e).cos()}static tan(e){return _(e).tan()}static asin(e){return _(e).asin()}static acos(e){return _(e).acos()}static atan(e){return _(e).atan()}static sinh(e){return _(e).sinh()}static cosh(e){return _(e).cosh()}static tanh(e){return _(e).tanh()}static asinh(e){return _(e).asinh()}static acosh(e){return _(e).acosh()}static atanh(e){return _(e).atanh()}static affordGeometricSeries(e,t,n,r){return this.affordGeometricSeries_core(_(e),_(t),_(n),r)}static sumGeometricSeries(e,t,n,r){return this.sumGeometricSeries_core(e,_(t),_(n),r)}static affordArithmeticSeries(e,t,n,r){return this.affordArithmeticSeries_core(_(e),_(t),_(n),_(r))}static sumArithmeticSeries(e,t,n,r){return this.sumArithmeticSeries_core(_(e),_(t),_(n),_(r))}static efficiencyOfPurchase(e,t,n){return this.efficiencyOfPurchase_core(_(e),_(t),_(n))}static randomDecimalForTesting(e){if(Math.random()*20<1)return U(0,0,0);const t=Math.random()>.5?1:-1;if(Math.random()*20<1)return U(t,0,1);const n=Math.floor(Math.random()*(e+1));let r=n===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(r=Math.trunc(r));let i=Math.pow(10,r);return Math.random()>.9&&(i=Math.trunc(i)),B(t,n,i)}static affordGeometricSeries_core(e,t,n,r){const i=t.mul(n.pow(r));return v.floor(e.div(i).mul(n.sub(1)).add(1).log10().div(n.log10()))}static sumGeometricSeries_core(e,t,n,r){return t.mul(n.pow(r)).mul(v.sub(1,n.pow(e))).div(v.sub(1,n))}static affordArithmeticSeries_core(e,t,n,r){const s=t.add(r.mul(n)).sub(n.div(2)),a=s.pow(2);return s.neg().add(a.add(n.mul(e).mul(2)).sqrt()).div(n).floor()}static sumArithmeticSeries_core(e,t,n,r){const i=t.add(r.mul(n));return e.div(2).mul(i.mul(2).plus(e.sub(1).mul(n)))}static efficiencyOfPurchase_core(e,t,n){return e.div(t).add(e.div(n))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<Zi)return this.layer+=1,this.mag=Math.log10(this.mag),this;let e=Math.abs(this.mag),t=Math.sign(this.mag);if(e>=Ji)return this.layer+=1,this.mag=t*Math.log10(e),this;for(;e<Ki&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=t*Math.pow(10,e),e=Math.abs(this.mag),t=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this.normalize(),this}fromComponents_noNormalize(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this}fromMantissaExponent(e,t){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=t+Math.log10(e),this.normalize(),this}fromMantissaExponent_noNormalize(e,t){return this.fromMantissaExponent(e,t),this}fromDecimal(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}fromNumber(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}fromString(e){const t=e,n=v.fromStringCache.get(t);if(n!==void 0)return this.fromDecimal(n);e=e.replace(",","");const r=e.split("^^^");if(r.length===2){const y=parseFloat(r[0]),N=parseFloat(r[1]),T=r[1].split(";");let S=1;if(T.length===2&&(S=parseFloat(T[1]),isFinite(S)||(S=1)),isFinite(y)&&isFinite(N)){const $=v.pentate(y,N,S);return this.sign=$.sign,this.layer=$.layer,this.mag=$.mag,v.fromStringCache.maxSize>=1&&v.fromStringCache.set(t,v.fromDecimal(this)),this}}const i=e.split("^^");if(i.length===2){const y=parseFloat(i[0]),N=parseFloat(i[1]),T=i[1].split(";");let S=1;if(T.length===2&&(S=parseFloat(T[1]),isFinite(S)||(S=1)),isFinite(y)&&isFinite(N)){const $=v.tetrate(y,N,S);return this.sign=$.sign,this.layer=$.layer,this.mag=$.mag,v.fromStringCache.maxSize>=1&&v.fromStringCache.set(t,v.fromDecimal(this)),this}}const s=e.split("^");if(s.length===2){const y=parseFloat(s[0]),N=parseFloat(s[1]);if(isFinite(y)&&isFinite(N)){const T=v.pow(y,N);return this.sign=T.sign,this.layer=T.layer,this.mag=T.mag,v.fromStringCache.maxSize>=1&&v.fromStringCache.set(t,v.fromDecimal(this)),this}}e=e.trim().toLowerCase();let a,u,c=e.split("pt");if(c.length===2){a=10,u=parseFloat(c[0]),c[1]=c[1].replace("(",""),c[1]=c[1].replace(")","");let y=parseFloat(c[1]);if(isFinite(y)||(y=1),isFinite(a)&&isFinite(u)){const N=v.tetrate(a,u,y);return this.sign=N.sign,this.layer=N.layer,this.mag=N.mag,v.fromStringCache.maxSize>=1&&v.fromStringCache.set(t,v.fromDecimal(this)),this}}if(c=e.split("p"),c.length===2){a=10,u=parseFloat(c[0]),c[1]=c[1].replace("(",""),c[1]=c[1].replace(")","");let y=parseFloat(c[1]);if(isFinite(y)||(y=1),isFinite(a)&&isFinite(u)){const N=v.tetrate(a,u,y);return this.sign=N.sign,this.layer=N.layer,this.mag=N.mag,v.fromStringCache.maxSize>=1&&v.fromStringCache.set(t,v.fromDecimal(this)),this}}const f=e.split("e"),h=f.length-1;if(h===0){const y=parseFloat(e);if(isFinite(y))return this.fromNumber(y),v.fromStringCache.size>=1&&v.fromStringCache.set(t,v.fromDecimal(this)),this}else if(h===1){const y=parseFloat(e);if(isFinite(y)&&y!==0)return this.fromNumber(y),v.fromStringCache.maxSize>=1&&v.fromStringCache.set(t,v.fromDecimal(this)),this}const m=e.split("e^");if(m.length===2){this.sign=1,m[0].charAt(0)=="-"&&(this.sign=-1);let y="";for(let N=0;N<m[1].length;++N){const T=m[1].charCodeAt(N);if(T>=43&&T<=57||T===101)y+=m[1].charAt(N);else return this.layer=parseFloat(y),this.mag=parseFloat(m[1].substr(N+1)),this.normalize(),v.fromStringCache.maxSize>=1&&v.fromStringCache.set(t,v.fromDecimal(this)),this}}if(h<1)return this.sign=0,this.layer=0,this.mag=0,v.fromStringCache.maxSize>=1&&v.fromStringCache.set(t,v.fromDecimal(this)),this;const w=parseFloat(f[0]);if(w===0)return this.sign=0,this.layer=0,this.mag=0,v.fromStringCache.maxSize>=1&&v.fromStringCache.set(t,v.fromDecimal(this)),this;let C=parseFloat(f[f.length-1]);if(h>=2){const y=parseFloat(f[f.length-2]);isFinite(y)&&(C*=Math.sign(y),C+=ln(y))}if(!isFinite(w))this.sign=f[0]==="-"?-1:1,this.layer=h,this.mag=C;else if(h===1)this.sign=Math.sign(w),this.layer=1,this.mag=C+Math.log10(Math.abs(w));else if(this.sign=Math.sign(w),this.layer=h,h===2){const y=v.mul(B(1,2,C),_(w));return this.sign=y.sign,this.layer=y.layer,this.mag=y.mag,v.fromStringCache.maxSize>=1&&v.fromStringCache.set(t,v.fromDecimal(this)),this}else this.mag=C;return this.normalize(),v.fromStringCache.maxSize>=1&&v.fromStringCache.set(t,v.fromDecimal(this)),this}fromValue(e){return e instanceof v?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(e){return isNaN(this.m)?Number.NaN:this.m===0?0:ot(this.m,e)}magnitudeWithDecimalPlaces(e){return isNaN(this.mag)?Number.NaN:this.mag===0?0:ot(this.mag,e)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=Rn?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}toFixed(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}toPrecision(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):ot(this.m,e)+"e"+ot(this.e,e):this.layer===1?ot(this.m,e)+"e"+ot(this.e,e):this.layer<=Rn?(this.sign===-1?"-":"")+"e".repeat(this.layer)+ot(this.mag,e):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+ot(this.mag,e)}abs(){return U(this.sign===0?0:1,this.layer,this.mag)}neg(){return U(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?v.dZero:this.layer===0?B(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?v.dZero:this.layer===0?B(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?v.dZero:this.layer===0?B(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?v.dZero:this.layer===0?B(this.sign,0,Math.trunc(this.mag)):this}add(e){const t=_(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer)||this.sign===0)return t;if(t.sign===0)return this;if(this.sign===-t.sign&&this.layer===t.layer&&this.mag===t.mag)return U(0,0,0);let n,r;if(this.layer>=2||t.layer>=2)return this.maxabs(t);if(v.cmpabs(this,t)>0?(n=this,r=t):(n=t,r=this),n.layer===0&&r.layer===0)return v.fromNumber(n.sign*n.mag+r.sign*r.mag);const i=n.layer*Math.sign(n.mag),s=r.layer*Math.sign(r.mag);if(i-s>=2)return n;if(i===0&&s===-1){if(Math.abs(r.mag-Math.log10(n.mag))>on)return n;{const a=Math.pow(10,Math.log10(n.mag)-r.mag),u=r.sign+n.sign*a;return B(Math.sign(u),1,r.mag+Math.log10(Math.abs(u)))}}if(i===1&&s===0){if(Math.abs(n.mag-Math.log10(r.mag))>on)return n;{const a=Math.pow(10,n.mag-Math.log10(r.mag)),u=r.sign+n.sign*a;return B(Math.sign(u),1,Math.log10(r.mag)+Math.log10(Math.abs(u)))}}if(Math.abs(n.mag-r.mag)>on)return n;{const a=Math.pow(10,n.mag-r.mag),u=r.sign+n.sign*a;return B(Math.sign(u),1,r.mag+Math.log10(Math.abs(u)))}}plus(e){return this.add(e)}sub(e){return this.add(_(e).neg())}subtract(e){return this.sub(e)}minus(e){return this.sub(e)}mul(e){const t=_(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer))return t;if(this.sign===0||t.sign===0)return U(0,0,0);if(this.layer===t.layer&&this.mag===-t.mag)return U(this.sign*t.sign,0,1);let n,r;if(this.layer>t.layer||this.layer==t.layer&&Math.abs(this.mag)>Math.abs(t.mag)?(n=this,r=t):(n=t,r=this),n.layer===0&&r.layer===0)return v.fromNumber(n.sign*r.sign*n.mag*r.mag);if(n.layer>=3||n.layer-r.layer>=2)return B(n.sign*r.sign,n.layer,n.mag);if(n.layer===1&&r.layer===0)return B(n.sign*r.sign,1,n.mag+Math.log10(r.mag));if(n.layer===1&&r.layer===1)return B(n.sign*r.sign,1,n.mag+r.mag);if(n.layer===2&&r.layer===1){const i=B(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(B(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)));return B(n.sign*r.sign,i.layer+1,i.sign*i.mag)}if(n.layer===2&&r.layer===2){const i=B(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(B(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)));return B(n.sign*r.sign,i.layer+1,i.sign*i.mag)}throw Error("Bad arguments to mul: "+this+", "+e)}multiply(e){return this.mul(e)}times(e){return this.mul(e)}div(e){const t=_(e);return this.mul(t.recip())}divide(e){return this.div(e)}divideBy(e){return this.div(e)}dividedBy(e){return this.div(e)}recip(){return this.mag===0?v.dNaN:this.layer===0?B(this.sign,0,1/this.mag):B(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(e){const t=_(e);return this.sign>t.sign?1:this.sign<t.sign?-1:this.sign*this.cmpabs(e)}cmpabs(e){const t=_(e),n=this.mag>0?this.layer:-this.layer,r=t.mag>0?t.layer:-t.layer;return n>r?1:n<r?-1:this.mag>t.mag?1:this.mag<t.mag?-1:0}compare(e){return this.cmp(e)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(e){const t=_(e);return this.sign===t.sign&&this.layer===t.layer&&this.mag===t.mag}equals(e){return this.eq(e)}neq(e){return!this.eq(e)}notEquals(e){return this.neq(e)}lt(e){return this.cmp(e)===-1}lte(e){return!this.gt(e)}gt(e){return this.cmp(e)===1}gte(e){return!this.lt(e)}max(e){const t=_(e);return this.lt(t)?t:this}min(e){const t=_(e);return this.gt(t)?t:this}maxabs(e){const t=_(e);return this.cmpabs(t)<0?t:this}minabs(e){const t=_(e);return this.cmpabs(t)>0?t:this}clamp(e,t){return this.max(e).min(t)}clampMin(e){return this.max(e)}clampMax(e){return this.min(e)}cmp_tolerance(e,t){const n=_(e);return this.eq_tolerance(n,t)?0:this.cmp(n)}compare_tolerance(e,t){return this.cmp_tolerance(e,t)}eq_tolerance(e,t){const n=_(e);if(t==null&&(t=1e-7),this.sign!==n.sign||Math.abs(this.layer-n.layer)>1)return!1;let r=this.mag,i=n.mag;return this.layer>n.layer&&(i=ln(i)),this.layer<n.layer&&(r=ln(r)),Math.abs(r-i)<=t*Math.max(Math.abs(r),Math.abs(i))}equals_tolerance(e,t){return this.eq_tolerance(e,t)}neq_tolerance(e,t){return!this.eq_tolerance(e,t)}notEquals_tolerance(e,t){return this.neq_tolerance(e,t)}lt_tolerance(e,t){const n=_(e);return!this.eq_tolerance(n,t)&&this.lt(n)}lte_tolerance(e,t){const n=_(e);return this.eq_tolerance(n,t)||this.lt(n)}gt_tolerance(e,t){const n=_(e);return!this.eq_tolerance(n,t)&&this.gt(n)}gte_tolerance(e,t){const n=_(e);return this.eq_tolerance(n,t)||this.gt(n)}pLog10(){return this.lt(v.dZero)?v.dZero:this.log10()}absLog10(){return this.sign===0?v.dNaN:this.layer>0?B(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):B(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?v.dNaN:this.layer>0?B(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):B(this.sign,0,Math.log10(this.mag))}log(e){return e=_(e),this.sign<=0||e.sign<=0||e.sign===1&&e.layer===0&&e.mag===1?v.dNaN:this.layer===0&&e.layer===0?B(this.sign,0,Math.log(this.mag)/Math.log(e.mag)):v.div(this.log10(),e.log10())}log2(){return this.sign<=0?v.dNaN:this.layer===0?B(this.sign,0,Math.log2(this.mag)):this.layer===1?B(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?B(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):B(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?v.dNaN:this.layer===0?B(this.sign,0,Math.log(this.mag)):this.layer===1?B(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?B(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):B(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(e){return this.log(e)}pow(e){const t=_(e),n=this,r=t;if(n.sign===0)return r.eq(0)?U(1,0,1):n;if(n.sign===1&&n.layer===0&&n.mag===1)return n;if(r.sign===0)return U(1,0,1);if(r.sign===1&&r.layer===0&&r.mag===1)return n;const i=n.absLog10().mul(r).pow10();return this.sign===-1?Math.abs(r.toNumber()%2)%2===1?i.neg():Math.abs(r.toNumber()%2)%2===0?i:v.dNaN:i}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return v.dNaN;let e=this;if(e.layer===0){const t=Math.pow(10,e.sign*e.mag);if(Number.isFinite(t)&&Math.abs(t)>=.1)return B(1,0,t);if(e.sign===0)return v.dOne;e=U(e.sign,e.layer+1,Math.log10(e.mag))}return e.sign>0&&e.mag>=0?B(e.sign,e.layer+1,e.mag):e.sign<0&&e.mag>=0?B(-e.sign,e.layer+1,-e.mag):v.dOne}pow_base(e){return _(e).pow(this)}root(e){const t=_(e);return this.pow(t.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?v.exp(v.mul(this,v.ln(this).sub(1))):v.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(U(1,0,24)))return v.fromNumber(is(this.sign*this.mag));const e=this.mag-1;let t=.9189385332046727;t=t+(e+.5)*Math.log(e),t=t-e;const n=e*e;let r=e,i=12*r,s=1/i,a=t+s;if(a===t||(t=a,r=r*n,i=360*r,s=1/i,a=t-s,a===t))return v.exp(t);t=a,r=r*n,i=1260*r;let u=1/i;return t=t+u,r=r*n,i=1680*r,u=1/i,t=t-u,v.exp(t)}else return this.layer===1?v.exp(v.mul(this,v.ln(this).sub(1))):v.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?v.dOne:this.layer===0&&this.mag<=709.7?v.fromNumber(Math.exp(this.sign*this.mag)):this.layer===0?B(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?B(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):B(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return v.fromNumber(Math.sqrt(this.sign*this.mag));if(this.layer===1)return B(1,2,Math.log10(this.mag)-.3010299956639812);{const e=v.div(U(this.sign,this.layer-1,this.mag),U(1,0,2));return e.layer+=1,e.normalize(),e}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(e=2,t=U(1,0,1)){if(e===1)return v.pow(this,t);if(e===0)return new v(t);if(this.eq(v.dOne))return v.dOne;if(this.eq(-1))return v.pow(this,t);if(e===Number.POSITIVE_INFINITY){const i=this.toNumber();if(i<=1.444667861009766&&i>=.06598803584531254){if(i>1.444667861009099)return v.fromNumber(Math.E);const s=v.ln(this).neg();return s.lambertw().div(s)}else return i>1.444667861009766?v.fromNumber(Number.POSITIVE_INFINITY):v.dNaN}if(this.eq(v.dZero)){let i=Math.abs((e+1)%2);return i>1&&(i=2-i),v.fromNumber(i)}if(e<0)return v.iteratedlog(t,this,-e);t=_(t);const n=e;e=Math.trunc(e);const r=n-e;if(this.gt(v.dZero)&&this.lte(1.444667861009766)){e=Math.min(1e4,e);for(let i=0;i<e;++i){const s=t;if(t=this.pow(t),s.eq(t))return t}if(r!=0){const i=this.pow(t);return t.mul(1-r).add(i.mul(r))}return t}r!==0&&(t.eq(v.dOne)?this.gt(10)?t=this.pow(r):(t=v.fromNumber(v.tetrate_critical(this.toNumber(),r)),this.lt(2)&&(t=t.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?t=t.layeradd10(r):t=t.layeradd(r,this));for(let i=0;i<e;++i){if(t=this.pow(t),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(t.layer-this.layer>3)return U(t.sign,t.layer+(e-i-1),t.mag);if(i>1e4)return t}return t}iteratedexp(e=2,t=U(1,0,1)){return this.tetrate(e,t)}iteratedlog(e=10,t=1){if(t<0)return v.tetrate(e,-t,this);e=_(e);let n=v.fromDecimal(this);const r=t;t=Math.trunc(t);const i=r-t;if(n.layer-e.layer>3){const s=Math.min(t,n.layer-e.layer-3);t-=s,n.layer-=s}for(let s=0;s<t;++s){if(n=n.log(e),!isFinite(n.layer)||!isFinite(n.mag))return n.normalize();if(s>1e4)return n}return i>0&&i<1&&(e.eq(10)?n=n.layeradd10(-i):n=n.layeradd(-i,e)),n}slog(e=10,t=100){let n=.001,r=!1,i=!1,s=this.slog_internal(e).toNumber();for(let a=1;a<t;++a){const c=new v(e).tetrate(s).gt(this);if(a>1&&i!=c&&(r=!0),i=c,r?n/=2:n*=2,n=Math.abs(n)*(c?-1:1),s+=n,n===0)break}return v.fromNumber(s)}slog_internal(e=10){if(e=_(e),e.lte(v.dZero)||e.eq(v.dOne))return v.dNaN;if(e.lt(v.dOne))return this.eq(v.dOne)?v.dZero:this.eq(v.dZero)?v.dNegOne:v.dNaN;if(this.mag<0||this.eq(v.dZero))return v.dNegOne;let t=0,n=v.fromDecimal(this);if(n.layer-e.layer>3){const r=n.layer-e.layer-3;t+=r,n.layer-=r}for(let r=0;r<100;++r)if(n.lt(v.dZero))n=v.pow(e,n),t-=1;else{if(n.lte(v.dOne))return v.fromNumber(t+v.slog_critical(e.toNumber(),n.toNumber()));t+=1,n=v.log(n,e)}return v.fromNumber(t)}static slog_critical(e,t){return e>10?t-1:v.critical_section(e,t,rs)}static tetrate_critical(e,t){return v.critical_section(e,t,ns)}static critical_section(e,t,n){t*=10,t<0&&(t=0),t>10&&(t=10),e<2&&(e=2),e>10&&(e=10);let r=0,i=0;for(let a=0;a<pt.length;++a)if(pt[a]==e){r=n[a][Math.floor(t)],i=n[a][Math.ceil(t)];break}else if(pt[a]<e&&pt[a+1]>e){const u=(e-pt[a])/(pt[a+1]-pt[a]);r=n[a][Math.floor(t)]*(1-u)+n[a+1][Math.floor(t)]*u,i=n[a][Math.ceil(t)]*(1-u)+n[a+1][Math.ceil(t)]*u;break}const s=t-Math.floor(t);return r<=0||i<=0?r*(1-s)+i*s:Math.pow(e,Math.log(r)/Math.log(e)*(1-s)+Math.log(i)/Math.log(e)*s)}layeradd10(e){e=v.fromValue_noAlloc(e).toNumber();const t=v.fromDecimal(this);if(e>=1){t.mag<0&&t.layer>0?(t.sign=0,t.mag=0,t.layer=0):t.sign===-1&&t.layer==0&&(t.sign=1,t.mag=-t.mag);const n=Math.trunc(e);e-=n,t.layer+=n}if(e<=-1){const n=Math.trunc(e);if(e-=n,t.layer+=n,t.layer<0)for(let r=0;r<100;++r){if(t.layer++,t.mag=Math.log10(t.mag),!isFinite(t.mag))return t.sign===0&&(t.sign=1),t.layer<0&&(t.layer=0),t.normalize();if(t.layer>=0)break}}for(;t.layer<0;)t.layer++,t.mag=Math.log10(t.mag);return t.sign===0&&(t.sign=1,t.mag===0&&t.layer>=1&&(t.layer-=1,t.mag=1)),t.normalize(),e!==0?t.layeradd(e,10):t}layeradd(e,t){const r=this.slog(t).toNumber()+e;return r>=0?v.tetrate(t,r):Number.isFinite(r)?r>=-1?v.log(v.tetrate(t,r+1),t):v.log(v.log(v.tetrate(t,r+2),t),t):v.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return v.fromNumber(Ln(this.toNumber()));if(this.layer===0)return v.fromNumber(Ln(this.sign*this.mag));if(this.layer===1)return An(this);if(this.layer===2)return An(this);if(this.layer>=3)return U(this.sign,this.layer-1,this.mag);throw new Error("Unhandled behavior in lambertw()")}ssqrt(){if(this.sign==1&&this.layer>=3)return U(this.sign,this.layer-1,this.mag);const e=this.ln();return e.div(e.lambertw())}pentate(e=2,t=U(1,0,1)){t=_(t);const n=e;e=Math.trunc(e);const r=n-e;r!==0&&(t.eq(v.dOne)?(++e,t=v.fromNumber(r)):this.eq(10)?t=t.layeradd10(r):t=t.layeradd(r,this));for(let i=0;i<e;++i){if(t=this.tetrate(t.toNumber()),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(i>10)return t}return t}sin(){return this.mag<0?this:this.layer===0?v.fromNumber(Math.sin(this.sign*this.mag)):U(0,0,0)}cos(){return this.mag<0?v.dOne:this.layer===0?v.fromNumber(Math.cos(this.sign*this.mag)):U(0,0,0)}tan(){return this.mag<0?this:this.layer===0?v.fromNumber(Math.tan(this.sign*this.mag)):U(0,0,0)}asin(){return this.mag<0?this:this.layer===0?v.fromNumber(Math.asin(this.sign*this.mag)):U(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?v.fromNumber(Math.acos(this.toNumber())):this.layer===0?v.fromNumber(Math.acos(this.sign*this.mag)):U(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?v.fromNumber(Math.atan(this.sign*this.mag)):v.fromNumber(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return v.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return v.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?U(Number.NaN,Number.NaN,Number.NaN):v.ln(this.add(1).div(v.fromNumber(1).sub(this))).div(2)}ascensionPenalty(e){return e===0?this:this.root(v.pow(10,e))}egg(){return this.add(9)}lessThanOrEqualTo(e){return this.cmp(e)<1}lessThan(e){return this.cmp(e)<0}greaterThanOrEqualTo(e){return this.cmp(e)>-1}greaterThan(e){return this.cmp(e)>0}};let l=v;l.fromStringCache=new Wi(es);l.dZero=U(0,0,0);l.dOne=U(1,0,1);l.dNegOne=U(-1,0,1);l.dTwo=U(1,0,2);l.dTen=U(1,0,10);l.dNaN=U(Number.NaN,Number.NaN,Number.NaN);l.dInf=U(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);l.dNegInf=U(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);l.dNumberMax=B(1,0,Number.MAX_VALUE);l.dNumberMin=B(1,0,Number.MIN_VALUE);_=l.fromValue_noAlloc;B=l.fromComponents;U=l.fromComponents_noNormalize;l.fromMantissaExponent;l.fromMantissaExponent_noNormalize;const ss=new l(1);function xt(e,t,n=!0){let r=l.log10(e).floor(),i=l.div(e,l.pow(10,r));i.toStringWithDecimalPlaces(t)==="10"&&(i=ss,r=r.add(1));const s=r.gte(1e9)?Pe(r,Math.max(Math.max(t,3),z.defaultDecimalsShown)):r.gte(1e4)?Kt(r,0):r.toStringWithDecimalPlaces(0);return n?i.toStringWithDecimalPlaces(t)+"e"+s:"e"+s}function Kt(e,t){if(e==null)return"NaN";if(e=new l(e),e.mag<.001)return 0 .toFixed(t);const r=e.toStringWithDecimalPlaces(t).split(".");return r[0]=r[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),r.length===1?r[0]:r[0]+"."+r[1]}function Qn(e,t){return e==null?"NaN":(e=new l(e),e.mag<1e-4?0 .toFixed(t):(e.mag<.1&&t!==0&&(t=Math.max(Math.max(t,e.log10().negate().ceil().toNumber()),z.defaultDecimalsShown)),e.toStringWithDecimalPlaces(t)))}const as=new l("eeee1000"),os=new l("e100000"),Bn=new l("e1000"),er=new l(1e9),ls=new l(1e6),us=new l(1e3),cs=new l(.98),ds=new l(.001),tr=new l(0);function Pe(e,t,n){if(t==null&&(t=z.defaultDecimalsShown),n=n!=null?n:z.defaultShowSmall,e=new l(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag))return"NaN";if(e.sign<0)return"-"+Pe(e.neg(),t);if(e.mag===Number.POSITIVE_INFINITY)return"Infinity";if(e.gte(as)){const r=e.slog();return r.gte(ls)?"F"+Pe(r.floor()):l.pow(10,r.sub(r.floor())).toStringWithDecimalPlaces(3)+"F"+Kt(r.floor(),0)}else{if(e.gte(os))return xt(e,0,!1);if(e.gte(Bn))return xt(e,0);if(e.gte(er))return xt(e,t);if(e.gte(us))return Kt(e,0);if(e.gte(ds)||!n)return Qn(e,t);if(e.eq(tr))return 0 .toFixed(t)}return e=rr(e),e.lt(Bn)?xt(e,t).replace(/([^(?:e|F)]*)$/,"-$1"):Pe(e,t)+"\u207B\xB9"}function Te(e){return e=new l(e),e.sign<0?"-"+Te(e.neg()):e.gte(er)||e.lte(cs)&&!e.eq(tr)?Pe(e):Pe(e,0)}function nr(e){return l.lt(e,0)?"-"+nr(l.neg(e)):l.gt(e,2**51)?Pe(l.div(e,31536e3))+"y":(e=new l(e).toNumber(),e<60?Pe(e)+"s":e<3600?Te(Math.floor(e/60))+"m "+Pe(e%60)+"s":e<86400?Te(Math.floor(e/3600))+"h "+Te(Math.floor(e/60)%60)+"m "+Te(e%60)+"s":e<31536e3?Te(Math.floor(e/84600)%365)+"d "+Te(Math.floor(e/3600)%24)+"h "+Te(Math.floor(e/60)%60)+"m":Te(Math.floor(e/31536e3))+"y "+Te(Math.floor(e/84600)%365)+"d "+Te(Math.floor(e/3600)%24)+"h")}function fs(e,t,n){e=new l(e);let r=e.toStringWithDecimalPlaces(t);return new l(r).gte(n)&&(r=l.sub(n,Math.pow(.1,t)).toStringWithDecimalPlaces(t)),r}function gs(e,t){return Pe(e,t,!0)}function rr(e){let t=l.log10(e).ceil();const n=l.div(e,l.pow(10,t));return t=t.neg(),e=new l(10).pow(t).times(n),e}var ms=Object.freeze(Object.defineProperty({__proto__:null,default:l,exponentialFormat:xt,commaFormat:Kt,regularFormat:Qn,format:Pe,formatWhole:Te,formatTime:nr,toPlaces:fs,formatSmall:gs,invertOOM:rr},Symbol.toStringTag,{value:"Module"}));const{exponentialFormat:ps,commaFormat:hs,regularFormat:vs,format:Ie,formatWhole:yt,formatTime:en,toPlaces:bs,formatSmall:ir,invertOOM:ys}=ms;window.Decimal=l;window.exponentialFormat=ps;window.commaFormat=hs;window.regularFormat=vs;window.format=Ie;window.formatWhole=yt;window.formatTime=en;window.toPlaces=bs;window.formatSmall=ir;window.invertOOM=ys;function sr(e){let t=e.replace(/([A-Z])/g," $1");return t=t.charAt(0).toUpperCase()+t.slice(1),t}function _s(e){return(e[0]+e.slice(1).replace(/[A-Z]/g,t=>`-${t}`)).toLowerCase()}function cn(e){return typeof e=="function"}var W=(e=>(e.Up="Up",e.Down="Down",e.Left="Left",e.Right="Right",e.Default="Up",e))(W||{});const Rt=Symbol("DoNotCache");function M(e,t){const n=e[t];cn(n)&&n.length===0&&!n[Rt]?e[t]=O(n.bind(e)):cn(n)&&(e[t]=n.bind(e),e[t][Rt]=!0)}function et(e){return cn(e)&&!e[Rt]&&(e=O(e)),e}const _e=Symbol("Component"),Me=Symbol("GatherProps");let ws=0;function it(e="feature-"){return e+ws++}var fe=(e=>(e[e.Visible=0]="Visible",e[e.Hidden=1]="Hidden",e[e.None=2]="None",e))(fe||{});function Ge(e){const t=o(e);return t!==2&&t!==!1}function $t(e){return o(e)===1}function Z(e){return e[Rt]=!0,e}function Q(e,t,n){e[t]==null&&n!=null&&(e[t]=n)}function ar(e,...t){const n=[],r=i=>{Object.keys(i).forEach(s=>{const a=i[s];a!=null&&typeof a=="object"&&(t.includes(a.type)?n.push(a):!(a instanceof l)&&!ue(a)&&r(a))})};return r(e),n}const lt=Symbol("ProxyState");function pe(e,t={}){const n=t;let r=!1,i=!1;function s(){return r||(i&&console.error("Cyclical dependency detected. Cannot evaluate lazy proxy."),i=!0,Object.assign(n,e.call(n,n)),r=!0),n}return new Proxy(n,{get(a,u){if(u===lt)return s();const c=s()[u];return c!=null&&typeof c=="object"&&Ue in c?c[Ue]:c},set(a,u,c){return s()[u]=c,!0},has(a,u){return u===lt?!0:Reflect.has(s(),u)},ownKeys(){return Reflect.ownKeys(s())},getOwnPropertyDescriptor(a,u){return r||(Object.assign(n,e.call(n,n)),r=!0),Object.getOwnPropertyDescriptor(a,u)}})}const or=l.ln(10);function Wt(e){return e}function Ot(e,...t){const n=t.find(r=>I(r));return n==null?(console.error("Could not invert due to no input being a variable"),0):n.invert(e)}function Ns(e,t){return I(t)?t.invert(l.neg(e)):(console.error("Could not invert due to no input being a variable"),0)}function Cs(e,t){return I(t)?t.isIntegrable()?d.neg(t.getIntegralFormula(e)):(console.error("Could not integrate due to variable not being integrable"),d.constant(0)):(console.error("Could not integrate due to no input being a variable"),d.constant(0))}function ks(e){return d.neg(e)}function Ss(e,t,n){return I(t)?t.invert(l.sub(e,oe(n))):I(n)?n.invert(l.sub(e,oe(t))):(console.error("Could not invert due to no input being a variable"),0)}function Is(e,t,n){var r,i;if(I(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const s=t.getIntegralFormula(e);return d.times(n,(r=t.innermostVariable)!=null?r:0).add(s)}else if(I(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const s=n.getIntegralFormula(e);return d.times(t,(i=n.innermostVariable)!=null?i:0).add(s)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function Ms(e,t,n){if(I(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=t.getIntegralFormula(e);return d.add(r,n)}else if(I(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=n.getIntegralFormula(e);return d.add(r,t)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function $s(e,t,n){return I(t)?t.invert(l.add(e,oe(n))):I(n)?n.invert(l.sub(oe(t),e)):(console.error("Could not invert due to no input being a variable"),0)}function Ts(e,t,n){var r,i;if(I(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const s=t.getIntegralFormula(e);return d.sub(s,d.times(n,(r=t.innermostVariable)!=null?r:0))}else if(I(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const s=n.getIntegralFormula(e);return d.times(t,(i=n.innermostVariable)!=null?i:0).sub(s)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function Ps(e,t,n){if(I(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=t.getIntegralFormula(e);return d.sub(r,n)}else if(I(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=n.getIntegralFormula(e);return d.sub(r,t)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function Os(e,t,n){return I(t)?t.invert(l.div(e,oe(n))):I(n)?n.invert(l.div(e,oe(t))):(console.error("Could not invert due to no input being a variable"),0)}function Fs(e,t,n){if(I(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=t.getIntegralFormula(e);return d.times(r,n)}else if(I(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=n.getIntegralFormula(e);return d.times(r,t)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function xs(e,t,n){return I(t)?d.div(e,n):I(n)?d.div(e,t):(console.error("Could not apply substitution due to no input being a variable"),d.constant(0))}function Vs(e,t,n){return I(t)?t.invert(l.mul(e,oe(n))):I(n)?n.invert(l.div(oe(t),e)):(console.error("Could not invert due to no input being a variable"),0)}function Es(e,t,n){if(I(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=t.getIntegralFormula(e);return d.div(r,n)}else if(I(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=n.getIntegralFormula(e);return d.div(t,r)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function Ds(e,t,n){return I(t)?d.mul(e,n):I(n)?d.mul(e,t):(console.error("Could not apply substitution due to no input being a variable"),d.constant(0))}function qs(e,t){return I(t)?t.invert(l.recip(e)):(console.error("Could not invert due to no input being a variable"),0)}function Rs(e,t){if(I(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const n=t.getIntegralFormula(e);return d.ln(n)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function Ls(e,t){return I(t)?t.invert(l.pow10(e)):(console.error("Could not invert due to no input being a variable"),0)}function As(e){return l.ln(e).sub(1).times(e).div(or)}function Bs(e,t){if(I(t)){const n=or.times(e);return t.invert(n.div(n.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function Us(e,t){return I(t)?t.isIntegrable()?new d({inputs:[t.getIntegralFormula(e)],evaluate:As,invert:Bs}):(console.error("Could not integrate due to variable not being integrable"),d.constant(0)):(console.error("Could not integrate due to no input being a variable"),d.constant(0))}function js(e,t,n){return I(t)?t.invert(l.pow(oe(n),e)):I(n)?n.invert(l.root(oe(t),e)):(console.error("Could not invert due to no input being a variable"),0)}function zs(e,t){return l.ln(e).sub(1).times(e).div(l.ln(t))}function Gs(e,t,n){if(I(t)){const r=l.ln(oe(n)).times(e);return t.invert(r.div(r.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function Hs(e,t,n){return I(t)?t.isIntegrable()?new d({inputs:[t.getIntegralFormula(e),n],evaluate:zs,invert:Gs}):(console.error("Could not integrate due to variable not being integrable"),d.constant(0)):(console.error("Could not integrate due to no input being a variable"),d.constant(0))}function Ws(e,t){return I(t)?t.invert(l.pow(2,e)):(console.error("Could not invert due to no input being a variable"),0)}function Ys(e){return l.ln(e).sub(1).times(e).div(l.ln(2))}function Js(e,t){if(I(t)){const n=l.ln(2).times(e);return t.invert(n.div(n.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function Ks(e,t){return I(t)?t.isIntegrable()?new d({inputs:[t.getIntegralFormula(e)],evaluate:Ys,invert:Js}):(console.error("Could not integrate due to variable not being integrable"),d.constant(0)):(console.error("Could not integrate due to no input being a variable"),d.constant(0))}function Zs(e,t){return I(t)?t.invert(l.exp(e)):(console.error("Could not invert due to no input being a variable"),0)}function Xs(e){return l.ln(e).sub(1).times(e)}function Qs(e,t){return I(t)?t.invert(l.div(e,l.div(e,Math.E).lambertw())):(console.error("Could not invert due to no input being a variable"),0)}function ea(e,t){return I(t)?t.isIntegrable()?new d({inputs:[t.getIntegralFormula(e)],evaluate:Xs,invert:Qs}):(console.error("Could not integrate due to variable not being integrable"),d.constant(0)):(console.error("Could not integrate due to no input being a variable"),d.constant(0))}function ta(e,t,n){return I(t)?t.invert(l.root(e,oe(n))):I(n)?n.invert(l.ln(e).div(l.ln(oe(t)))):(console.error("Could not invert due to no input being a variable"),0)}function na(e,t,n){if(I(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=t.getIntegralFormula(e),i=d.add(n,1);return d.pow(r,i).div(i)}else if(I(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=n.getIntegralFormula(e);return d.pow(t,r).div(d.ln(t))}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function ra(e,t){return I(t)?t.invert(l.root(e,10)):(console.error("Could not invert due to no input being a variable"),0)}function ia(e,t){if(I(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const n=t.getIntegralFormula(e);return d.pow10(n).div(d.ln(10))}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function sa(e,t,n){return I(t)?t.invert(l.ln(e).div(l.ln(oe(n)))):I(n)?n.invert(l.root(oe(t),e)):(console.error("Could not invert due to no input being a variable"),0)}function aa(e,t,n){if(I(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=t.getIntegralFormula(e);return d.pow(n,r).div(d.ln(n))}else if(I(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=n.getIntegralFormula(e),i=d.add(t,1);return d.pow(r,i).div(i)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function oa(e,t,n){return I(t)?t.invert(l.root(e,l.recip(oe(n)))):I(n)?n.invert(l.ln(oe(t)).div(l.ln(e))):(console.error("Could not invert due to no input being a variable"),0)}function la(e,t,n){if(I(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=t.getIntegralFormula(e);return d.pow(r,d.recip(n).add(1)).times(n).div(d.add(n,1))}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function ua(e,t){return I(t)?t.invert(l.ln(e)):(console.error("Could not invert due to no input being a variable"),0)}function ca(e,t){if(I(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const n=t.getIntegralFormula(e);return d.exp(n)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function da(e,t=2,n=l.fromComponents_noNormalize(1,0,1)){const r=l.minabs(t,1e308).toNumber();return l.tetrate(e,r,n)}function fa(e,t,n,r){return I(t)?t.invert(l.ssqrt(e)):(console.error("Could not invert due to no input being a variable"),0)}function ga(e,t=2,n=l.fromComponents_noNormalize(1,0,1)){const r=l.minabs(t,1e308).toNumber();return l.iteratedexp(e,r,new l(n))}function ma(e,t,n,r){return I(t)?t.invert(l.iteratedlog(e,Math.E,l.minabs(1e308,oe(n)).toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function pa(e,t=10,n=2){const r=l.minabs(n,1e308).toNumber();return l.iteratedlog(e,t,r)}function ha(e,t=10){const n=l.minabs(t,1e308).toNumber();return l.slog(e,n)}function va(e,t,n){return I(t)?t.invert(l.tetrate(e,l.minabs(1e308,oe(n)).toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function ba(e,t,n){const r=l.minabs(t,1e308).toNumber();return l.layeradd(e,r,n)}function ya(e,t,n,r){return I(t)?t.invert(l.layeradd(e,l.minabs(1e308,oe(n)).negate().toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function _a(e,t){return I(t)?t.invert(l.pow(Math.E,e).times(e)):(console.error("Could not invert due to no input being a variable"),0)}function wa(e,t){return I(t)?t.invert(l.tetrate(e,2)):(console.error("Could not invert due to no input being a variable"),0)}function Na(e,t,n){const r=l.minabs(t,1e308).toNumber();return l.pentate(e,r,n)}function Ca(e,t){return I(t)?t.invert(l.asin(e)):(console.error("Could not invert due to no input being a variable"),0)}function ka(e,t){if(I(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const n=t.getIntegralFormula(e);return d.cos(n).neg()}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function Sa(e,t){return I(t)?t.invert(l.acos(e)):(console.error("Could not invert due to no input being a variable"),0)}function Ia(e,t){if(I(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const n=t.getIntegralFormula(e);return d.sin(n)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function Ma(e,t){return I(t)?t.invert(l.atan(e)):(console.error("Could not invert due to no input being a variable"),0)}function $a(e,t){if(I(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const n=t.getIntegralFormula(e);return d.cos(n).ln().neg()}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function Ta(e,t){return I(t)?t.invert(l.sin(e)):(console.error("Could not invert due to no input being a variable"),0)}function Pa(e,t){if(I(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const n=t.getIntegralFormula(e);return d.asin(n).times(n).add(d.sqrt(d.sub(1,d.pow(n,2))))}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function Oa(e,t){return I(t)?t.invert(l.cos(e)):(console.error("Could not invert due to no input being a variable"),0)}function Fa(e,t){if(I(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const n=t.getIntegralFormula(e);return d.acos(n).times(n).sub(d.sqrt(d.sub(1,d.pow(n,2))))}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function xa(e,t){return I(t)?t.invert(l.tan(e)):(console.error("Could not invert due to no input being a variable"),0)}function Va(e,t){if(I(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const n=t.getIntegralFormula(e);return d.atan(n).times(n).sub(d.ln(d.pow(n,2).add(1)).div(2))}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function Ea(e,t){return I(t)?t.invert(l.asinh(e)):(console.error("Could not invert due to no input being a variable"),0)}function Da(e,t){if(I(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const n=t.getIntegralFormula(e);return d.cosh(n)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function qa(e,t){return I(t)?t.invert(l.acosh(e)):(console.error("Could not invert due to no input being a variable"),0)}function Ra(e,t){if(I(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const n=t.getIntegralFormula(e);return d.sinh(n)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function La(e,t){return I(t)?t.invert(l.atanh(e)):(console.error("Could not invert due to no input being a variable"),0)}function Aa(e,t){if(I(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const n=t.getIntegralFormula(e);return d.cosh(n).ln()}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function Ba(e,t){return I(t)?t.invert(l.sinh(e)):(console.error("Could not invert due to no input being a variable"),0)}function Ua(e,t){if(I(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const n=t.getIntegralFormula(e);return d.asinh(n).times(n).sub(d.pow(n,2).add(1).sqrt())}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function ja(e,t){return I(t)?t.invert(l.cosh(e)):(console.error("Could not invert due to no input being a variable"),0)}function za(e,t){if(I(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const n=t.getIntegralFormula(e);return d.acosh(n).times(n).sub(d.add(n,1).sqrt().times(d.sub(n,1).sqrt()))}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function Ga(e,t){return I(t)?t.invert(l.tanh(e)):(console.error("Could not invert due to no input being a variable"),0)}function Ha(e,t){if(I(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const n=t.getIntegralFormula(e);return d.atanh(n).times(n).add(d.sub(1,d.pow(n,2)).ln().div(2))}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function Tt(e){return(t,n)=>new d({inputs:[t,n],evaluate:e,invert:Wt})}function I(e){return e instanceof re&&e.hasVariable()}function oe(e,t){return e instanceof re?e.evaluate(t):o(e)}function Wa(){return d.pow(this,2).div(2)}function Ya(){return this}const ie=class{constructor(e){this.negate=this.neg,this.negated=this.neg,this.sgn=this.sign,this.plus=this.add,this.subtract=this.sub,this.minus=this.sub,this.multiply=this.mul,this.times=this.mul,this.divide=this.div,this.divideBy=this.div,this.dividedBy=this.div,this.reciprocal=this.recip,this.reciprocate=this.recip,this.logarithm=this.log;let t;"inputs"in e&&(e.inputs=e.inputs.map(n=>typeof n=="object"&&Ue in n?n[Ue]:n)),"variable"in e?(typeof e.variable=="object"&&Ue in e.variable&&(e.variable=e.variable[Ue]),t=this.setupVariable(e)):"evaluate"in e?t=this.setupFormula(e):t=this.setupConstant(e),this.inputs=t.inputs,this.internalVariables=t.internalVariables,this.innermostVariable=t.innermostVariable,this.internalEvaluate=t.internalEvaluate,this.internalInvert=t.internalInvert,this.internalIntegrate=t.internalIntegrate,this.internalIntegrateInner=t.internalIntegrateInner,this.applySubstitution=t.applySubstitution,this.description=e.description}setupVariable({variable:e}){return{inputs:[e],internalVariables:1,innermostVariable:e,internalIntegrate:Wa,internalIntegrateInner:Ya,applySubstitution:Wt}}setupConstant({inputs:e}){return e.length!==1&&console.error("Evaluate function is required if inputs is not length 1"),{inputs:e,internalVariables:0}}setupFormula(e){var w,C;const{inputs:t,evaluate:n,invert:r,integrate:i,integrateInner:s,applySubstitution:a}=e,u=t.reduce((y,N)=>y+(N instanceof ie?N.internalVariables:0),0),c=t.find(y=>y instanceof ie&&y.hasVariable()),f=u===1?c==null?void 0:c.innermostVariable:void 0,h=(w=c==null?void 0:c.isInvertible())!=null?w:!1,m=(C=c==null?void 0:c.isIntegrable())!=null?C:!1;return{inputs:t,internalEvaluate:n,internalInvert:h?r:void 0,internalIntegrate:m?i:void 0,internalIntegrateInner:s,applySubstitution:a,innermostVariable:f,internalVariables:u}}isInvertible(){return this.hasVariable()&&(this.internalInvert!=null||this.internalEvaluate==null)}isIntegrable(){return this.hasVariable()&&this.internalIntegrate!=null}isIntegralInvertible(){return this.isIntegrable()?this.getIntegralFormula().isInvertible():!1}hasVariable(){return this.internalVariables===1}evaluate(e){var t,n,r;return(r=(n=(t=this.internalEvaluate)==null?void 0:t.call(this,...this.inputs.map(i=>oe(i,e))))!=null?n:this.hasVariable()?e:null)!=null?r:oe(this.inputs[0])}equals(e){return this.inputs.length===e.inputs.length&&this.inputs.every((t,n)=>t instanceof ie&&e.inputs[n]instanceof ie?t.equals(e.inputs[n]):!(t instanceof ie)&&!(e.inputs[n]instanceof ie)&&l.eq(o(t),o(e.inputs[n])))&&this.internalEvaluate===e.internalEvaluate&&this.internalInvert===e.internalInvert&&this.internalIntegrate===e.internalIntegrate&&this.internalVariables===e.internalVariables}static constant(e){return new d({inputs:[e]})}static variable(e){return new d({variable:e})}static stringify(e){var t;return e instanceof ie?e.description!=null?e.description:e.internalEvaluate==null?e.hasVariable()?"x":Ie((t=e.inputs[0])!=null?t:0):`${e.internalEvaluate.name}(${e.inputs.map(d.stringify).join(", ")})`:Ie(o(e))}static step(e,t,n){const r=n(d.variable(0)),i=et(t);function s(u){return l.lt(u,o(i))?u:l.add(r.evaluate(l.sub(u,o(i))),o(i))}function a(u,c){return I(c)&&r.isInvertible()?(l.gt(u,o(i))&&(u=l.add(r.invert(l.sub(u,o(i))),o(i))),c.invert(u)):(console.error("Could not invert due to no input being a variable"),0)}return new d({inputs:[e],evaluate:s,invert:r.isInvertible()&&r.hasVariable()?a:void 0,description:"indeterminate"})}static if(e,t,n,r){const i=E(0),s=d.variable(i),a=n(s),u=r==null?void 0:r(s),c=et(t);function f(m){return o(c)?(i.value=m,a.evaluate()):u?(i.value=m,u.evaluate()):m}function h(m,w){return!I(w)||!a.isInvertible()||u!=null&&!u.isInvertible()?(console.error("Could not invert due to no input being a variable"),0):o(c)?w.invert(a.invert(m)):u?w.invert(u.invert(m)):w.invert(m)}return new d({inputs:[e],evaluate:f,invert:a.isInvertible()&&a.hasVariable()?h:void 0,description:"indeterminate"})}static conditional(e,t,n,r){return d.if(e,t,n,r)}static abs(e){return new d({inputs:[e],evaluate:l.abs})}static neg(e){return new d({inputs:[e],evaluate:l.neg,invert:Ns,applySubstitution:ks,integrate:Cs})}static sign(e){return new d({inputs:[e],evaluate:l.sign})}static round(e){return new d({inputs:[e],evaluate:l.round,invert:Ot})}static floor(e){return new d({inputs:[e],evaluate:l.floor,invert:Ot})}static ceil(e){return new d({inputs:[e],evaluate:l.ceil,invert:Ot})}static trunc(e){return new d({inputs:[e],evaluate:l.trunc,invert:Ot})}static add(e,t){return new d({inputs:[e,t],evaluate:l.add,invert:Ss,integrate:Is,integrateInner:Ms,applySubstitution:Wt})}static sub(e,t){return new d({inputs:[e,t],evaluate:l.sub,invert:$s,integrate:Ts,integrateInner:Ps,applySubstitution:Wt})}static mul(e,t){return new d({inputs:[e,t],evaluate:l.mul,invert:Os,integrate:Fs,applySubstitution:xs})}static div(e,t){return new d({inputs:[e,t],evaluate:l.div,invert:Vs,integrate:Es,applySubstitution:Ds})}static recip(e){return new d({inputs:[e],evaluate:l.recip,invert:qs,integrate:Rs})}static clamp(e,t,n){return new d({inputs:[e,t,n],evaluate:l.clamp,invert:Ot})}static pLog10(e){return new d({inputs:[e],evaluate:l.pLog10})}static absLog10(e){return new d({inputs:[e],evaluate:l.absLog10})}static log10(e){return new d({inputs:[e],evaluate:l.log10,invert:Ls,integrate:Us})}static log(e,t){return new d({inputs:[e,t],evaluate:l.log,invert:js,integrate:Hs})}static log2(e){return new d({inputs:[e],evaluate:l.log2,invert:Ws,integrate:Ks})}static ln(e){return new d({inputs:[e],evaluate:l.ln,invert:Zs,integrate:ea})}static pow(e,t){return new d({inputs:[e,t],evaluate:l.pow,invert:ta,integrate:na})}static pow10(e){return new d({inputs:[e],evaluate:l.pow10,invert:ra,integrate:ia})}static pow_base(e,t){return new d({inputs:[e,t],evaluate:l.pow_base,invert:sa,integrate:aa})}static root(e,t){return new d({inputs:[e,t],evaluate:l.root,invert:oa,integrate:la})}static factorial(e){return new d({inputs:[e],evaluate:l.factorial})}static gamma(e){return new d({inputs:[e],evaluate:l.gamma})}static lngamma(e){return new d({inputs:[e],evaluate:l.lngamma})}static exp(e){return new d({inputs:[e],evaluate:l.exp,invert:ua,integrate:ca})}static sqr(e){return d.pow(e,2)}static sqrt(e){return d.root(e,2)}static cube(e){return d.pow(e,3)}static cbrt(e){return d.root(e,3)}static tetrate(e,t=2,n=l.fromComponents_noNormalize(1,0,1)){return new d({inputs:[e,t,n],evaluate:da,invert:fa})}static iteratedexp(e,t=2,n=l.fromComponents_noNormalize(1,0,1)){return new d({inputs:[e,t,n],evaluate:ga,invert:ma})}static iteratedlog(e,t=10,n=1){return new d({inputs:[e,t,n],evaluate:pa})}static slog(e,t=10){return new d({inputs:[e,t],evaluate:ha,invert:va})}static layeradd10(e,t){return new d({inputs:[e,t],evaluate:l.layeradd10})}static layeradd(e,t,n=10){return new d({inputs:[e,t,n],evaluate:ba,invert:ya})}static lambertw(e){return new d({inputs:[e],evaluate:l.lambertw,invert:_a})}static ssqrt(e){return new d({inputs:[e],evaluate:l.ssqrt,invert:wa})}static pentate(e,t=2,n=l.fromComponents_noNormalize(1,0,1)){return new d({inputs:[e,t,n],evaluate:Na})}static sin(e){return new d({inputs:[e],evaluate:l.sin,invert:Ta,integrate:ka})}static cos(e){return new d({inputs:[e],evaluate:l.cos,invert:Oa,integrate:Ia})}static tan(e){return new d({inputs:[e],evaluate:l.tan,invert:xa,integrate:$a})}static asin(e){return new d({inputs:[e],evaluate:l.asin,invert:Ca,integrate:Pa})}static acos(e){return new d({inputs:[e],evaluate:l.acos,invert:Sa,integrate:Fa})}static atan(e){return new d({inputs:[e],evaluate:l.atan,invert:Ma,integrate:Va})}static sinh(e){return new d({inputs:[e],evaluate:l.sinh,invert:Ba,integrate:Da})}static cosh(e){return new d({inputs:[e],evaluate:l.cosh,invert:ja,integrate:Ra})}static tanh(e){return new d({inputs:[e],evaluate:l.tanh,invert:Ga,integrate:Aa})}static asinh(e){return new d({inputs:[e],evaluate:l.asinh,invert:Ea,integrate:Ua})}static acosh(e){return new d({inputs:[e],evaluate:l.acosh,invert:qa,integrate:za})}static atanh(e){return new d({inputs:[e],evaluate:l.atanh,invert:La,integrate:Ha})}stringify(){return d.stringify(this)}step(e,t){return d.step(this,e,t)}if(e,t){return d.if(this,e,t)}conditional(e,t){return d.if(this,e,t)}abs(){return d.abs(this)}neg(){return d.neg(this)}sign(){return d.sign(this)}round(){return d.round(this)}floor(){return d.floor(this)}ceil(){return d.ceil(this)}trunc(){return d.trunc(this)}add(e){return d.add(this,e)}sub(e){return d.sub(this,e)}mul(e){return d.mul(this,e)}div(e){return d.div(this,e)}recip(){return d.recip(this)}max(e){return d.max(this,e)}min(e){return d.min(this,e)}maxabs(e){return d.maxabs(this,e)}minabs(e){return d.minabs(this,e)}clamp(e,t){return d.clamp(this,e,t)}clampMin(e){return d.clampMin(this,e)}clampMax(e){return d.clampMax(this,e)}pLog10(){return d.pLog10(this)}absLog10(){return d.absLog10(this)}log10(){return d.log10(this)}log(e){return d.log(this,e)}log2(){return d.log2(this)}ln(){return d.ln(this)}pow(e){return d.pow(this,e)}pow10(){return d.pow10(this)}pow_base(e){return d.pow_base(this,e)}root(e){return d.root(this,e)}factorial(){return d.factorial(this)}gamma(){return d.gamma(this)}lngamma(){return d.lngamma(this)}exp(){return d.exp(this)}sqr(){return d.pow(this,2)}sqrt(){return d.root(this,2)}cube(){return d.pow(this,3)}cbrt(){return d.root(this,3)}tetrate(e=2,t=l.fromComponents_noNormalize(1,0,1)){return d.tetrate(this,e,t)}iteratedexp(e=2,t=l.fromComponents_noNormalize(1,0,1)){return d.iteratedexp(this,e,t)}iteratedlog(e=10,t=1){return d.iteratedlog(this,e,t)}slog(e=10){return d.slog(this,e)}layeradd10(e){return d.layeradd10(this,e)}layeradd(e,t){return d.layeradd(this,e,t)}lambertw(){return d.lambertw(this)}ssqrt(){return d.ssqrt(this)}pentate(e=2,t=l.fromComponents_noNormalize(1,0,1)){return d.pentate(this,e,t)}sin(){return d.sin(this)}cos(){return d.cos(this)}tan(){return d.tan(this)}asin(){return d.asin(this)}acos(){return d.acos(this)}atan(){return d.atan(this)}sinh(){return d.sinh(this)}cosh(){return d.cosh(this)}tanh(){return d.tanh(this)}asinh(){return d.asinh(this)}acosh(){return d.acosh(this)}atanh(){return d.atanh(this)}};let re=ie;re.negate=ie.neg;re.negated=ie.neg;re.sgn=ie.sign;re.plus=ie.add;re.subtract=ie.sub;re.minus=ie.sub;re.multiply=ie.mul;re.times=ie.mul;re.divide=ie.div;re.divideBy=ie.div;re.dividedBy=ie.div;re.reciprocal=ie.recip;re.reciprocate=ie.recip;re.max=Tt(l.max);re.min=Tt(l.min);re.minabs=Tt(l.minabs);re.maxabs=Tt(l.maxabs);re.clampMin=Tt(l.clampMin);re.clampMax=Tt(l.clampMax);re.logarithm=ie.log;class d extends re{invert(t){return this.internalInvert&&this.hasVariable()?this.internalInvert.call(this,t,...this.inputs):this.inputs.length===1&&this.hasVariable()?t:(console.error("Cannot invert non-invertible formula"),0)}evaluateIntegral(t){return this.isIntegrable()?this.getIntegralFormula().evaluate(t):(console.error("Cannot evaluate integral of formula without integral"),0)}invertIntegral(t){return!this.isIntegrable()||!this.getIntegralFormula().isInvertible()?(console.error("Cannot invert integral of formula without invertible integral"),0):this.getIntegralFormula().invert(t)}calculateConstantOfIntegration(){const t=this.getIntegralFormula().evaluate(1),n=l.add(this.evaluate(0),this.evaluate(1)).div(2);return l.sub(n,t)}getIntegralFormula(t){if(this.integralFormula!=null&&t==null)return this.integralFormula;if(t==null){if(this.applySubstitution==null){if(t=[],this.internalIntegrate==null)return console.error("Cannot integrate formula with non-integrable operation"),d.constant(0);let n=this.internalIntegrate.call(this,t,...this.inputs);t.forEach(r=>n=r(n)),this.integralFormula=n}else if(this.internalIntegrate)this.integralFormula=this.internalIntegrate.call(this,void 0,...this.inputs);else if(this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable())this.integralFormula=this;else return console.error("Cannot integrate formula without variable"),d.constant(0);return this.integralFormula}else return this.applySubstitution==null?(console.error("Cannot have two complex operations in an integrable formula"),d.constant(0)):(t.push(n=>this.applySubstitution.call(this,n,...this.inputs)),this.internalIntegrateInner?this.internalIntegrateInner.call(this,t,...this.inputs):this.internalIntegrate?this.internalIntegrate.call(this,t,...this.inputs):this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable()?this:(console.error("Cannot integrate formula without variable"),d.constant(0)))}}function Ja(e,t,n=!0,r,i=l.dInf){const s=et(n),a=et(r),u=et(i);return O(()=>{var w,C,y,N;const c=o(u);if(l.eq(c,1))return l.gte(t.value,e.evaluate())?l.dOne:l.dZero;const f=o(s),h=(w=o(a))!=null?w:f?10:0;let m=0;if(l.gt(c,h)){if(!e.isInvertible())return console.error("Cannot calculate max affordable of non-invertible formula with more maxBulkAmount than directSum"),0;if(f){if(!e.isIntegralInvertible())return console.error("Cannot calculate max affordable of formula with non-invertible integral"),0;m=l.floor(e.invertIntegral(l.add(t.value,e.evaluateIntegral()))).sub((C=o(e.innermostVariable))!=null?C:0)}else m=l.floor(e.invert(t.value))}if(m=l.clampMax(m,c),h>0){const T=m;m=l.sub(m,h).clampMin(0);let S;for(f?S=Yt(e,m,!0,0):S=e.evaluate(l.add((y=o(e.innermostVariable))!=null?y:0,m));l.lt(m,c)&&l.lt(m,Number.MAX_SAFE_INTEGER)&&l.add(T,1).gte(m);){const $=e.evaluate(m.add((N=o(e.innermostVariable))!=null?N:0));if(l.add(S,$).lte(t.value))m=m.add(1),S=l.add(S,$);else break}}return m})}function Yt(e,t,n=!0,r){var c;if(l.eq(t,1))return e.evaluate();const i=(c=o(e.innermostVariable))!=null?c:0;let s=l.add(t,i);const a=s;r!=null||(r=n?10:0),s=s.sub(r).clampMin(i);let u=0;if(l.gt(t,r)){if(!e.isInvertible())return console.error("Cannot calculate cost with indirect sum of non-invertible formula"),0;if(n){if(!e.isIntegrable())return console.error("Cannot calculate cost with cumulative cost of non-integrable formula"),0;if(u=l.sub(e.evaluateIntegral(s),e.evaluateIntegral()),a.gt(1e308))return l.add(u,l.sub(a,s).times(e.evaluate(s)))}else if(u=e.evaluate(s),s=s.add(1),a.gt(1e308))return l.sub(a,s).add(1).times(u)}for(let f=s.toNumber();f<a.toNumber();f++)u=l.add(u,e.evaluate(f));return u}const dt=Symbol("PersistentState"),gt=Symbol("DefaultValue"),Zt=Symbol("StackTrace"),dn=Symbol("Deleted"),Ue=Symbol("NonPersistent"),ht=Symbol("SaveDataPath"),Lt=Symbol("SkipPersistence");function Ka(){var e,t;return(t=(e=new Error().stack)==null?void 0:e.split(`
`).slice(3,5).map(n=>n.trim()).join(`
`))!=null?t:""}function Un(e,t){var n;l.isNaN(t)&&(te.hasNaN||(D.autosave=!1,te.hasNaN=!0,te.NaNPath=e[ht],te.NaNPersistent=e),console.error(`Attempted to save NaN value to ${(n=e[ht])==null?void 0:n.join(".")}`)),e[dt].value=t}function He(e,t=!0){const n=ue(e)?e:E(e);ue(e)&&(e=e.value);const r=O({get(){return n.value},set(s){t?Un(i,s):i[dt].value=s}});r[gt]=e;const i={get value(){return n.value},set value(s){t?Un(i,s):i[dt].value=s},__v_isRef:!0,[dt]:n,[gt]:e,[Zt]:Ka(),[dn]:!1,[Ue]:r,[ht]:void 0};return xe.length===0?console.warn("Creating a persistent ref outside of a layer. This is not officially supported",i,`
Created at:
`+i[Zt]):Ct[xe[xe.length-1]].add(i),i}function Za(e){return e!=null&&typeof e=="object"&&dt in e}function ye(e){return!(lt in e)&&Ue in e?e[Ue]:new Proxy(e,{get(t,n){if(n!==dt)return n===Lt?!0:t[n]},set(t,n,r){return t[n]=r,!0},has(t,n){return n===dt?!1:n===Lt?!0:Reflect.has(t,n)}})}me.on("addLayer",(e,t)=>{const n=[],r=(i,s=[])=>{let a=!1;return Object.keys(i).forEach(u=>{let c=i[u];if(c!=null&&typeof c=="object"){if(c[Lt]===!0)return;if(lt in c&&(c=c[lt]),Za(c)){if(a=!0,c[dn]){console.warn("Deleted persistent ref present in returned object. Ignoring...",c,`
Created at:
`+c[Zt]);return}Ct[e.id].delete(c);const f=[e.id,...s,u];c[ht]!=null&&JSON.stringify(f)!==JSON.stringify(c[ht])&&console.error(`Persistent ref is being saved to \`${f.join(".")}\` when it's already present at \`${c[ht].join(".")}\`.`,"This can cause unexpected behavior when loading saves between updates."),c[ht]=f;const h=s.reduce((w,C)=>(C in w||(w[C]={}),w[C]),t),m=h[u];h[u]=c[dt],Vr(h)?m!=null?h[u]=m:h[u]=c[gt]:m!=null?h[u].value=m:h[u].value=c[gt]}else!(c instanceof l)&&!(c instanceof d)&&!ue(c)&&!n.includes(c)&&(typeof c.type=="symbol"&&n.push(c),r(c,[...s,u])&&(nt(c)&&!nt(i)?console.warn("Found array that contains persistent values when adding layer. Keep in mind changing the order of elements in the array will mess with existing player saves.",lt in i?i[lt]:i,u):a=!0))}}),a};r(e[lt]),Ct[e.id].forEach(i=>{i[dn]||console.error(`Created persistent ref in ${e.id} without registering it to the layer!`,`Make sure to include everything persistent in the returned object.

Created at:
`+i[Zt])}),Ct[e.id].clear()});const vn=Symbol("RegisterNode"),bn=Symbol("UnregisterNode"),yn=Symbol("Nodes"),_n=Symbol("Bounds"),he=Xt({});window.layers=he;const Ct={},xe=[];function tn(e,t){return pe(()=>{const n={},r=n.emitter=Jn();if(n.on=r.on.bind(r),n.emit=r.emit.bind(r),n.nodes=E({}),n.id=e,xe.push(e),Ct[e]=new Set,n.minimized=He(!1,!1),Object.assign(n,t.call(n,n)),xe[xe.length-1]==null||xe[xe.length-1]!==e)throw new Error(`Adding layers stack in invalid state. This should not happen
Stack: ${xe}
Trying to pop ${n.id}`);xe.pop(),M(n,"color"),M(n,"display"),M(n,"classes"),M(n,"style"),M(n,"name"),Q(n,"name",n.id),M(n,"minWidth"),Q(n,"minWidth",600),M(n,"minimizable"),Q(n,"minimizable",!0),M(n,"minimizedDisplay");const i=n.style;return n.style=O(()=>{var a,u;let s=o(n.minWidth);return(typeof s=="number"||!Number.isNaN(parseInt(s)))&&(s=s+"px"),[(a=o(i))!=null?a:"",(u=n.minimized)!=null&&u.value?{flexGrow:"0",flexShrink:"0",width:"60px",minWidth:"",flexBasis:"",margin:"0"}:{flexGrow:"",flexShrink:"",width:"",minWidth:s,flexBasis:s,margin:""}]}),n})}function lr(e,t){if(console.info("Adding layer",e.id),he[e.id]){console.error("Attempted to add layer with same ID as existing layer",e.id,he[e.id]);return}Q(t,"layers",{}),t.layers[e.id]==null&&(t.layers[e.id]={}),he[e.id]=e,me.emit("addLayer",e,t.layers[e.id])}function Xa(e){return he[e]}function ur(e){console.info("Removing layer",e.id),me.emit("removeLayer",e),he[e.id]=void 0}function Qa(e){ur(e),lr(e,D)}function eo(e){const t=E(!1);return{openModal:()=>t.value=!0,modal:Z(()=>p(st,{modelValue:t.value,"onUpdate:modelValue":n=>t.value=n},{header:()=>p("h2",null,[o(e.name)]),body:o(e.display)}))}}me.on("update",function(t){Object.values(he).forEach(n=>{n==null||n.emit("preUpdate",t)}),Object.values(he).forEach(n=>{n==null||n.emit("update",t)}),Object.values(he).forEach(n=>{n==null||n.emit("postUpdate",t)})});var to=Object.freeze(Object.defineProperty({__proto__:null,RegisterNodeInjectionKey:vn,UnregisterNodeInjectionKey:bn,NodesInjectionKey:yn,BoundsInjectionKey:_n,layers:he,persistentRefs:Ct,addingLayers:xe,createLayer:tn,addLayer:lr,getLayer:Xa,removeLayer:ur,reloadLayer:Qa,setupLayerModal:eo},Symbol.toStringTag,{value:"Module"}));const no=A({__name:"Context",emits:["updateNodes"],setup(e,{emit:t}){var h;const n=E({}),r=new ResizeObserver(u),i=E(null);Bt(()=>{const m=i.value;m!=null&&r.observe(m)});let s=!0,a=E((h=i.value)==null?void 0:h.getBoundingClientRect());function u(){s&&(s=!1,bt(()=>{var m;a.value=(m=i.value)==null?void 0:m.getBoundingClientRect(),Object.values(n.value).filter(w=>w).forEach(w=>w.rect=w.element.getBoundingClientRect()),t("updateNodes",n.value),s=!0}))}me.on("fontsLoaded",u);const c={attributes:!1,childList:!0,subtree:!1};zt(vn,(m,w)=>{const C=new MutationObserver(()=>f(m));C.observe(w,c),n.value[m]={element:w,observer:C,rect:w.getBoundingClientRect()},u()}),zt(bn,m=>{var w;(w=n.value[m])==null||w.observer.disconnect(),n.value[m]=void 0,u()}),zt(yn,n),zt(_n,a);function f(m){const w=n.value[m];w!=null&&(w.rect=w.element.getBoundingClientRect(),t("updateNodes",n.value))}return(m,w)=>(b(),k(j,null,[Qe(m.$slots,"default",{},void 0,!0),g("div",{ref_key:"resizeListener",ref:i,class:"resize-listener"},null,512)],64))}});var cr=G(no,[["__scopeId","data-v-2b1dc1bc"]]);const ro=["onPointerdown"],io={class:"modal-wrapper"},so=["width"],ao={class:"modal-header"},oo={class:"modal-body"},lo={class:"modal-footer"},uo=g("div",{class:"modal-default-flex-grow"},null,-1),st=A({__name:"Modal",props:{modelValue:{type:Boolean},preventClosing:{type:Boolean},width:null},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const i=de(e),s=O(()=>o(i.modelValue)||u.value);function a(){o(i.preventClosing)!==!0&&n("update:modelValue",!1)}const u=E(!1),c=E(null),f=O(()=>{var h,m;return(m=(h=c.value)==null?void 0:h.nodes)!=null?m:null});return t({isOpen:s,nodes:f}),(h,m)=>(b(),R(Dr,{to:"#modal-root"},[p(Wn,{name:"modal",onBeforeEnter:m[0]||(m[0]=w=>u.value=!0),onAfterLeave:m[1]||(m[1]=w=>u.value=!1),appear:""},{default:q(()=>[gn(g("div",ze({class:"modal-mask",onPointerdown:Et(a,["self"])},h.$attrs),[g("div",io,[g("div",{class:"modal-container",width:e.width},[g("div",ao,[Qe(h.$slots,"header",{shown:o(s)},()=>[P(" default header ")])]),g("div",oo,[p(cr,{ref_key:"contextRef",ref:c},{default:q(()=>[Qe(h.$slots,"body",{shown:o(s)},()=>[P(" default body ")])]),_:3},512)]),g("div",lo,[Qe(h.$slots,"footer",{shown:o(s)},()=>[g("div",{class:"modal-default-footer"},[uo,g("button",{class:"button modal-default-button",onClick:a}," Close ")])])])],8,so)])],16,ro),[[Er,e.modelValue]])]),_:3})]))}});const nn=e=>(De("data-v-3da88bf8"),e=e(),qe(),e),co=nn(()=>g("div",{class:"vga-modal-header"},[g("h2",null,"Kindly consider taking a break.")],-1)),fo=nn(()=>g("p",null," You've been actively enjoying this game for awhile recently - and it's great that you've been having a good time! That said, there are dangers to games like these that you should be aware of: ",-1)),go=nn(()=>g("p",null," While incremental games can be fun and even healthy in certain contexts, they can exacerbate video game addiction even more than other genres. If you feel like playing incremental games is taking priority over other things in your life, or manipulating your sleep schedule, it may be prudent to seek help. ",-1)),mo=nn(()=>g("p",null,[g("h4",null,"Resources:"),g("span",null,[g("a",{style:{display:"inline"},href:"https://www.samhsa.gov/",target:"_blank"}," SAMHSA "),P(" ("),g("a",{style:{display:"inline"},href:"tel:1-800-662-4357"},"1-800-662-HELP"),P(") ")]),g("br"),g("a",{href:"https://www.reddit.com/r/StopGaming/"},"r/StopGaming")],-1)),po={class:"vga-footer"},ho=A({__name:"AddictionWarning",setup(e){const t=E(!1);je(()=>{z.disableHealthWarning===!1&&Y.showHealthWarning&&te.mouseActivity.filter(r=>r).length>6&&(t.value=!0)});function n(){Y.showHealthWarning=!1,t.value=!1}return(r,i)=>{const s=we("SavesManager");return b(),k(j,null,[p(st,ze({modelValue:t.value,"onUpdate:modelValue":i[1]||(i[1]=a=>t.value=a)},r.$attrs),{header:q(()=>[co]),body:q(()=>[fo,go,mo]),footer:q(()=>[g("div",po,[g("button",{onClick:n,class:"button"},"Never show this again"),g("button",{onClick:i[0]||(i[0]=a=>t.value=!1),class:"button"},"Close")])]),_:1},16,["modelValue"]),p(s,{ref:"savesManager"},null,512)],64)}}});var vo=G(ho,[["__scopeId","data-v-3da88bf8"]]);const ke=E(),Le=E([]),Pt=E([]);function bo(){var e;((e=ke.value)==null?void 0:e.loggedIn)===!0&&(Le.value.length>0||ke.value.getSaveList().then(dr).then(t=>{Pt.value=t.map(n=>n.content.id)}).catch(console.error))}jr({supportsSaving:!0,supportsSaveManager:!0,onLoggedInChanged:jn}).then(e=>{ke.value=e,jn(e)}).catch(console.error);function jn(e){e.loggedIn===!0&&(Le.value.length>0||(e.getSaveList().then(t=>{const n=dr(t);if(Pt.value=n.map(r=>r.content.id),D.timePlayed<120*1e3&&n.length>0){const r=n.reduce((i,s)=>i.content.time<s.content.time?s:i);Xe(r.content)}}).catch(console.error),setInterval(bo,60*1e3)))}function dr(e){const t=new Set(Y.saves.slice()),n=new Set(new Array(11).fill(0).map((i,s)=>s)),r=Object.keys(e).map(i=>{var u;const{label:s,content:a}=e[i];try{return{slot:parseInt(i),label:s,content:JSON.parse((u=ct(a))!=null?u:"")}}catch{return null}}).filter(i=>i!=null&&typeof i.content.id=="string"&&typeof i.content.time=="number"&&typeof i.content.timePlayed=="number").filter(i=>{var a,u,c,f,h,m;i.label!=null&&(i.content.name=i.label),n.delete(i.slot);const s=Y.saves.find(w=>w===i.content.id);if(s==null)Y.saves.push(i.content.id),ge(Ze(i.content));else{t.delete(s);try{const w=JSON.parse((u=ct((a=localStorage.getItem(s))!=null?a:""))!=null?u:"");if(w==null)return!1;w.id=s,w.time=(c=w.time)!=null?c:0,w.timePlayed=(f=w.timePlayed)!=null?f:0;const C=Math.abs(w.timePlayed-i.content.timePlayed),y=Math.abs(w.time-i.content.time);C<120*1e3&&y<120*1e3?w.time<i.content.time?(ge(Ze(i.content)),Y.active===s&&Xe(i.content)):((m=ke.value)==null||m.save(i.slot,ft.compressToUTF16(St(Ze(w))),(h=w.name)!=null?h:i.label).catch(console.error),i.content=w):Le.value.push({id:s,cloud:i.content,local:w,slot:i.slot})}catch{return!1}}return!0});return t.forEach(i=>{var s,a,u;try{if(n.size>0){const c=(s=localStorage.getItem(i))!=null?s:"",f=JSON.parse((a=ct(c))!=null?a:""),h=n.values().next().value;(u=ke.value)==null||u.save(h,c,f.name).then(()=>Pt.value.push(f.id)).catch(console.error),n.delete(h)}}catch{}}),r}const yo={class:"table"},_o=A({__name:"Row",setup(e){const t=O(()=>Ut[Y.theme].mergeAdjacent);return(n,r)=>(b(),k("div",yo,[g("div",{class:X(["row",{mergeAdjacent:o(t)}])},[Qe(n.$slots,"default")],2)]))}});function wo(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!qr(e)}function ee(e,t="span"){return typeof e=="function"?A({render:e}):typeof e=="string"?e.length>0?(e=e.trim(),e.charAt(0)!=="<"&&(e=`<${t}>${e}</${t}>`),A({template:e})):A({render:()=>({})}):e}function Ee(e){if(tt(e))return typeof e=="function"?e():ee(e);const t=e[_e];return p(t,e[Me](),null)}function wn(...e){let t;return p(_o,null,wo(t=e.map(Ee))?t:{default:()=>[t]})}function kt(e){if(tt(e))return typeof e=="function"?e():typeof e=="string"?p(j,null,[e]):p(e,null,null);const t=e[_e];return p(t,e[Me](),null)}function zn(e,t){return e.reduce((n,r)=>p(j,null,[n,t,r]))}function tt(e){return typeof e=="string"?!0:typeof e=="object"?e==null?!1:"render"in e||"component"in e:typeof e=="function"&&e[Rt]===!0}function fr(e,t){const n=E(null),r=E(void 0);function i(u){n.value||(n.value=setInterval(a,250)),r.value=u}function s(){n.value&&(clearInterval(n.value),n.value=null)}function a(){t&&t.value?t.value():e&&e.value&&e.value(r.value)}return Yn(s),{start:i,stop:s,handleHolding:a}}function Nn(e,t="div"){const n=Se();return je(()=>{n.value=ee(ce(e),t)}),n}function _t(e,t="div"){const n=Se(null);return je(()=>{const r=ce(e);n.value=r===""||r==null?null:ee(r,t)}),n}function ce(e){return o(o(e))}function x(...e){return e.includes(Object)||e.push(Object),e}function No(e){return Object.keys(e).reduce((t,n)=>(t[_s(n)]=e[n],t),{})}var Co=A({props:{element:Object,display:{type:x(Object,String,Function),required:!0},style:x(Object,String,Array),classes:x(Object),direction:x(String),xoffset:x(String),yoffset:x(String),pinned:Object},setup(e){const{element:t,display:n,pinned:r}=de(e),i=E(!1),s=O(()=>(ce(r)||i.value)&&a.value),a=_t(n),u=Se(ee(Z(()=>{const h=ce(t);return h==null?"":kt(h)})));function c(h){const m=r;h.shiftKey&&m&&(m.value=!m.value,h.stopPropagation(),h.preventDefault())}const f=O(()=>ce(r)&&Ut[Y.theme].showPin);return{Direction:W,isHovered:i,isShown:s,comp:a,elementComp:u,unref:o,togglePinned:c,showPin:f}}});const ko={key:0,class:"material-icons pinned"};function So(e,t,n,r,i,s){return b(),k("div",{class:X(["tooltip-container",{shown:e.isShown}]),onMouseenter:t[0]||(t[0]=a=>e.isHovered=!0),onMouseleave:t[1]||(t[1]=a=>e.isHovered=!1),onClickCapture:t[2]||(t[2]=(...a)=>e.togglePinned&&e.togglePinned(...a))},[Qe(e.$slots,"default",{},void 0,!0),e.elementComp?(b(),R(ae(e.elementComp),{key:0})):F("",!0),p(Wn,{name:"fade"},{default:q(()=>{var a;return[e.isShown?(b(),k("div",{key:0,class:X(["tooltip",{top:e.unref(e.direction)===e.Direction.Up,left:e.unref(e.direction)===e.Direction.Left,right:e.unref(e.direction)===e.Direction.Right,bottom:e.unref(e.direction)===e.Direction.Down,...e.unref(e.classes)}]),style:se([{"--xoffset":e.unref(e.xoffset)||"0px","--yoffset":e.unref(e.yoffset)||"0px"},(a=e.unref(e.style))!=null?a:{}])},[e.showPin?(b(),k("span",ko,"push_pin")):F("",!0),e.comp?(b(),R(ae(e.comp),{key:1})):F("",!0)],6)):F("",!0)]}),_:1})],34)}var le=G(Co,[["render",So],["__scopeId","data-v-6102fa3a"]]);const Io={key:0},Mo=["onClick","disabled"],$o={key:0},To=["onClick"],Po=A({__name:"DangerButton",props:{disabled:{type:Boolean},skipConfirm:{type:Boolean}},emits:["click","confirmingChanged"],setup(e,{emit:t}){const r=de(e),i=E(!1);$e(i,u=>{t("confirmingChanged",u)});function s(){if(o(r.skipConfirm)){t("click");return}i.value&&t("click"),i.value=!i.value}function a(){i.value=!1}return(u,c)=>(b(),k("span",{class:X(["container",{confirming:i.value}])},[i.value?(b(),k("span",Io,"Are you sure?")):F("",!0),g("button",{onClick:Et(s,["stop"]),class:"button danger",disabled:e.disabled},[i.value?(b(),k("span",$o,"Yes")):Qe(u.$slots,"default",{key:1},void 0,!0)],8,Mo),i.value?(b(),k("button",{key:1,class:"button",onClick:Et(a,["stop"])},"No",8,To)):F("",!0)],2))}});var Oo=G(Po,[["__scopeId","data-v-2f8ef34c"]]);const Fo=["onSubmit"],xo={class:"field"},Vo={key:0,class:"field-title"},Eo=["placeholder"],Do=A({__name:"Text",props:{title:null,modelValue:null,textArea:{type:Boolean},placeholder:null,maxHeight:null,submitOnBlur:{type:Boolean}},emits:["update:modelValue","submit","cancel"],setup(e,{emit:t}){const n=e,r=_t(rt(n,"title"),"span"),i=Se(null);Bt(()=>{var c;(c=i.value)==null||c.focus()});const s=O({get(){var c;return(c=o(n.modelValue))!=null?c:""},set(c){t("update:modelValue",c)}});function a(){t("submit")}function u(){n.submitOnBlur!==!1?t("submit"):t("cancel")}return(c,f)=>(b(),k("form",{onSubmit:Et(a,["prevent"])},[g("div",xo,[o(r)?(b(),k("span",Vo,[(b(),R(ae(o(r))))])):F("",!0),e.textArea?(b(),R(o(zr),{key:1,modelValue:o(s),"onUpdate:modelValue":f[0]||(f[0]=h=>ue(s)?s.value=h:null),placeholder:e.placeholder,maxHeight:e.maxHeight,onBlur:u,ref_key:"field",ref:i},null,8,["modelValue","placeholder","maxHeight"])):gn((b(),k("input",{key:2,type:"text","onUpdate:modelValue":f[1]||(f[1]=h=>ue(s)?s.value=h:null),placeholder:e.placeholder,class:X({fullWidth:!e.title}),onBlur:u,ref_key:"field",ref:i},null,42,Eo)),[[Rr,o(s)]])])],40,Fo))}});var gr=G(Do,[["__scopeId","data-v-90bd4994"]]);const at=e=>(De("data-v-d1147dc6"),e=e(),qe(),e),qo={key:0,class:"handle material-icons"},Ro={key:1,class:"actions"},Lo=at(()=>g("span",{class:"material-icons"},"content_paste",-1)),Ao=at(()=>g("span",{class:"material-icons"},"content_copy",-1)),Bo=at(()=>g("span",{class:"material-icons"},"edit",-1)),Uo=at(()=>g("span",{class:"material-icons",style:{margin:"-2px"}},"delete",-1)),jo={key:2,class:"actions"},zo=at(()=>g("span",{class:"material-icons"},"check",-1)),Go=at(()=>g("span",{class:"material-icons"},"close",-1)),Ho={key:3,class:"details"},Wo=at(()=>g("span",{class:"material-icons synced"},"cloud",-1)),Yo=["disabled"],Jo={class:"save-version"},Ko=at(()=>g("br",null,null,-1)),Zo={key:1,class:"time"},Xo={key:4,class:"details"},Qo={key:5,class:"details error"},el=at(()=>g("br",null,null,-1)),tl=A({__name:"Save",props:{save:null,readonly:{type:Boolean}},emits:["export","open","duplicate","delete","editName"],setup(e,{emit:t}){const n=e,{save:r,readonly:i}=de(n),s=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),a=E(!1),u=E(!1),c=E("");$e(a,()=>{var C;return c.value=(C=r.value.name)!=null?C:""});const f=O(()=>r.value!=null&&r.value.id===D.id&&!o(i)),h=O(()=>{var C;return f.value?D.time:(C=r.value!=null&&r.value.time)!=null?C:0}),m=O(()=>{var C;return!o(i)&&((C=ke.value)==null?void 0:C.loggedIn)===!0&&Pt.value.includes(r.value.id)});function w(){t("editName",c.value),a.value=!1}return(C,y)=>(b(),k("div",{class:X(["save",{active:o(f),readonly:o(i)}])},[o(i)!==!0?(b(),k("div",qo,"drag_handle")):F("",!0),!a.value&&o(i)!==!0?(b(),k("div",Ro,[o(r).error==null&&!u.value?(b(),R(mn,{key:0,onClick:y[0]||(y[0]=N=>t("export")),class:"button",left:""},{default:q(()=>[p(le,{display:"Export",direction:o(W).Left,class:"info"},{default:q(()=>[Lo]),_:1},8,["direction"])]),_:1})):F("",!0),o(r).error==null&&!u.value?(b(),k("button",{key:1,onClick:y[1]||(y[1]=N=>t("duplicate")),class:"button"},[p(le,{display:"Duplicate",direction:o(W).Left,class:"info"},{default:q(()=>[Ao]),_:1},8,["direction"])])):F("",!0),o(r).error==null&&!u.value?(b(),k("button",{key:2,onClick:y[2]||(y[2]=N=>a.value=!a.value),class:"button"},[p(le,{display:"Edit Name",direction:o(W).Left,class:"info"},{default:q(()=>[Bo]),_:1},8,["direction"])])):F("",!0),p(Oo,{disabled:o(f),onClick:y[3]||(y[3]=N=>t("delete")),onConfirmingChanged:y[4]||(y[4]=N=>u.value=N)},{default:q(()=>[p(le,{display:"Delete",direction:o(W).Left,class:"info"},{default:q(()=>[Uo]),_:1},8,["direction"])]),_:1},8,["disabled"])])):o(i)!==!0?(b(),k("div",jo,[g("button",{onClick:w,class:"button"},[p(le,{display:"Save",direction:o(W).Left,class:"info"},{default:q(()=>[zo]),_:1},8,["direction"])]),g("button",{onClick:y[5]||(y[5]=N=>a.value=!a.value),class:"button"},[p(le,{display:"Cancel",direction:o(W).Left,class:"info"},{default:q(()=>[Go]),_:1},8,["direction"])])])):F("",!0),o(r).error==null&&!a.value?(b(),k("div",Ho,[o(m)?(b(),R(le,{key:0,display:"Synced!",direction:o(W).Right},{default:q(()=>[Wo]),_:1},8,["direction"])):F("",!0),g("button",{class:"button open",onClick:y[6]||(y[6]=N=>t("open")),disabled:o(i)},[g("h3",null,L(o(r).name),1)],8,Yo),g("span",Jo,"v"+L(o(r).modVersion),1),Ko,o(h)?(b(),k("div",Zo," Last played "+L(o(s).format(o(h))),1)):F("",!0)])):o(r).error==null&&a.value?(b(),k("div",Xo,[p(gr,{modelValue:c.value,"onUpdate:modelValue":y[7]||(y[7]=N=>c.value=N),class:"editname",onSubmit:w},null,8,["modelValue"])])):(b(),k("div",Qo,[P(" Error: Failed to load save with id "+L(o(r).id),1),el,P(L(o(r).error),1)]))],2))}});var fn=G(tl,[["__scopeId","data-v-d1147dc6"]]);const Cn=e=>(De("data-v-0bf31c81"),e=e(),qe(),e),nl={class:"cloud-saves-modal-header"},rl=Cn(()=>g("br",null,null,-1)),il=["onClick"],sl={key:0,class:"note"},al={key:1,class:"note"},ol=["onClick"],ll={key:0,class:"note"},ul={key:1,class:"note"},cl=["onClick"],dl=Cn(()=>g("h2",null,"Both",-1)),fl=Cn(()=>g("div",{class:"save"},"Keep Both",-1)),gl=[dl,fl],ml=A({__name:"CloudSaveResolver",setup(e){const t=E(!1),n=E([]),r=O(()=>Le.value.length>1?"saves":"save"),i=E(null);$e(()=>Le.value.length>0,f=>{f&&(n.value=Le.value.map(({local:h,cloud:m})=>{var w,C;return((w=h.time)!=null?w:0)<((C=m.time)!=null?C:0)?"cloud":"local"}),t.value=!0)},{immediate:!0}),$e(()=>{var f;return(f=i.value)==null?void 0:f.isOpen},f=>{f===!1&&(Le.value=[])});function s(f){n.value[f]="local"}function a(f){n.value[f]="cloud"}function u(f){n.value[f]="both"}function c(){var f,h;for(let m=0;m<n.value.length;m++){const{slot:w,local:C,cloud:y}=Le.value[m];switch(n.value[m]){case"local":(f=ke.value)==null||f.save(w,ft.compressToUTF16(St(Ze(C))),y.name).catch(console.error);break;case"cloud":ge(Ze(y));break;case"both":const N=Vt();ge({...Ze(y),id:N}),Y.saves.push(N),(h=ke.value)==null||h.save(w,ft.compressToUTF16(St(Ze(C))),y.name).catch(console.error);break}}t.value=!1}return(f,h)=>(b(),R(st,{modelValue:t.value,"onUpdate:modelValue":h[0]||(h[0]=m=>t.value=m),width:"960px",ref_key:"modal",ref:i,"prevent-closing":!0},{header:q(()=>[g("div",nl,[g("h2",null,"Cloud "+L(o(r))+" loaded!",1)])]),body:q(()=>[g("div",null," Upon loading, your cloud "+L(o(r))+" "+L(o(Le).length>1?"appear":"appears")+" to be out of sync with your local "+L(o(r))+". Which "+L(o(r))+" do you want to keep? ",1),rl,(b(!0),k(j,null,We(o(o(Le)),(m,w)=>{var C,y,N,T,S,$,V,J;return b(),k("div",{key:m.id,class:"conflict-container"},[g("div",{onClick:ne=>a(w),class:X({selected:n.value[w]==="cloud"})},[g("h2",null,[P(" Cloud "),((C=m.cloud.time)!=null?C:0)>((y=m.local.time)!=null?y:0)?(b(),k("span",sl,"(more recent)")):F("",!0),((N=m.cloud.timePlayed)!=null?N:0)>((T=m.local.timePlayed)!=null?T:0)?(b(),k("span",al,"(more playtime)")):F("",!0)]),p(fn,{save:m.cloud,readonly:!0},null,8,["save"])],10,il),g("div",{onClick:ne=>s(w),class:X({selected:n.value[w]==="local"})},[g("h2",null,[P(" Local "),((S=m.cloud.time)!=null?S:0)<=(($=m.local.time)!=null?$:0)?(b(),k("span",ll,"(more recent)")):F("",!0),((V=m.cloud.timePlayed)!=null?V:0)<=((J=m.local.timePlayed)!=null?J:0)?(b(),k("span",ul,"(more playtime)")):F("",!0)]),p(fn,{save:m.local,readonly:!0},null,8,["save"])],10,ol),g("div",{onClick:ne=>u(w),class:X({selected:n.value[w]==="both"}),style:{"flex-basis":"30%"}},gl,10,cl)])}),128))]),footer:q(()=>[g("div",{class:"cloud-saves-footer"},[g("button",{onClick:c,class:"button"},"Confirm")])]),_:1},8,["modelValue"]))}});var pl=G(ml,[["__scopeId","data-v-0bf31c81"]]);const mr=e=>(De("data-v-5e2d38ce"),e=e(),qe(),e),hl=mr(()=>g("div",{class:"key"},"Ctrl",-1)),vl=mr(()=>g("div",{class:"key"},"Shift",-1)),bl={class:"key"},yl=A({__name:"Hotkey",props:{hotkey:null},setup(e){const t=e;let n="",r=!1,i=!1,s=!1;return je(()=>{n=t.hotkey.key,r=n.startsWith("ctrl+"),r&&(n=n.slice(5)),i=n.startsWith("shift+"),i&&(n=n.slice(6)),s=n.length==1&&n.toLowerCase()!=n.toUpperCase(),s&&(n=n.toUpperCase())}),(a,u)=>(b(),k(j,null,[o(r)?(b(),k(j,{key:0},[hl,P("+")],64)):F("",!0),o(i)?(b(),k(j,{key:1},[vl,P("+")],64)):F("",!0),g("div",bl,L(o(n)),1)],64))}});var kn=G(yl,[["__scopeId","data-v-5e2d38ce"]]);const _l=A({__name:"Node",props:{id:null},setup(e){const n=de(e),r=Jt(vn,()=>{}),i=Jt(bn,()=>{}),s=Se(null),a=O(()=>s.value&&s.value.parentElement);return $e([a,n.id],([u,c],[f,h])=>{f&&i(o(h)),u&&r(c,u)}),Yn(()=>i(o(n.id))),(u,c)=>(b(),k("div",{class:"node",ref_key:"node",ref:s},null,512))}});var ut=G(_l,[["__scopeId","data-v-a48cb382"]]);const Ye=A({__name:"Spacer",props:{width:{default:"8px"},height:{default:"17px"}},setup(e){return(t,n)=>(b(),k("div",{style:se({width:e.width,height:e.height})},null,4))}});const wl={key:0},Nl={key:0,class:"mark star"},Cl=["src"],kl=A({__name:"MarkNode",props:{mark:{type:[Boolean,String]}},setup(e){return(t,n)=>e.mark?(b(),k("div",wl,[e.mark===!0?(b(),k("div",Nl)):(b(),k("img",{key:1,class:"mark",src:e.mark},null,8,Cl))])):F("",!0)}});var rn=G(kl,[["__scopeId","data-v-2207999f"]]);const Sl=A({props:{progress:{type:x(String,Object,Number),required:!0},width:{type:x(Number),required:!0},height:{type:x(Number),required:!0},direction:{type:x(String),required:!0},display:x(Object,String,Function),visibility:{type:x(Number,Boolean),required:!0},style:x(Object,String,Array),classes:x(Object),borderStyle:x(Object,String,Array),textStyle:x(Object,String,Array),baseStyle:x(Object,String,Array),fillStyle:x(Object,String,Array),mark:x(Boolean,String),id:{type:String,required:!0}},components:{MarkNode:rn,Node:ut},setup(e){const{progress:t,width:n,height:r,direction:i,display:s}=de(e),a=O(()=>{let f=t.value instanceof l?t.value.toNumber():Number(t.value);return(1-Math.min(Math.max(f,0),1))*100}),u=O(()=>{const f={width:ce(n)+.5+"px",height:ce(r)+.5+"px"};switch(o(i)){case W.Up:f.clipPath=`inset(${a.value}% 0% 0% 0%)`,f.width=ce(n)+1+"px";break;case W.Down:f.clipPath=`inset(0% 0% ${a.value}% 0%)`,f.width=ce(n)+1+"px";break;case W.Right:f.clipPath=`inset(0% ${a.value}% 0% 0%)`;break;case W.Left:f.clipPath=`inset(0% 0% 0% ${a.value}%)`;break;case W.Default:f.clipPath="inset(0% 50% 0% 0%)";break}return f}),c=_t(s);return{normalizedProgress:a,barStyle:u,component:c,unref:o,Visibility:fe,isVisible:Ge,isHidden:$t}}});function Il(e,t,n,r,i,s){var c,f,h,m,w,C,y;const a=we("MarkNode"),u=we("Node");return e.isVisible(e.visibility)?(b(),k("div",{key:0,style:se([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px",visibility:e.isHidden(e.visibility)?"hidden":void 0},(c=e.unref(e.style))!=null?c:{}]),class:X({bar:!0,...e.unref(e.classes)})},[g("div",{class:"overlayTextContainer border",style:se([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px"},(f=e.unref(e.borderStyle))!=null?f:{}])},[e.component?(b(),k("span",{key:0,class:"overlayText",style:se(e.unref(e.textStyle))},[(b(),R(ae(e.component)))],4)):F("",!0)],4),g("div",{class:"border",style:se([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px"},(h=e.unref(e.style))!=null?h:{},(m=e.unref(e.baseStyle))!=null?m:{},(w=e.unref(e.borderStyle))!=null?w:{}])},[g("div",{class:"fill",style:se([e.barStyle,(C=e.unref(e.style))!=null?C:{},(y=e.unref(e.fillStyle))!=null?y:{}])},null,4)],4),p(a,{mark:e.unref(e.mark)},null,8,["mark"]),p(u,{id:e.id},null,8,["id"])],6)):F("",!0)}var Ml=G(Sl,[["render",Il],["__scopeId","data-v-10cb85f8"]]);const $l=Symbol("Bar");function pr(e,...t){const n=t.reduce((r,i)=>{var s;return Object.assign(r,(s=i.getPersistentData)==null?void 0:s.call(i))},{});return pe(r=>{var a,u;const i=e.call(r,r);i.id=it("bar-"),i.type=$l,i[_e]=Ml;for(const c of t)(a=c.preConstruct)==null||a.call(c,i);Object.assign(i,n),M(i,"visibility"),Q(i,"visibility",fe.Visible),M(i,"width"),M(i,"height"),M(i,"direction"),M(i,"style"),M(i,"classes"),M(i,"borderStyle"),M(i,"baseStyle"),M(i,"textStyle"),M(i,"fillStyle"),M(i,"progress"),M(i,"display"),M(i,"mark");for(const c of t)(u=c.postConstruct)==null||u.call(c,i);const s=t.reduce((c,f)=>{var h;return Object.assign(c,(h=f.getGatheredProps)==null?void 0:h.call(f,i))},{});return i[Me]=function(){const{progress:c,width:f,height:h,direction:m,display:w,visibility:C,style:y,classes:N,borderStyle:T,textStyle:S,baseStyle:$,fillStyle:V,mark:J,id:ne}=this;return{progress:c,width:f,height:h,direction:m,display:w,visibility:C,style:o(y),classes:N,borderStyle:T,textStyle:S,baseStyle:$,fillStyle:V,mark:J,id:ne,...s}},i})}var Tl=A({props:{display:{type:x(Object,String,Function),required:!0},visibility:{type:x(Number,Boolean),required:!0},style:x(Object,String,Array),classes:x(Object),onClick:Function,onHold:Function,canClick:{type:x(Boolean),required:!0},small:Boolean,mark:x(Boolean,String),id:{type:String,required:!0}},components:{Node:ut,MarkNode:rn},setup(e){const{display:t,onClick:n,onHold:r}=de(e),i=Se("");je(()=>{var h;const u=ce(t);if(u==null){i.value="";return}if(tt(u)){i.value=ee(u);return}const c=ee((h=u.title)!=null?h:"","h3"),f=ee(u.description,"div");i.value=ee(Z(()=>p("span",null,[u.title!=null?p("div",null,[p(c,null,null)]):null,p(f,null,null)])))});const{start:s,stop:a}=fr(n,r);return{start:s,stop:a,comp:i,Visibility:fe,isVisible:Ge,isHidden:$t,unref:o}}});function Pl(e,t,n,r,i,s){var c;const a=we("MarkNode"),u=we("Node");return e.isVisible(e.visibility)?(b(),k("button",{key:0,style:se([{visibility:e.isHidden(e.visibility)?"hidden":void 0},(c=e.unref(e.style))!=null?c:[]]),onClick:t[0]||(t[0]=(...f)=>e.onClick&&e.onClick(...f)),onMousedown:t[1]||(t[1]=(...f)=>e.start&&e.start(...f)),onMouseleave:t[2]||(t[2]=(...f)=>e.stop&&e.stop(...f)),onMouseup:t[3]||(t[3]=(...f)=>e.stop&&e.stop(...f)),onTouchstartPassive:t[4]||(t[4]=(...f)=>e.start&&e.start(...f)),onTouchendPassive:t[5]||(t[5]=(...f)=>e.stop&&e.stop(...f)),onTouchcancelPassive:t[6]||(t[6]=(...f)=>e.stop&&e.stop(...f)),class:X({feature:!0,clickable:!0,can:e.unref(e.canClick),locked:!e.unref(e.canClick),small:e.small,...e.unref(e.classes)})},[e.unref(e.comp)?(b(),R(ae(e.unref(e.comp)),{key:0})):F("",!0),p(a,{mark:e.unref(e.mark)},null,8,["mark"]),p(u,{id:e.id},null,8,["id"])],38)):F("",!0)}var hr=G(Tl,[["render",Pl],["__scopeId","data-v-211328c0"]]);const Ol=Symbol("Clickable");function Sn(e,...t){const n=t.reduce((r,i)=>{var s;return Object.assign(r,(s=i.getPersistentData)==null?void 0:s.call(i))},{});return pe(r=>{var a,u,c;const i=(a=e==null?void 0:e.call(r,r))!=null?a:{};i.id=it("clickable-"),i.type=Ol,i[_e]=hr;for(const f of t)(u=f.preConstruct)==null||u.call(f,i);if(Object.assign(i,n),M(i,"visibility"),Q(i,"visibility",fe.Visible),M(i,"canClick"),Q(i,"canClick",!0),M(i,"classes"),M(i,"style"),M(i,"mark"),M(i,"display"),i.onClick){const f=i.onClick.bind(i);i.onClick=function(h){o(i.canClick)!==!1&&f(h)}}if(i.onHold){const f=i.onHold.bind(i);i.onHold=function(){o(i.canClick)!==!1&&f()}}for(const f of t)(c=f.postConstruct)==null||c.call(f,i);const s=t.reduce((f,h)=>{var m;return Object.assign(f,(m=h.getGatheredProps)==null?void 0:m.call(h,i))},{});return i[Me]=function(){const{display:f,visibility:h,style:m,classes:w,onClick:C,onHold:y,canClick:N,small:T,mark:S,id:$}=this;return{display:f,visibility:h,style:o(m),classes:w,onClick:C,onHold:y,canClick:N,small:T,mark:S,id:$,...s}},i})}const At=Xt({}),In=Symbol("Hotkey"),Ft=[")","!","@","#","$","%","^","&","*","("];function Mn(e){return pe(t=>{const n=e.call(t,t);return n.type=In,M(n,"enabled"),Q(n,"enabled",!0),M(n,"description"),n})}me.on("addLayer",e=>{ar(e,In).forEach(t=>{At[t.key]=t})});me.on("removeLayer",e=>{ar(e,In).forEach(t=>{At[t.key]=void 0})});document.onkeydown=function(e){var r,i;if(((r=e.target)==null?void 0:r.tagName)==="INPUT"||On.value&&!D.keepGoing)return;const t=[e.key];e.shiftKey&&e.ctrlKey?(t.splice(0,1),t.push("ctrl+shift+"+e.key.toUpperCase()),t.push("shift+ctrl+"+e.key.toUpperCase()),Ft.includes(e.key)?(t.push("ctrl+shift+"+Ft.indexOf(e.key)),t.push("shift+ctrl+"+Ft.indexOf(e.key))):(t.push("ctrl+shift+"+e.key.toLowerCase()),t.push("shift+ctrl+"+e.key.toLowerCase()))):Ft.includes(e.key)?(t.push("shift+"+e.key),t.push("shift+"+Ft.indexOf(e.key))):e.shiftKey?(t.push("shift+"+e.key.toUpperCase()),t.push("shift+"+e.key.toLowerCase())):e.ctrlKey&&(t.splice(0,1),t.push("ctrl+"+e.key));const n=At[(i=t.find(s=>s in At))!=null?i:""];n&&o(n.enabled)&&(e.preventDefault(),n.onPress())};Gi(Z(()=>{const e=Object.values(At).filter(t=>o(t==null?void 0:t.enabled));return e.length===0?"":p("div",null,[p("br",null,null),p("h4",null,[P("Hotkeys")]),p("div",{style:"column-count: 2"},[e.map(t=>p("div",null,[p(kn,{hotkey:t},null),P(" "),o(t==null?void 0:t.description)]))])])}));function $n(e,t="points",n=0,r=void 0){const i=ue(e)?e:He(e);if(i.displayName=t,i.precision=n,i.small=r,!ue(e)){const s=i[Ue];s.displayName=t,s.precision=n,s.small=r}return i}function Fl(e){const t=He(e.value);return $e(e,n=>{hn.value||l.gt(n,t.value)&&(t.value=n)}),t}function vr(e){const t=He(e.value);return $e(e,(n,r)=>{hn.value||l.gt(n,r)&&(t.value=l.add(t.value,l.sub(n,r)))}),t}const xl=new l("10^^8"),Vl=new l("1e100");function El(e,t){const n=E(0),r=E(0),i=E(0);return me.on("update",a=>{if(r.value=0,l.lte(e.value,Vl)){i.value=e.value;return}let u=e.value,c=i.value;if(i.value=u,l.gt(u,c))if(l.gte(u,xl))u=l.slog(u,1e10),c=l.slog(c,1e10),n.value=u.sub(c).div(a),r.value=-1;else for(;l.div(u,c).log(10).div(a).gte("100")&&r.value<=5&&l.gt(c,0);)u=l.log10(u),c=l.log10(c),n.value=u.sub(c).div(a),r.value++}),O(()=>r.value===0?t?Ie(t.value,e.precision,e.small)+" "+e.displayName+"/s":"":Ie(n.value)+" OOM"+(r.value<0?"^OOM":"^"+r.value)+"s/sec")}function It(e,t){const n=t!=null?t:e.value;return l.eq(e.precision,0)?yt(e.small?n:l.floor(n)):Ie(n,e.precision,e.small)}const Dl=["x1","y1","x2","y2"],ql=A({__name:"Link",props:{link:null,startNode:null,endNode:null,boundingRect:null},setup(e){const t=e,n=de(t),r=O(()=>{const a=n.startNode.value.rect,u=n.boundingRect.value,c=u?{x:a.x+a.width/2-u.x,y:a.y+a.height/2-u.y}:{x:0,y:0};return n.link.value.offsetStart&&(c.x+=n.link.value.offsetStart.x,c.y+=n.link.value.offsetStart.y),c}),i=O(()=>{const a=n.endNode.value.rect,u=n.boundingRect.value,c=u?{x:a.x+a.width/2-u.x,y:a.y+a.height/2-u.y}:{x:0,y:0};return n.link.value.offsetEnd&&(c.x+=n.link.value.offsetEnd.x,c.y+=n.link.value.offsetEnd.y),c}),s=O(()=>No(t.link));return(a,u)=>(b(),k("line",ze({"stroke-width":"15px",stroke:"white"},o(s),{x1:o(r).x,y1:o(r).y,x2:o(i).x,y2:o(i).y}),null,16,Dl))}});const Rl=A({__name:"Links",props:{links:null},setup(e){var c;const n=rt(e,"links"),r=E(null),i=Jt(yn,E({})),s=Jt(_n,E(void 0)),a=E((c=r.value)==null?void 0:c.getBoundingClientRect());$e(s,()=>{var f;return a.value=(f=r.value)==null?void 0:f.getBoundingClientRect()}),Bt(()=>{var f;return a.value=(f=r.value)==null?void 0:f.getBoundingClientRect()});const u=O(()=>{var h,m;const f=i.value;return(m=(h=n.value)==null?void 0:h.filter(w=>{var C,y;return((C=f[w.startNode.id])==null?void 0:C.rect)&&((y=f[w.endNode.id])==null?void 0:y.rect)}))!=null?m:[]});return(f,h)=>(b(),k(j,null,[o(u)?(b(),k("svg",Lr(ze({key:0},f.$attrs)),[(b(!0),k(j,null,We(o(u),(m,w)=>(b(),R(ql,{key:w,link:m,boundingRect:a.value,startNode:o(i)[m.startNode.id],endNode:o(i)[m.endNode.id]},null,8,["link","boundingRect","startNode","endNode"]))),128))],16)):F("",!0),g("div",{ref_key:"resizeListener",ref:r,class:"resize-listener"},null,512)],64))}});var Ll=G(Rl,[["__scopeId","data-v-eda31b5c"]]),Al=A({props:{nodes:{type:x(Array),required:!0},leftSideNodes:x(Array),rightSideNodes:x(Array),branches:x(Array)},components:{Links:Ll},setup(e){const{nodes:t,leftSideNodes:n,rightSideNodes:r}=de(e),i=Se();je(()=>{const u=ce(t);i.value=ee(Z(()=>p(j,null,[u.map(c=>p("span",{class:"row tree-row",style:"margin: 50px auto;"},[c.map(kt)]))])))});const s=Se();je(()=>{const u=ce(n);s.value=u?ee(Z(()=>p("span",{class:"left-side-nodes small"},[u.map(kt)]))):""});const a=Se();return je(()=>{const u=ce(r);a.value=u?ee(Z(()=>p("span",{class:"side-nodes small"},[u.map(kt)]))):""}),{unref:o,nodesComp:i,leftNodesComp:s,rightNodesComp:a}}});function Bl(e,t,n,r,i,s){const a=we("Links");return b(),k(j,null,[(b(),R(ae(e.nodesComp))),e.leftNodesComp?(b(),R(ae(e.leftNodesComp),{key:0})):F("",!0),e.rightNodesComp?(b(),R(ae(e.rightNodesComp),{key:1})):F("",!0),e.branches?(b(),R(a,{key:2,links:e.unref(e.branches)},null,8,["links"])):F("",!0)],64)}var Ul=G(Al,[["render",Bl],["__scopeId","data-v-39ca96d0"]]);const jl=A({props:{display:x(Object,String,Function),visibility:{type:x(Number,Boolean),required:!0},style:x(String,Object,Array),classes:x(Object),onClick:Function,onHold:Function,color:x(String),glowColor:x(String),canClick:{type:x(Boolean),required:!0},mark:x(Boolean,String),id:{type:String,required:!0}},components:{MarkNode:rn,Node:ut},setup(e){const{onClick:t,onHold:n,display:r}=de(e),i=_t(r),{start:s,stop:a}=fr(t,n);return{start:s,stop:a,comp:i,unref:o,Visibility:fe,isCoercableComponent:tt,isVisible:Ge,isHidden:$t}}});function zl(e,t,n,r,i,s){var c;const a=we("MarkNode"),u=we("Node");return e.isVisible(e.visibility)?(b(),k("div",{key:0,style:se({visibility:e.isHidden(e.visibility)?"hidden":void 0}),class:X({treeNode:!0,can:e.unref(e.canClick),...e.unref(e.classes)}),onClick:t[0]||(t[0]=(...f)=>e.onClick&&e.onClick(...f)),onMousedown:t[1]||(t[1]=(...f)=>e.start&&e.start(...f)),onMouseleave:t[2]||(t[2]=(...f)=>e.stop&&e.stop(...f)),onMouseup:t[3]||(t[3]=(...f)=>e.stop&&e.stop(...f)),onTouchstartPassive:t[4]||(t[4]=(...f)=>e.start&&e.start(...f)),onTouchendPassive:t[5]||(t[5]=(...f)=>e.stop&&e.stop(...f)),onTouchcancelPassive:t[6]||(t[6]=(...f)=>e.stop&&e.stop(...f))},[g("div",{style:se([{backgroundColor:e.unref(e.color),boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 20px ${e.unref(e.glowColor)}`},(c=e.unref(e.style))!=null?c:[]])},[(b(),R(ae(e.unref(e.comp))))],4),p(a,{mark:e.unref(e.mark)},null,8,["mark"]),p(u,{id:e.id},null,8,["id"])],38)):F("",!0)}var Gl=G(jl,[["render",zl],["__scopeId","data-v-727230a6"]]);const Hl=Symbol("TreeNode"),Wl=Symbol("Tree");function Yl(e,...t){const n=t.reduce((r,i)=>{var s;return Object.assign(r,(s=i.getPersistentData)==null?void 0:s.call(i))},{});return pe(r=>{var a,u,c;const i=(a=e==null?void 0:e.call(r,r))!=null?a:{};i.id=it("treeNode-"),i.type=Hl,i[_e]=Gl;for(const f of t)(u=f.preConstruct)==null||u.call(f,i);Object.assign(n),M(i,"visibility"),Q(i,"visibility",fe.Visible),M(i,"canClick"),Q(i,"canClick",!0),M(i,"color"),M(i,"display"),M(i,"glowColor"),M(i,"classes"),M(i,"style"),M(i,"mark");for(const f of t)(c=f.postConstruct)==null||c.call(f,i);if(i.onClick){const f=i.onClick.bind(i);i.onClick=function(h){o(i.canClick)!==!1&&f(h)}}if(i.onHold){const f=i.onHold.bind(i);i.onHold=function(){o(i.canClick)!==!1&&f()}}const s=t.reduce((f,h)=>{var m;return Object.assign(f,(m=h.getGatheredProps)==null?void 0:m.call(h,i))},{});return i[Me]=function(){const{display:f,visibility:h,style:m,classes:w,onClick:C,onHold:y,color:N,glowColor:T,canClick:S,mark:$,id:V}=this;return{display:f,visibility:h,style:m,classes:w,onClick:C,onHold:y,color:N,glowColor:T,canClick:S,mark:$,id:V,...s}},i})}function Jl(e){return pe(t=>{const n=e.call(t,t);return n.id=it("tree-"),n.type=Wl,n[_e]=Ul,n.isResetting=E(!1),n.resettingNode=Se(null),n.reset=function(r){var s,a;const i=n;i.isResetting.value=!0,i.resettingNode.value=r,(s=i.resetPropagation)==null||s.call(i,i,r),(a=i.onReset)==null||a.call(i,r),i.isResetting.value=!1,i.resettingNode.value=null},n.links=O(()=>{var i;return(i=o(n.branches))!=null?i:[]}),M(n,"visibility"),Q(n,"visibility",fe.Visible),M(n,"nodes"),M(n,"leftSideNodes"),M(n,"rightSideNodes"),M(n,"branches"),n[Me]=function(){const{nodes:r,leftSideNodes:i,rightSideNodes:s,branches:a}=this;return{nodes:r,leftSideNodes:i,rightSideNodes:s,branches:a}},n})}const Kl=function(e,t){var s;const n=o(e.branches);if(n==null)return;const r=[];let i=[t];for(;i.length!==0;){const a=[];for(const u of i)for(const c of n.filter(f=>f.startNode===u))[...r,...i].includes(c.endNode)||(a.push(c.endNode),(s=c.endNode.reset)==null||s.reset());r.push(...i),i=a}};function br(e,t=null,n=0){const r=et(n);return O(()=>t==null||l.gte(e.value,o(r))?It(e)+" "+e.displayName:`Reach ${l.eq(t.precision,0)?yt(o(r)):Ie(o(r),t.precision)} ${t.displayName} to unlock (You have ${l.eq(t.precision,0)?yt(t.value):Ie(t.value,t.precision)})`)}function Ce(e){return pe(t=>{var r;const n=e.call(t,t);return n.partialDisplay=i=>p("span",{style:o(n.requirementMet)?"":"color: var(--danger)"},[It(n.resource,n.cost instanceof d?Yt(n.cost,i!=null?i:1,o(n.cumulativeCost),o(n.directSum)):o(n.cost))," ",n.resource.displayName]),n.display=i=>p("div",null,[o(n.requiresPay)?"Costs: ":"Requires: ",It(n.resource,n.cost instanceof d?Yt(n.cost,i!=null?i:1,o(n.cumulativeCost),o(n.directSum)):o(n.cost))," ",n.resource.displayName]),M(n,"visibility"),Q(n,"visibility",fe.Visible),M(n,"cost"),M(n,"requiresPay"),Q(n,"requiresPay",!0),M(n,"cumulativeCost"),Q(n,"cumulativeCost",!0),M(n,"maxBulkAmount"),Q(n,"maxBulkAmount",1),M(n,"directSum"),Q(n,"pay",function(i){const s=n.cost instanceof d?Yt(n.cost,i!=null?i:1,o(n.cumulativeCost),o(n.directSum)):o(n.cost);n.resource.value=l.sub(n.resource.value,s).max(0)}),n.canMaximize=O(()=>{var u;if(!(n.cost instanceof d))return!1;const i=o(n.maxBulkAmount);if(l.lte(i,1))return!1;const s=o(n.cumulativeCost),a=(u=o(n.directSum))!=null?u:s?10:0;return l.lte(i,a)?!0:!(!n.cost.isInvertible()||s===!0&&!n.cost.isIntegrable())}),n.cost instanceof d?n.requirementMet=Ja(n.cost,n.resource,(r=n.cumulativeCost)!=null?r:!0,n.directSum,n.maxBulkAmount):n.requirementMet=O(()=>l.gte(n.resource.value,o(n.cost))?1:0),n})}function yr(e){return pe(()=>({requirementMet:O(()=>Ge(e.visibility)),visibility:fe.None,requiresPay:!1}))}function Tn(e){if(nt(e))return e.every(Tn);const t=o(e.requirementMet);return typeof t=="boolean"?t:l.gt(t,0)}function _r(e){if(nt(e))return e.map(_r).reduce(l.min);const t=o(e.requirementMet);return typeof t=="boolean"?t?l.dInf:0:l.gt(t,1)&&o(e.canMaximize)!==!0?1:t}function wr(e,t=1){var n,r;if(nt(e)&&(e=e.filter(i=>Ge(i.visibility)),e.length===1&&(e=e[0])),nt(e)){e=e.filter(a=>"partialDisplay"in a);const i=e.filter(a=>o(a.requiresPay)),s=e.filter(a=>!o(a.requiresPay));return p(j,null,[i.length>0?p("div",null,[P("Costs:")," ",zn(i.map(a=>a.partialDisplay(t)),p(j,null,[P(", ")]))]):null,s.length>0?p("div",null,[P("Requires:")," ",zn(s.map(a=>a.partialDisplay(t)),p(j,null,[P(", ")]))]):null])}return(r=(n=e.display)==null?void 0:n.call(e))!=null?r:p(j,null,null)}function Nr(e,t=1){var n;nt(e)?e.filter(r=>o(r.requiresPay)).forEach(r=>{var i;return(i=r.pay)==null?void 0:i.call(r,t)}):o(e.requiresPay)&&((n=e.pay)==null||n.call(e,t))}var Zl=A({props:{display:{type:x(String,Object,Function),required:!0},visibility:{type:x(Number,Boolean),required:!0},style:x(String,Object,Array),classes:x(Object),requirements:{type:Object,required:!0},canPurchase:{type:x(Boolean),required:!0},bought:{type:x(Boolean),required:!0},mark:x(Boolean,String),id:{type:String,required:!0},purchase:{type:Function,required:!0}},components:{Node:ut,MarkNode:rn},setup(e){const{display:t,requirements:n,bought:r}=de(e),i=Se("");return je(()=>{const s=ce(t);if(s==null){i.value="";return}if(tt(s)){i.value=ee(s);return}const a=ee(s.title||"","h3"),u=ee(s.description,"div"),c=ee(s.effectDisplay||"");i.value=ee(Z(()=>p("span",null,[s.title!=null?p("div",null,[p(a,null,null)]):null,p(u,null,null),s.effectDisplay!=null?p("div",null,[P("Currently: "),p(c,null,null)]):null,r.value?null:p(j,null,[p("br",null,null),wr(n.value)])])))}),{component:i,unref:o,Visibility:fe,isVisible:Ge,isHidden:$t}}});const Xl=["disabled"];function Ql(e,t,n,r,i,s){var c;const a=we("MarkNode"),u=we("Node");return e.isVisible(e.visibility)?(b(),k("button",{key:0,style:se([{visibility:e.isHidden(e.visibility)?"hidden":void 0},(c=e.unref(e.style))!=null?c:{}]),onClick:t[0]||(t[0]=(...f)=>e.purchase&&e.purchase(...f)),class:X({feature:!0,upgrade:!0,can:e.unref(e.canPurchase),locked:!e.unref(e.canPurchase),bought:e.unref(e.bought),...e.unref(e.classes)}),disabled:!e.unref(e.canPurchase)},[e.unref(e.component)?(b(),R(ae(e.unref(e.component)),{key:0})):F("",!0),p(a,{mark:e.unref(e.mark)},null,8,["mark"]),p(u,{id:e.id},null,8,["id"])],14,Xl)):F("",!0)}var eu=G(Zl,[["render",Ql],["__scopeId","data-v-9be6bac0"]]);const tu=Symbol("Upgrade");function Be(e,...t){const n=He(!1,!1),r=t.reduce((i,s)=>{var a;return Object.assign(i,(a=s.getPersistentData)==null?void 0:a.call(s))},{});return pe(i=>{var c,f;const s=e.call(i,i);s.id=it("upgrade-"),s.type=tu,s[_e]=eu;for(const h of t)(c=h.preConstruct)==null||c.call(h,s);s.bought=n,Object.assign(s,r),s.canPurchase=O(()=>!n.value&&Tn(s.requirements)),s.purchase=function(){var m;const h=s;!o(h.canPurchase)||(Nr(s.requirements),n.value=!0,(m=h.onPurchase)==null||m.call(h))};const a=yr(s);nt(s.requirements)?s.requirements.unshift(a):s.requirements=[a,s.requirements],M(s,"visibility"),Q(s,"visibility",fe.Visible),M(s,"classes"),M(s,"style"),M(s,"display"),M(s,"mark");for(const h of t)(f=h.postConstruct)==null||f.call(h,s);const u=t.reduce((h,m)=>{var w;return Object.assign(h,(w=m.getGatheredProps)==null?void 0:w.call(m,s))},{});return s[Me]=function(){const{display:h,visibility:m,style:w,classes:C,requirements:y,canPurchase:N,bought:T,mark:S,id:$,purchase:V}=this;return{display:h,visibility:m,style:o(w),classes:C,requirements:y,canPurchase:N,bought:T,mark:S,id:$,purchase:V,...u}},s})}function Je(e){return pe(t=>{const{multiplier:n,description:r,enabled:i,smallerIsBetter:s}=e.call(t,t),a=et(n),u=et(r),c=i==null?void 0:et(i);return{apply:f=>l.times(f,o(a)),invert:f=>l.div(f,o(a)),getFormula:f=>d.times(f,a),enabled:c,description:r==null?void 0:Z(()=>p("div",{class:"modifier-container"},[o(u)!=null?p("span",{class:"modifier-description"},[kt(o(u))]):null,p("span",{class:"modifier-amount",style:(s===!0?l.gt(o(a),1):l.lt(o(a),1))?"color: var(--danger)":""},[P("\xD7"),ir(o(a))])]))}})}function Ke(e){return pe(()=>{const t=e();return{apply:n=>t.filter(r=>o(r.enabled)!==!1).reduce((r,i)=>i.apply(r),n),invert:t.every(n=>n.invert!=null)?n=>t.filter(r=>o(r.enabled)!==!1).reduceRight((r,i)=>i.invert(r),n):void 0,getFormula:t.every(n=>n.getFormula!=null)?n=>t.reduce((r,i)=>i.enabled==null||i.enabled===!0?i.getFormula(r):d.if(r,i.enabled,s=>i.getFormula(s)),n):void 0,enabled:t.some(n=>n.enabled!=null)?O(()=>t.filter(n=>o(n.enabled)!==!1).length>0):void 0,description:t.some(n=>n.description!=null)?Z(()=>p(j,null,[t.filter(n=>o(n.enabled)!==!1).map(n=>o(n.description)).filter(n=>n).map(kt)])):void 0}})}const nu=Symbol("Reset");function Cr(e){return pe(t=>{const n=e.call(t,t);return n.id=it("reset-"),n.type=nu,n.reset=function(){var i;const r=s=>{if(s!=null&&typeof s=="object"&&!(s instanceof l)&&!(s instanceof d)){if(Lt in s&&s[Lt]===!0)return;if(gt in s){const a=s;a.value=a[gt]}else!(s instanceof l)&&!ue(s)&&Object.values(s).forEach(a=>r(a))}};o(n.thingsToReset).forEach(r),me.emit("reset",n),(i=n.onReset)==null||i.call(n)},M(n,"thingsToReset"),n})}const Ht={};me.on("removeLayer",e=>{var t;(t=Ht[e.id])==null||t.call(Ht),Ht[e.id]=void 0});const ru=A({__name:"Sticky",setup(e){const t=E("0"),n=new ResizeObserver(i),r=Se(null);function i(){let s=r.value;if(s==null)return;let a=0;for(;s.previousSibling;){const u=s.previousSibling;u.dataset&&"vSticky"in u.dataset&&(a+=u.offsetHeight),s=u}t.value=a+"px"}return bt(i),document.fonts.ready.then(i),Bt(()=>{var a;const s=(a=r.value)==null?void 0:a.parentElement;s&&n.observe(s)}),(s,a)=>(b(),k("div",{class:"sticky",style:se({top:t.value}),ref_key:"element",ref:r,"data-v-sticky":""},[Qe(s.$slots,"default",{},void 0,!0)],4))}});var kr=G(ru,[["__scopeId","data-v-cccac690"]]);const iu=A({__name:"Resource",props:{resource:null,color:null},setup(e){const t=e,n=O(()=>It(t.resource));return(r,i)=>(b(),k("h2",{style:se({color:e.color,"text-shadow":"0px 0px 10px "+e.color})},L(o(n)),5))}});const su={class:"main-display"},au={key:0},ou={key:1},Sr=A({__name:"MainDisplay",props:{resource:null,color:null,classes:null,style:null,effectDisplay:null},setup(e){const n=de(e),r=E(null),i=_t(n.effectDisplay),s=O(()=>l.lt(n.resource.value,"1e1000"));return(a,u)=>(b(),R(kr,null,{default:q(()=>{var c,f,h,m;return[g("div",{class:X(["main-display-container",(c=e.classes)!=null?c:{}]),style:se([{height:`${((h=(f=r.value)==null?void 0:f.$el.clientHeight)!=null?h:0)+50}px`},(m=e.style)!=null?m:{}])},[g("div",su,[o(s)?(b(),k("span",au,"You have ")):F("",!0),p(iu,{resource:e.resource,color:e.color||"white"},null,8,["resource","color"]),P(" "+L(e.resource.displayName),1),o(i)?(b(),k("span",ou,[P(", "),(b(),R(ae(o(i)),{ref_key:"effectRef",ref:r},null,512))])):F("",!0)])],6)]}),_:1}))}});function Ir(e,t){return M(t,"display"),M(t,"classes"),M(t,"style"),M(t,"direction"),Q(t,"direction",W.Up),M(t,"xoffset"),M(t,"yoffset"),t.pinnable&&(t.pinned=He(!1,!1)),bt(()=>{const n=e[_e];e[_e]=le;const r=e[Me].bind(e);e[Me]=function(){const{display:s,classes:a,style:u,direction:c,xoffset:f,yoffset:h,pinned:m}=this;return{element:{[_e]:n,[Me]:r},display:s,classes:a,style:o(u),direction:c,xoffset:f,yoffset:h,pinned:m}}.bind(t)}),t}function lu(e){return Sn(t=>{const n=e.call(t,t);M(n,"showNextAt"),Q(n,"showNextAt",!0),Q(n,"minimumGain",1),n.resetDescription==null?n.resetDescription=O(()=>l.lt(n.conversion.gainResource.value,1e3)?"Reset for ":""):M(n,"resetDescription"),n.display==null&&(n.display=Z(()=>p("span",null,[o(n.resetDescription),p("b",null,[It(n.conversion.gainResource,l.max(o(n.conversion.actualGain),o(n.minimumGain)))])," ",n.conversion.gainResource.displayName,o(n.showNextAt)!=null?p("div",null,[p("br",null,null),o(n.conversion.buyMax)?"Next:":"Req:"," ",It(n.conversion.baseResource,!o(n.conversion.buyMax)&&l.gte(o(n.conversion.actualGain),1)?o(n.conversion.currentAt):o(n.conversion.nextAt))," ",n.conversion.baseResource.displayName]):null]))),n.canClick==null&&(n.canClick=O(()=>l.gte(o(n.conversion.actualGain),o(n.minimumGain))));const r=n.onClick;return n.onClick=function(i){o(n.canClick)!==!1&&(n.conversion.convert(),n.tree.reset(n.treeNode),n.resetTime&&(n.resetTime.value=n.resetTime[gt]),r==null||r(i))},n})}function Mr(e){return Yl(t=>{const n=e.call(t,t);return Q(n,"display",sr(n.layerID)),M(n,"append"),{...n,onClick:o(n.append)?function(){if(D.tabs.includes(n.layerID)){const r=D.tabs.lastIndexOf(n.layerID);D.tabs.splice(r,1)}else D.tabs.push(n.layerID)}:function(){D.tabs.splice(1,1,n.layerID)}}})}const Gn="C",vt=tn(Gn,function(){const e="Time Condenser",t="#9900cc",n=$n(0,"s of condensed time"),r=vr(n),i=Cr(()=>({thingsToReset:()=>[vt]})),s=He(0),a=10,u=10;var c=!0;const f=pr(()=>({direction:W.Right,width:100,height:10,style:"margin-top: 8px",baseStyle:"margin-top: -1px",fillStyle:"margin-top: 0px; transition-duration: 0.1s",progress:()=>l.div(s.value,a)})),h=Sn(()=>({display:Z(()=>p("h3",null,[P("Condense "),p(kn,{hotkey:H},null),p(Ye,null,null),P("Condense 1000s of time into "),m().toString(),P("s of condensed time."),p(Ye,null,null),Ee(f)])),canClick:()=>l.gte(Ve.points.value,1e3),onClick:()=>{if(!!c&&(s.value=l.add(s.value,1),c=!1,setTimeout(()=>{c=!0},u*(y.bought?.5:1)),l.gte(s.value,a))){Ve.points.value=l.sub(Ve.points.value,1e3);var K=m();n.value=l.add(n.value,K),s.value=0}}}));function m(){var K=S.apply(1);return K=Ve.upgradeModifiers[4].apply(K),K}const w=Be(()=>({requirements:Ce(()=>({resource:ye(n),cost:1})),display:{description:"Condensed time boosts normal time gain."}})),C=Ke(()=>[Je(()=>({multiplier:()=>V.apply(l.pow(n.value,.5)),enabled:w.bought}))]),y=Be(()=>({requirements:Ce(()=>({resource:ye(n),cost:3})),display:{description:"You condense and gain time 2x faster."}})),N=Ke(()=>[Je(()=>({multiplier:2,enabled:y.bought}))]),T=Be(()=>({requirements:Ce(()=>({resource:ye(n),cost:10})),display:{description:"Your condenser produces more condensed time based on you best time earned."}})),S=Ke(()=>[Je(()=>({multiplier:()=>l.log(Ve.best.value,50).round(),enabled:T.bought}))]),$=Be(()=>({requirements:Ce(()=>({resource:ye(n),cost:75})),display:{description:"Boost condenser upgrade 1's effect significantly based on total condensed time made."}})),V=Ke(()=>[Je(()=>({multiplier:()=>l.pow(r.value,.25),enabled:$.bought}))]),J=Be(()=>({requirements:Ce(()=>({resource:ye(n),cost:500})),display:{description:"The power generator can be wound twice as much."}})),ne=[w,y,T,$,J],Oe=[C,N],Ne=Mr(()=>({visibility:()=>l.gte(Ve.points.value,1e3)||l.gte(n.value,1),layerID:Gn,color:t,reset:i})),ve=Ir(Ne,{display:br(n),pinnable:!0}),H=Mn(()=>({description:"Condense time",key:"c",onPress(){h.onClick()}}));return{name:e,color:t,points:n,total:r,tooltip:ve,row1Upgrades:ne,row1UpgradeModifiers:Oe,display:Z(()=>p(j,null,[p(Sr,{resource:n,color:t},null),p("h5",null,[P("You have made "),Ie(r.value),P("s of condensed time.")]),p(Ye,null,null),Ee(h),wn(...ne)])),treeNode:Ne,condenser:h,condenserProgress:s,condenseHotkey:H}});function uu(e,...t){return pe(n=>{var i,s;const r=e.call(n,n);for(const a of t)(i=a.preConstruct)==null||i.call(a,r);r.formula=r.formula(d.variable(r.baseResource)),r.currentGain==null&&(r.currentGain=O(()=>{let a=l.floor(r.formula.evaluate(r.baseResource.value)).max(0);return o(r.buyMax)===!1&&(a=a.min(1)),a})),r.actualGain==null&&(r.actualGain=r.currentGain),r.currentAt==null&&(r.currentAt=O(()=>r.formula.invert(l.floor(o(r.currentGain))))),r.nextAt==null&&(r.nextAt=O(()=>r.formula.invert(l.floor(o(r.currentGain)).add(1)))),r.convert==null&&(r.convert=function(){var u;const a=o(r.currentGain);r.gainResource.value=l.add(r.gainResource.value,a),r.spend(a),(u=r.onConvert)==null||u.call(r,a)}),r.spend==null&&(r.spend=function(){r.baseResource.value=0}),M(r,"currentGain"),M(r,"actualGain"),M(r,"currentAt"),M(r,"nextAt"),M(r,"buyMax"),Q(r,"buyMax",!0);for(const a of t)(s=a.postConstruct)==null||s.call(a,r);return r})}function cu(e){return uu(e)}const du=A({__name:"Tab",props:{display:null},setup(e){const t=e,{display:n}=de(t),r=Nn(n);return(i,s)=>(b(),R(ae(o(r))))}}),fu=Symbol("Tab");function $r(e){return pe(t=>{const n=e.call(t,t);return n.id=it("tab-"),n.type=fu,n[_e]=du,n[Me]=function(){const{display:r}=this;return{display:r}},n})}const gu=Symbol("Repeatable");function un(e,...t){const n=He(0),r=t.reduce((i,s)=>{var a;return Object.assign(i,(a=s.getPersistentData)==null?void 0:a.call(s))},{});return pe(i=>{var w,C,y;const s=e.call(i,i);s.id=it("repeatable-"),s.type=gu,s[_e]=hr;for(const N of t)(w=N.preConstruct)==null||w.call(N,s);s.amount=n,s.amount[gt]=(C=s.initialAmount)!=null?C:0,Object.assign(s,r);const a={requirementMet:O(()=>l.sub(o(s.limit),s.amount.value)),requiresPay:!1,visibility:fe.None,canMaximize:!0},u=yr(s);nt(s.requirements)?(s.requirements.unshift(u),s.requirements.push(a)):s.requirements=[u,s.requirements,a],s.maxed=O(()=>l.gte(s.amount.value,o(s.limit))),M(s,"classes");const c=s.classes;s.classes=O(()=>{const N=o(c)||{};return s.maxed.value&&(N.bought=!0),N}),s.amountToIncrease=O(()=>l.clampMin(_r(s.requirements),1)),s.canClick=O(()=>Tn(s.requirements));const f=s.onClick;s.onClick=function(N){var $;const T=s;if(!o(T.canClick))return;const S=($=o(s.amountToIncrease))!=null?$:1;Nr(s.requirements,S),T.amount.value=l.add(T.amount.value,S),f==null||f(N)},M(s,"display");const h=s.display;s.display=Z(()=>{var T,S,$;const N=o(h);if(tt(N)){const V=ee(N);return p(V,null,null)}if(N!=null){const V=s,J=ee((T=N.title)!=null?T:"","h3"),ne=ee((S=N.description)!=null?S:""),Oe=ee(($=N.effectDisplay)!=null?$:"");return p("span",null,[N.title==null?null:p("div",null,[p(J,null,null)]),N.description==null?null:p(ne,null,null),N.showAmount===!1?null:p("div",null,[p("br",null,null),p(j,null,[P("Amount: "),yt(V.amount.value)]),l.isFinite(o(V.limit))?p(j,null,[P(" / "),yt(o(V.limit))]):void 0]),N.effectDisplay==null?null:p("div",null,[p("br",null,null),P("Currently: "),p(Oe,null,null)]),V.maxed.value?null:p("div",null,[p("br",null,null),wr(V.requirements,o(s.amountToIncrease))])])}return""}),M(s,"visibility"),Q(s,"visibility",fe.Visible),M(s,"limit"),Q(s,"limit",l.dInf),M(s,"style"),M(s,"mark"),M(s,"small");for(const N of t)(y=N.postConstruct)==null||y.call(N,s);const m=t.reduce((N,T)=>{var S;return Object.assign(N,(S=T.getGatheredProps)==null?void 0:S.call(T,s))},{});return s[Me]=function(){const{display:N,visibility:T,style:S,classes:$,onClick:V,canClick:J,small:ne,mark:Oe,id:Ne}=this;return{display:N,visibility:T,style:o(S),classes:$,onClick:V,canClick:J,small:ne,mark:Oe,id:Ne,...m}},s})}const Hn="space",Pn=tn(Hn,function(){const e="Space",t="#FF0000",n=$n(0,"space points"),r=cu(()=>({formula:C=>C.div(1).sqrt(),baseResource:Ve.points,gainResource:ye(n)})),i=Cr(()=>({thingsToReset:()=>[Pn,Ve,vt]})),s=Mr(()=>({layerID:Hn,color:t,reset:i})),a=Ir(s,{display:br(n),pinnable:!0}),u=lu(()=>({conversion:r,tree:Ve.tree,treeNode:s})),c=Mn(()=>({description:"Reset for space points",key:"s",onPress:u.onClick})),f=un(()=>({display(){return{title:"Height",description:"Increase the height of the space"}},requirements:Ce(()=>({resource:ye(n),cost(){let C=new l(f.amount.value);return l.pow(2,C).floor()}}))})),h=un(()=>({display(){return{title:"Length",description:"Increase the length of the space"}},requirements:Ce(()=>({resource:ye(n),cost(){let C=new l(h.amount.value);return l.pow(2,C).times(5).floor()}}))})),m=un(()=>({display(){return{title:"Width",description:"Increase the width of the space"}},requirements:Ce(()=>({resource:ye(n),cost(){let C=new l(m.amount.value);return l.pow(2,C).times(10).floor()}})),visibility:()=>!0})),w=$r(()=>({display:Z(()=>p(j,null,[p(Sr,{resource:n,color:t},null),Ee(u),p(Ye,null,null),wn(f,h,m),p("h3",null,[P("You have "),l.add(f.amount.value,h.amount.value),P("m^2 of area")])]))}));return{name:e,color:t,points:n,tooltip:a,tab:w,display:w.display,treeNode:s,hotkey:c,reset:i,height:f,length:h,width:m}});me.on("setupVue",e=>e.use(Gr));function mu(e="white",t="8px"){return{transform:"scale(1.05, 1.05)",borderColor:"rgba(0, 0, 0, 0.125)",boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 ${t} ${e}`,zIndex:1}}const pu=A({props:{visibility:{type:x(Number,Boolean),required:!0},display:{type:x(Object,String,Function),required:!0},style:x(String,Object,Array),classes:x(Object),glowColor:x(String),active:Boolean,floating:Boolean},emits:["selectTab"],setup(e,{emit:t}){const{display:n,glowColor:r,floating:i}=de(e),s=Nn(n),a=O(()=>{const c=ce(r);return c==null||c===""?{}:o(i)?mu(c):{boxShadow:`0px 9px 5px -6px ${c}`}});function u(){t("selectTab")}return{selectTab:u,component:s,glowColorStyle:a,unref:o,Visibility:fe,isVisible:Ge,isHidden:$t}}});function hu(e,t,n,r,i,s){var a;return e.isVisible(e.visibility)?(b(),k("button",{key:0,onClick:t[0]||(t[0]=(...u)=>e.selectTab&&e.selectTab(...u)),class:X(["tabButton",{active:e.active,...e.unref(e.classes)}]),style:se([{visibility:e.isHidden(e.visibility)?"hidden":void 0},e.glowColorStyle,(a=e.unref(e.style))!=null?a:{}])},[(b(),R(ae(e.component)))],6)):F("",!0)}var Tr=G(pu,[["render",hu],["__scopeId","data-v-21427abb"]]);const vu=A({props:{visibility:{type:x(Number,Boolean),required:!0},activeTab:{type:x(Object),required:!0},selected:{type:Object,required:!0},tabs:{type:x(Object),required:!0},style:x(String,Object,Array),classes:x(Object),buttonContainerStyle:x(String,Object,Array),buttonContainerClasses:x(Object)},components:{Sticky:kr,TabButton:Tr},setup(e){const{activeTab:t}=de(e),n=O(()=>Ut[Y.theme].floatingTabs),r=Se("");je(()=>{const u=ce(t);if(u==null){r.value="";return}if(tt(u)){r.value=ee(u);return}r.value=ee(o(u.display))});const i=O(()=>{const u=ce(t);return tt(u)||!u?void 0:o(u.classes)}),s=O(()=>{const u=ce(t);return tt(u)||!u?void 0:o(u.style)});function a(u){const{display:c,style:f,classes:h,glowColor:m,visibility:w}=u;return{display:c,style:o(f),classes:h,glowColor:m,visibility:w}}return{floating:n,tabClasses:i,tabStyle:s,Visibility:fe,component:r,gatherButtonProps:a,unref:o,isVisible:Ge,isHidden:$t}}});function bu(e,t,n,r,i,s){var c,f;const a=we("TabButton"),u=we("Sticky");return e.isVisible(e.visibility)?(b(),k("div",{key:0,class:X(["tab-family-container",{...e.unref(e.classes),...e.tabClasses}]),style:se([{visibility:e.isHidden(e.visibility)?"hidden":void 0},(c=e.unref(e.style))!=null?c:[],(f=e.tabStyle)!=null?f:[]])},[p(u,{class:X(["tab-buttons-container",e.unref(e.buttonContainerClasses)]),style:se(e.unref(e.buttonContainerStyle))},{default:q(()=>[g("div",{class:X(["tab-buttons",{floating:e.floating}])},[(b(!0),k(j,null,We(e.unref(e.tabs),(h,m)=>(b(),R(a,ze({onSelectTab:w=>e.selected.value=m,floating:e.floating,key:m,active:e.unref(h.tab)===e.unref(e.activeTab)},e.gatherButtonProps(h)),null,16,["onSelectTab","floating","active"]))),128))],2)]),_:1},8,["class","style"]),e.unref(e.activeTab)?(b(),R(ae(e.unref(e.component)),{key:0})):F("",!0)],6)):F("",!0)}var yu=G(vu,[["render",bu],["__scopeId","data-v-58dbf83a"]]);const _u=Symbol("TabButton"),wu=Symbol("TabFamily");function Nu(e,t){Object.keys(e).length===0&&console.error("Cannot create tab family with 0 tabs");const n=He(Object.keys(e)[0],!1);return pe(r=>{var a;const i=(a=t==null?void 0:t.call(r,r))!=null?a:{};i.id=it("tabFamily-"),i.type=wu,i[_e]=yu,i.tabs=Object.keys(e).reduce((u,c)=>{const f=e[c]();return f.type=_u,f[_e]=Tr,M(f,"visibility"),Q(f,"visibility",fe.Visible),M(f,"tab"),M(f,"display"),M(f,"classes"),M(f,"style"),M(f,"glowColor"),u[c]=f,u},{}),i.selected=n,i.activeTab=O(()=>{const u=o(s.tabs);if(n.value in u&&Ge(u[n.value].visibility))return o(u[n.value].tab);const c=Object.values(u).find(f=>Ge(f.visibility));return c?o(c.tab):null}),M(i,"visibility"),Q(i,"visibility",fe.Visible),M(i,"classes"),M(i,"style"),M(i,"buttonContainerClasses"),M(i,"buttonContainerStyle"),i[Me]=function(){const{visibility:u,activeTab:c,selected:f,tabs:h,style:m,classes:w,buttonContainerClasses:C,buttonContainerStyle:y}=this;return{visibility:u,activeTab:c,selected:f,tabs:h,style:o(m),classes:w,buttonContainerClasses:C,buttonContainerStyle:y}};const s=i;return s})}const Ve=tn("main",function(){const e=$n(16e4),t=Fl(e),n=vr(e),r=O(()=>{let be=new l(1);for(const an of K)be=new l(an.apply(be));for(const an of vt.row1UpgradeModifiers)be=new l(an.apply(be));return l.lte(a.value,0)?new l(0):be});me.on("update",be=>{e.value=l.add(e.value,l.times(r.value,be))});const i=El(e,r),s=Jl(()=>({nodes:[[vt.treeNode]],branches:[],onReset(){e.value=Dn(this.resettingNode.value)===Dn(vt.treeNode)?0:10,t.value=e.value,n.value=e.value;for(const be of H)be.bought.value=!1},resetPropagation:Kl})),a=He(0),u=10,c=10;var f=!0,h=!1;const m=pr(()=>({direction:W.Right,width:100,height:10,style:"margin-top: 8px",baseStyle:"margin-top: -1px",fillStyle:"margin-top: 0px; transition-duration: 0.1s",progress:()=>l.div(a.value,y())})),w=Mn(()=>({description:"Wind the power generator",key:"w",onPress(){C.onClick()}})),C=Sn(()=>({display:Z(()=>p("h3",null,[P("Wind "),p(kn,{hotkey:w},null),p(Ye,null,null),P("The power generator must be wound to generate time."),p(Ye,null,null),Ee(m)])),style:{transition:"transform 0.1s"},canClick:()=>!0,onClick:()=>{if(!!f){h=!0,a.value=l.add(a.value,1);var be=y();l.gte(a.value,be)&&(a.value=be),f=!1,setTimeout(()=>{f=!0},c)}}}));function y(){var be=vt.row1Upgrades[4].bought;return u*(be?2:1)}const N=Be(()=>({requirements:Ce(()=>({resource:ye(e),cost:25})),display:{description:"The power genarator's wind amount improves time generation."}})),T=Be(()=>({requirements:Ce(()=>({resource:ye(e),cost:150})),display:{description:"Double power generation, and make the power generator decay slower."},onPurchase(){clearInterval(Vn),Vn=setInterval(()=>{if(h){h=!1;return}a.value=l.sub(a.value,1),l.lte(a.value,0)&&(a.value=0)},1e3)}})),S=Be(()=>({requirements:Ce(()=>({resource:ye(e),cost:300})),display:{description:"Your time played boosts time generation."}})),$=Be(()=>({requirements:Ce(()=>({resource:ye(e),cost:650})),display:{description:"The previous upgrades boost time 50% more."}})),V=Be(()=>({requirements:Ce(()=>({resource:ye(e),cost:1e6})),display:{description:"Unlock the space tab. Double both time and compressed time gain."},visibility:()=>l.gte(e.value,75e4)||V.bought})),J=Ke(()=>[Je(()=>({multiplier:()=>Ne.apply(l.pow(a.value,.75).floor()),description:"Time Upgrade 1",enabled:N.bought}))]),ne=Ke(()=>[Je(()=>({multiplier:Ne.apply(2),description:"Time Upgrade 2",enabled:T.bought}))]),Oe=Ke(()=>[Je(()=>({multiplier:()=>Ne.apply(l.log10(D.timePlayed).floor()),description:"Time Upgrade 3",enabled:S.bought}))]),Ne=Ke(()=>[Je(()=>({multiplier:1.5,description:"Time Upgrade 4",enabled:$.bought}))]),ve=Ke(()=>[Je(()=>({multiplier:2,description:"Time Upgrade 5",enabled:V.bought}))]),H=[N,T,S,$,V],K=[J,ne,Oe,Ne,ve];var Vn=setInterval(()=>{if(h){h=!1;return}a.value=l.sub(a.value,1),l.lte(a.value,0)&&(a.value=0)},500*(T.bought?2:1));const En=Nu({mainTab:()=>({tab:$r(()=>({display:Z(()=>p(j,null,[D.devSpeed===0?p("div",null,[P("Game Paused"),p(ut,{id:"paused"},null)]):null,D.devSpeed!=null&&D.devSpeed!==0&&D.devSpeed!==1?p("div",null,[P("Dev Speed: "),Ie(D.devSpeed),P("x"),p(ut,{id:"devspeed"},null)]):null,D.offlineTime!=null&&D.offlineTime!==0?p("div",null,[P("Offline Time: "),en(D.offlineTime),p(ut,{id:"offline"},null)]):null,p("div",null,[l.lt(e.value,"1e1000")?p("span",null,[P("You have ")]):null,p("h2",null,[Ie(e.value)]),l.lt(e.value,"1e1e6")?p("span",null,[P(" seconds of time")]):null]),p("h5",null,[P("Your best time amount is "),Ie(t.value),P("s")]),l.gt(r.value,0)?p("div",null,[P("("),i.value,P(")"),p(ut,{id:"oomps"},null)]):null,p(Ye,null,null),Ee(s),p(Ye,null,null),Ee(C),p(Ye,null,null),wn(...H)]))})),display:"Main",style:{color:"orange"}}),spaceTab:()=>({tab:Pn.display,display:"Space",visibility:()=>!0,style:{color:"blue"}})});return{name:"Tree",links:s.links,display:Z(()=>p(j,null,[Ee(En)])),points:e,best:t,total:n,oomps:i,tree:s,windProgress:a,progressBar:m,windHotkey:w,winder:C,upgrades:H,upgradeModifiers:K,tabs:En}}),Cu=e=>[Ve,vt,Pn],On=O(()=>!1);function ku(e,t){}var Su=Object.freeze(Object.defineProperty({__proto__:null,main:Ve,getInitialLayers:Cu,hasWon:On,fixOldSave:ku},Symbol.toStringTag,{value:"Module"}));const Iu={class:"field"},Mu=A({__name:"Toggle",props:{title:null,modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,r=O(()=>{var s;return ee((s=o(n.title))!=null?s:"<span></span>","span")}),i=O({get(){return!!n.modelValue},set(s){t("update:modelValue",s)}});return(s,a)=>(b(),k("label",Iu,[gn(g("input",{type:"checkbox",class:"toggle","onUpdate:modelValue":a[0]||(a[0]=u=>ue(i)?i.value=u:null)},null,512),[[Ar,o(i)]]),(b(),R(ae(o(r))))]))}});var Ae=G(Mu,[["__scopeId","data-v-11046116"]]);const jt=e=>(De("data-v-06de52e9"),e=e(),qe(),e),$u={class:"game-over-modal-header"},Tu=["src","alt"],Pu={class:"game-over-modal-title"},Ou=jt(()=>g("h2",null,"Congratulations!",-1)),Fu={key:0},xu=jt(()=>g("br",null,null,-1)),Vu=jt(()=>g("div",null," Please check the Discord to discuss the game or to check for new content updates! ",-1)),Eu=jt(()=>g("br",null,null,-1)),Du=["href"],qu=jt(()=>g("span",{class:"material-icons game-over-modal-discord"},"discord",-1)),Ru=A({__name:"GameOverScreen",setup(e){const{title:t,logo:n,discordName:r,discordLink:i,versionNumber:s,versionTitle:a}=z,u=O(()=>en(D.timePlayed)),c=O(()=>On.value&&!D.keepGoing),f=rt(D,"autosave");function h(){D.keepGoing=!0}function m(){Xe(Nt())}return(w,C)=>(b(),R(st,{"model-value":o(c)},{header:q(()=>[g("div",$u,[o(n)?(b(),k("img",{key:0,class:"game-over-modal-logo",src:o(n),alt:o(t)},null,8,Tu)):F("",!0),g("div",Pu,[Ou,g("h4",null,"You've beaten "+L(o(t))+" v"+L(o(s))+": "+L(o(a)),1)])])]),body:q(({shown:y})=>[y?(b(),k("div",Fu,[g("div",null,"It took you "+L(o(u))+" to beat the game.",1),xu,Vu,Eu,g("div",null,[g("a",{href:o(i),class:"game-over-modal-discord-link"},[qu,P(" "+L(o(r)),1)],8,Du)]),p(Ae,{title:"Autosave",modelValue:o(f),"onUpdate:modelValue":C[0]||(C[0]=N=>ue(f)?f.value=N:null)},null,8,["modelValue"])])):F("",!0)]),footer:q(()=>[g("div",{class:"game-over-footer"},[g("button",{onClick:h,class:"button"},"Keep Going"),g("button",{onClick:m,class:"button danger"},"Play Again")])]),_:1},8,["model-value"]))}});var Lu=G(Ru,[["__scopeId","data-v-06de52e9"]]);const Au={class:"field"},Bu={key:0,class:"field-title"},Pr=A({__name:"Select",props:{title:null,modelValue:null,options:null,placeholder:null,closeOnSelect:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){var a;const n=e,r=_t(rt(n,"title"),"span"),i=E((a=n.options.find(u=>u.value===n.modelValue))!=null?a:null);$e(rt(n,"modelValue"),u=>{var c;ce(i)!==u&&(i.value=(c=n.options.find(f=>f.value===u))!=null?c:null)});function s(u){t("update:modelValue",u.value)}return(u,c)=>(b(),k("div",Au,[o(r)?(b(),k("span",Bu,[(b(),R(ae(o(r))))])):F("",!0),p(o(Yr),{options:e.options,modelValue:i.value,"onUpdate:modelValue":[c[0]||(c[0]=f=>i.value=f),s],min:1,"label-by":"label",placeholder:e.placeholder,"close-on-select":e.closeOnSelect},null,8,["options","modelValue","placeholder","close-on-select"])]))}});const Fn=e=>(De("data-v-a03820c0"),e=e(),qe(),e),Uu=Fn(()=>g("h2",null,"Saves Manager",-1)),ju={key:0,style:{color:"var(--danger)"}},zu={class:"modal-footer"},Gu={class:"field"},Hu=Fn(()=>g("span",{class:"field-title"},"Create Save",-1)),Wu={class:"field-buttons"},Yu={class:"footer"},Ju=Fn(()=>g("div",{style:{"flex-grow":"1"}},null,-1)),Ku=A({__name:"SavesManager",setup(e,{expose:t}){const n=E(!1),r=E(null);t({open(){n.value=!0}});const i=E(!1),s=E(""),a=E(null);$e(s,S=>{S?bt(()=>{var $;try{if(S=($=ct(S))!=null?$:"",S===""){console.warn("Unable to determine preset encoding",S),i.value=!0;return}const V=JSON.parse(S);if(typeof V!="object"){i.value=!0;return}const J=Vt();V.id=J,ge(V),s.value="",i.value=!1,Y.saves.push(J)}catch{i.value=!0}}):i.value=!1});let u={},c=E(Object.keys(u).reduce((S,$)=>(S.push({label:$.split("/").slice(-1)[0].slice(0,-4),value:u[$]}),S),[]));$e(n,S=>{S&&Bi()});const f=O(()=>Y.saves.reduce((S,$)=>(S[$]=Ai($),S),{})),h=O(()=>{var S;return((S=ke.value)==null?void 0:S.loggedIn)===!0&&Y.saves.length<Pt.value.length});function m(S){let $;switch(D.id===S?$=St(D):$=JSON.stringify(f.value[S]),z.exportEncoding){default:console.warn(`Unknown save encoding: ${z.exportEncoding}. Defaulting to lz`);case"lz":$=ft.compressToUTF16($);break;case"base64":$=btoa(unescape(encodeURIComponent($)));break;case"plain":break}const V=document.createElement("textarea");V.value=$,document.body.appendChild(V),V.select(),V.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(V)}function w(S){D.id===S&&ge();const $={...f.value[S],id:Vt()};ge($),Y.saves.push($.id)}function C(S){var $;(($=ke.value)==null?void 0:$.loggedIn)===!0&&ke.value.getSaveList().then(V=>{var ne;const J=Object.keys(V).find(Oe=>{const Ne=V[Oe].content;try{if(JSON.parse(Ne).id===S)return!0}catch{return!1}});J!=null&&((ne=ke.value)==null||ne.save(parseInt(J),"","").catch(console.error))}),Y.saves=Y.saves.filter(V=>V!==S),localStorage.removeItem(S),Gt(S)}function y(S){f.value[D.id].time=D.time,ge(),Gt(D.id),Xe(f.value[S]),Gt(S)}function N(S){var V;if(a.value=S,bt(()=>{a.value=null}),S=(V=ct(S))!=null?V:"",S===""){console.warn("Unable to determine preset encoding",S);return}const $=JSON.parse(S);$.id=Vt(),ge($),Y.saves.push($.id),y($.id)}function T(S,$){const V=f.value[S];V!=null&&(V.name=$,D.id===S?(D.name=$,ge()):(ge(V),Gt(S)))}return(S,$)=>(b(),R(st,{modelValue:n.value,"onUpdate:modelValue":$[4]||($[4]=V=>n.value=V),ref_key:"modal",ref:r},{header:q(()=>[Uu]),body:q(({shown:V})=>[o(h)?(b(),k("div",ju," Not all saves are synced! You may need to delete stale saves. ")):F("",!0),V?(b(),R(o(Wr),{key:1,list:o(Y).saves,handle:".handle",itemKey:J=>J},{item:q(({element:J})=>[p(fn,{save:o(f)[J],onOpen:ne=>y(J),onExport:ne=>m(J),onEditName:ne=>T(J,ne),onDuplicate:ne=>w(J),onDelete:ne=>C(J)},null,8,["save","onOpen","onExport","onEditName","onDuplicate","onDelete"])]),_:1},8,["list","itemKey"])):F("",!0)]),footer:q(()=>[g("div",zu,[p(gr,{modelValue:s.value,"onUpdate:modelValue":$[0]||($[0]=V=>s.value=V),title:"Import Save",placeholder:"Paste your save here!",class:X({importingFailed:i.value})},null,8,["modelValue","class"]),g("div",Gu,[Hu,g("div",Wu,[g("button",{class:"button",onClick:$[1]||($[1]=V=>y(o(Nt)().id))},"New Game"),Object.keys(o(c)).length>0?(b(),R(Pr,{key:0,options:o(c),modelValue:a.value,"onUpdate:modelValue":$[2]||($[2]=V=>N(V)),closeOnSelect:"",placeholder:"Select preset",class:"presets"},null,8,["options","modelValue"])):F("",!0)])]),g("div",Yu,[Ju,g("button",{class:"button modal-default-button",onClick:$[3]||($[3]=V=>n.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}});var Or=G(Ku,[["__scopeId","data-v-a03820c0"]]);const sn=e=>(De("data-v-10d75940"),e=e(),qe(),e),Zu=sn(()=>g("div",{class:"nan-modal-header"},[g("h2",null,"NaN value detected!")],-1)),Xu={key:0},Qu=sn(()=>g("br",null,null,-1)),ec=["href"],tc=sn(()=>g("span",{class:"material-icons nan-modal-discord"},"discord",-1)),nc=sn(()=>g("br",null,null,-1)),rc={class:"nan-footer"},ic=A({__name:"NaNScreen",setup(e){const{discordName:t,discordLink:n}=z,r=E(!0),i=E(!0),s=rt(te,"hasNaN"),a=E(null);$e(s,w=>{w?(r.value=D.autosave,i.value=D.devSpeed===0):(D.autosave=r.value,D.devSpeed=i.value?0:null)});const u=O(()=>{var w;return(w=te.NaNPath)==null?void 0:w.join(".")}),c=O(()=>te.NaNPersistent!=null?te.NaNPersistent.value:null);function f(){te.NaNPersistent!=null&&(te.NaNPersistent.value=new l(0),te.hasNaN=!1)}function h(){te.NaNPersistent&&(te.NaNPersistent.value=new l(1),te.hasNaN=!1)}function m(){te.NaNPersistent&&(te.NaNPersistent.value=new l(NaN),te.hasNaN=!1)}return(w,C)=>(b(),k(j,null,[p(st,ze({modelValue:o(s),"onUpdate:modelValue":C[4]||(C[4]=y=>ue(s)?s.value=y:null)},w.$attrs),{header:q(()=>[Zu]),body:q(()=>[g("div",null,[P(' Attempted to assign "'+L(o(u))+'" to NaN',1),o(c)?(b(),k("span",Xu,L(" ")+"(previously "+L(o(Ie)(o(c)))+")",1)):F("",!0),P(". Auto-saving has been "+L(r.value?"enabled":"disabled")+". Check the console for more details, and consider sharing it with the developers on discord. ",1)]),Qu,g("div",null,[g("a",{href:o(n)||"https://discord.gg/yJ4fjnjU54",class:"nan-modal-discord-link"},[tc,P(" "+L(o(t)||"Profectus & Friends"),1)],8,ec)]),nc,p(Ae,{title:"Autosave",modelValue:r.value,"onUpdate:modelValue":C[0]||(C[0]=y=>r.value=y)},null,8,["modelValue"]),o(z).enablePausing?(b(),R(Ae,{key:0,title:"Pause game",modelValue:i.value,"onUpdate:modelValue":C[1]||(C[1]=y=>i.value=y)},null,8,["modelValue"])):F("",!0)]),footer:q(()=>[g("div",rc,[g("button",{onClick:C[2]||(C[2]=y=>{var N;return(N=a.value)==null?void 0:N.open()}),class:"button"},"Open Saves Manager"),g("button",{onClick:f,class:"button"},"Set to 0"),g("button",{onClick:h,class:"button"},"Set to 1"),o(c)&&o(l).neq(o(c),0)&&o(l).neq(o(c),1)?(b(),k("button",{key:0,onClick:C[3]||(C[3]=y=>s.value=!1),class:"button"}," Set to previous ")):F("",!0),g("button",{onClick:m,class:"button danger"},"Ignore")])]),_:1},16,["modelValue"]),p(Or,{ref_key:"savesManager",ref:a},null,512)],64))}});var sc=G(ic,[["__scopeId","data-v-10d75940"]]);const ac=A({components:{Context:cr,ErrorVue:Kn},props:{index:{type:Number,required:!0},display:{type:x(Object,String,Function),required:!0},minimizedDisplay:x(Object,String,Function),minimized:{type:Object,required:!0},name:{type:x(String),required:!0},color:x(String),minimizable:x(Boolean),nodes:{type:Object,required:!0}},emits:["setMinimized"],setup(e){const{display:t,index:n,minimized:r,minimizedDisplay:i}=de(e),s=Nn(t),a=_t(i),u=O(()=>z.allowGoBack&&n.value>0&&!ce(r));function c(){D.tabs.splice(o(e.index),1/0)}function f(m){e.nodes.value=m}const h=E([]);return Br((m,w,C)=>(console.warn(`Error caught in "${e.name}" layer`,m,w,C),h.value.push(m instanceof Error?m:new Error(JSON.stringify(m))),!1)),{component:s,minimizedComponent:a,showGoBack:u,updateNodes:f,unref:o,goBack:c,errors:h}}}),oc={key:1};function lc(e,t,n,r,i,s){const a=we("ErrorVue"),u=we("Context");return e.errors.length>0?(b(),R(a,{key:0,errors:e.errors},null,8,["errors"])):(b(),k("div",ze({key:1,class:"layer-container",style:{"--layer-color":e.unref(e.color)}},e.$attrs),[e.showGoBack?(b(),k("button",{key:0,class:"goBack",onClick:t[0]||(t[0]=(...c)=>e.goBack&&e.goBack(...c))},"\u274C")):F("",!0),e.unref(e.minimized)?(b(),k("button",{key:1,class:"layer-tab minimized",onClick:t[1]||(t[1]=c=>e.$emit("setMinimized",!1))},[e.minimizedComponent?(b(),R(ae(e.minimizedComponent),{key:0})):(b(),k("div",oc,L(e.unref(e.name)),1))])):(b(),k("div",{key:2,class:X(["layer-tab",{showGoBack:e.showGoBack}])},[p(u,{onUpdateNodes:e.updateNodes},{default:q(()=>[(b(),R(ae(e.component)))]),_:1},8,["onUpdateNodes"])],2)),e.unref(e.minimizable)?(b(),k("button",{key:3,class:"minimize",onClick:t[2]||(t[2]=c=>e.$emit("setMinimized",!0))}," \u25BC ")):F("",!0)],16))}var uc=G(ac,[["render",lc],["__scopeId","data-v-a9f5b1da"]]);const Fr=e=>(De("data-v-45b73486"),e=e(),qe(),e),cc=Fr(()=>g("h2",null,"Changelog",-1)),dc=Fr(()=>g("details",{open:""},[g("summary",null,[P("v0.0 Initial Commit - "),g("time",null,"2021-09-04")]),P(" This is the first release :D "),g("ul",null,[g("li",{class:"feature"},"Did everything"),g("li",{class:"fix"},"Had some fun"),g("li",{class:"breaking"},"Removed everything"),g("li",{class:"balancing"},"Created some bugs to fix later")])],-1)),fc=A({__name:"Changelog",setup(e,{expose:t}){const n=E(!1);return t({open(){n.value=!0}}),(r,i)=>(b(),R(st,{modelValue:n.value,"onUpdate:modelValue":i[0]||(i[0]=s=>n.value=s)},{header:q(()=>[cc]),body:q(()=>[dc]),_:1},8,["modelValue"]))}});var gc=G(fc,[["__scopeId","data-v-45b73486"]]);const wt=e=>(De("data-v-3e5d5ff9"),e=e(),qe(),e),mc={class:"info-modal-header"},pc=["src","alt"],hc={class:"info-modal-title"},vc={key:0},bc={key:0},yc={key:0},_c=wt(()=>g("div",null," Made in Profectus, by thepaperpilot with inspiration from Acameada and Jacorb ",-1)),wc=wt(()=>g("br",null,null,-1)),Nc=wt(()=>g("br",null,null,-1)),Cc=["href"],kc=wt(()=>g("span",{class:"material-icons info-modal-discord"},"discord",-1)),Sc=wt(()=>g("div",null,[g("a",{href:"https://discord.gg/yJ4fjnjU54",class:"info-modal-discord-link",target:"_blank"},[g("span",{class:"material-icons info-modal-discord"},"discord"),P(" Profectus & Friends ")])],-1)),Ic=wt(()=>g("div",null,[g("a",{href:"https://discord.gg/F3xveHV",class:"info-modal-discord-link",target:"_blank"},[g("span",{class:"material-icons info-modal-discord"},"discord"),P(" The Modding Tree ")])],-1)),Mc=wt(()=>g("br",null,null,-1));var $c=A({__name:"Info",props:{changelog:null},setup(e,{expose:t}){const n=e,{title:r,logo:i,author:s,discordName:a,discordLink:u,versionNumber:c,versionTitle:f}=z,h=de(n),m=E(!1),w=O(()=>en(D.timePlayed)),C=O(()=>ee(Z(()=>p(j,null,[Zn.map(Ee)]))));t({open(){m.value=!0}});function y(){var N;(N=o(h.changelog))==null||N.open()}return(N,T)=>(b(),R(st,{modelValue:m.value,"onUpdate:modelValue":T[0]||(T[0]=S=>m.value=S)},{header:q(()=>[g("div",mc,[o(i)?(b(),k("img",{key:0,class:"info-modal-logo",src:o(i),alt:o(r)},null,8,pc)):F("",!0),g("div",hc,[g("h2",null,L(o(r)),1),g("h4",null,[P(" v"+L(o(c)),1),o(f)?(b(),k("span",vc,": "+L(o(f)),1)):F("",!0)])])])]),body:q(({shown:S})=>[S?(b(),k("div",bc,[o(s)?(b(),k("div",yc,"By "+L(o(s)),1)):F("",!0),_c,wc,g("div",{class:"link",onClick:y},"Changelog"),Nc,g("div",null,[o(u)?(b(),k("a",{key:0,href:o(u),class:"info-modal-discord-link",target:"_blank"},[kc,P(" "+L(o(a)),1)],8,Cc)):F("",!0)]),Sc,Ic,Mc,g("div",null,"Time Played: "+L(o(w)),1),(b(),R(ae(o(C))))])):F("",!0)]),_:1},8,["modelValue"]))}});var Tc=G($c,[["__scopeId","data-v-3e5d5ff9"]]);const Pc={class:"header"},Oc=g("h2",null,"Settings",-1),Fc={class:"option-tabs"},xc={key:0},Vc={key:1};var Ec=A({__name:"Options",setup(e,{expose:t}){const n=E(!1),r=E("behaviour");function i(ve){return ve==r.value}function s(ve){r.value=ve}t({isTab:i,setTab:s,save:ge,open(){n.value=!0}});const a=Object.keys(Ut).map(ve=>({label:sr(ve),value:ve})),u=O(()=>ee(Z(()=>p(j,null,[zi.map(Ee)])))),{showTPS:c,theme:f,unthrottled:h,alignUnits:m,showHealthWarning:w}=de(Y),{autosave:C,offlineProd:y}=de(D),N=O({get(){return D.devSpeed===0},set(ve){D.devSpeed=ve?0:null}}),T=Z(()=>p("span",{class:"option-title"},[P("Unthrottled"),p("desc",null,[P("Allow the game to run as fast as possible. Not battery friendly.")])])),S=Z(()=>p("span",{class:"option-title"},[P("Offline production"),p(le,{display:"Save-specific",direction:W.Right},{default:()=>[P("*")]}),p("desc",null,[P("Simulate production that occurs while the game is closed.")])])),$=Z(()=>p("span",{class:"option-title"},[P("Show videogame addiction warning"),p("desc",null,[P("Show a helpful warning after playing for a long time about video game addiction and encouraging you to take a break.")])])),V=Z(()=>p("span",{class:"option-title"},[P("Autosave"),p(le,{display:"Save-specific",direction:W.Right},{default:()=>[P("*")]}),p("desc",null,[P("Automatically save the game every second or when the game is closed.")])])),J=Z(()=>p("span",{class:"option-title"},[P("Pause game"),p(le,{display:"Save-specific",direction:W.Right},{default:()=>[P("*")]}),p("desc",null,[P("Stop everything from moving.")])])),ne=Z(()=>p("span",{class:"option-title"},[P("Theme"),p("desc",null,[P("How the game looks.")])])),Oe=Z(()=>p("span",{class:"option-title"},[P("Show TPS"),p("desc",null,[P("Show TPS meter at the bottom-left corner of the page.")])])),Ne=Z(()=>p("span",{class:"option-title"},[P("Align modifier units"),p("desc",null,[P("Align numbers to the beginning of the unit in modifier view.")])]));return(ve,H)=>(b(),R(st,{modelValue:n.value,"onUpdate:modelValue":H[11]||(H[11]=K=>n.value=K)},{header:q(()=>[g("div",Pc,[Oc,g("div",Fc,[g("button",{class:X({selected:i("behaviour")}),onClick:H[0]||(H[0]=K=>s("behaviour"))},"Behaviour",2),g("button",{class:X({selected:i("appearance")}),onClick:H[1]||(H[1]=K=>s("appearance"))},"Appearance",2)])])]),body:q(()=>[i("behaviour")?(b(),k("div",xc,[p(Ae,{title:o(T),modelValue:o(h),"onUpdate:modelValue":H[2]||(H[2]=K=>ue(h)?h.value=K:null)},null,8,["title","modelValue"]),o(z).enablePausing?(b(),R(Ae,{key:0,title:o(J),modelValue:o(N),"onUpdate:modelValue":H[3]||(H[3]=K=>ue(N)?N.value=K:null)},null,8,["title","modelValue"])):F("",!0),p(Ae,{title:o(S),modelValue:o(y),"onUpdate:modelValue":H[4]||(H[4]=K=>ue(y)?y.value=K:null)},null,8,["title","modelValue"]),o(z).disableHealthWarning?F("",!0):(b(),R(Ae,{key:1,title:o($),modelValue:o(w),"onUpdate:modelValue":H[5]||(H[5]=K=>ue(w)?w.value=K:null)},null,8,["title","modelValue"])),p(Ae,{title:o(V),modelValue:o(C),"onUpdate:modelValue":H[6]||(H[6]=K=>ue(C)?C.value=K:null)},null,8,["title","modelValue"]),o(C)?F("",!0):(b(),R(mn,{key:2,class:"button save-button",onClick:H[7]||(H[7]=K=>o(ge)())},{default:q(()=>[P("Manually save")]),_:1}))])):F("",!0),i("appearance")?(b(),k("div",Vc,[p(Pr,{title:o(ne),options:o(a),modelValue:o(f),"onUpdate:modelValue":H[8]||(H[8]=K=>ue(f)?f.value=K:null)},null,8,["title","options","modelValue"]),(b(),R(ae(o(u)))),p(Ae,{title:o(Oe),modelValue:o(c),"onUpdate:modelValue":H[9]||(H[9]=K=>ue(c)?c.value=K:null)},null,8,["title","modelValue"]),p(Ae,{title:o(Ne),modelValue:o(m),"onUpdate:modelValue":H[10]||(H[10]=K=>ue(m)?m.value=K:null)},null,8,["title","modelValue"])])):F("",!0)]),_:1},8,["modelValue"]))}});const Re=e=>(De("data-v-fae09efc"),e=e(),qe(),e),Dc=["src","alt"],qc={key:1,class:"title"},Rc=Re(()=>g("div",{style:{"flex-grow":"1",cursor:"unset"}},null,-1)),Lc={class:"discord"},Ac={class:"discord-links"},Bc={key:0},Uc=["href"],jc=Re(()=>g("li",null,[g("a",{href:"https://discord.gg/yJ4fjnjU54",target:"_blank"},"Profectus & Friends")],-1)),zc=Re(()=>g("li",null,[g("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),Gc={href:"https://forums.moddingtree.com/",target:"_blank"},Hc=Re(()=>g("span",{class:"material-icons"},"forum",-1)),Wc=Re(()=>g("span",{class:"material-icons"},"info",-1)),Yc=Re(()=>g("span",{class:"material-icons"},"settings",-1)),Jc=Re(()=>g("span",{class:"material-icons"},"settings",-1)),Kc=Re(()=>g("span",{class:"material-icons"},"info",-1)),Zc={href:"https://forums.moddingtree.com/",target:"_blank"},Xc=Re(()=>g("span",{class:"material-icons"},"forum",-1)),Qc={class:"discord"},ed={class:"discord-links"},td={key:0},nd=["href"],rd=Re(()=>g("li",null,[g("a",{href:"https://discord.gg/yJ4fjnjU54",target:"_blank"},"Profectus & Friends")],-1)),id=Re(()=>g("li",null,[g("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),sd=A({__name:"Nav",setup(e){const t=E(null),n=E(null),r=E(null),i=E(null),{useHeader:s,banner:a,title:u,discordName:c,discordLink:f,versionNumber:h}=z;function m(){window.open(f,"mywindow")}const w=O(()=>{var C;return((C=ke.value)==null?void 0:C.loggedIn)===!0&&!Pt.value.includes(Y.active)});return(C,y)=>(b(),k(j,null,[o(s)?(b(),k("div",ze({key:0,class:"nav"},C.$attrs),[o(a)?(b(),k("img",{key:0,src:o(a),class:"banner",alt:o(u)},null,8,Dc)):(b(),k("div",qc,L(o(u)),1)),g("div",{onClick:y[0]||(y[0]=N=>{var T;return(T=i.value)==null?void 0:T.open()}),class:"version-container"},[p(le,{display:"Changelog",direction:o(W).Down,class:"version"},{default:q(()=>[g("span",null,"v"+L(o(h)),1)]),_:1},8,["direction"])]),Rc,g("div",Lc,[g("span",{onClick:m,class:"material-icons"},"discord"),g("ul",Ac,[o(f)?(b(),k("li",Bc,[g("a",{href:o(f),target:"_blank"},L(o(c)),9,Uc)])):F("",!0),jc,zc])]),g("div",null,[g("a",Gc,[p(le,{display:"Forums",direction:o(W).Down,yoffset:"5px"},{default:q(()=>[Hc]),_:1},8,["direction"])])]),g("div",{onClick:y[1]||(y[1]=N=>{var T;return(T=t.value)==null?void 0:T.open()})},[p(le,{display:"Info",direction:o(W).Down,class:"info"},{default:q(()=>[Wc]),_:1},8,["direction"])]),g("div",{onClick:y[2]||(y[2]=N=>{var T;return(T=n.value)==null?void 0:T.open()})},[p(le,{display:"Saves",direction:o(W).Down,xoffset:"-20px"},{default:q(()=>[g("span",{class:X(["material-icons",{needsSync:o(w)}])},"library_books",2)]),_:1},8,["direction"])]),g("div",{onClick:y[3]||(y[3]=N=>{var T;return(T=r.value)==null?void 0:T.open()})},[p(le,{display:"Settings",direction:o(W).Down,xoffset:"-66px"},{default:q(()=>[Yc]),_:1},8,["direction"])])],16)):(b(),k("div",ze({key:1,class:"overlay-nav"},C.$attrs),[g("div",{onClick:y[4]||(y[4]=N=>{var T;return(T=i.value)==null?void 0:T.open()}),class:"version-container"},[p(le,{display:"Changelog",direction:o(W).Right,xoffset:"25%",class:"version"},{default:q(()=>[g("span",null,"v"+L(o(h)),1)]),_:1},8,["direction"])]),g("div",{onClick:y[5]||(y[5]=N=>{var T;return(T=n.value)==null?void 0:T.open()})},[p(le,{display:"Saves",direction:o(W).Right},{default:q(()=>[g("span",{class:X(["material-icons",{needsSync:o(w)}])},"library_books",2)]),_:1},8,["direction"])]),g("div",{onClick:y[6]||(y[6]=N=>{var T;return(T=r.value)==null?void 0:T.open()})},[p(le,{display:"Settings",direction:o(W).Right},{default:q(()=>[Jc]),_:1},8,["direction"])]),g("div",{onClick:y[7]||(y[7]=N=>{var T;return(T=t.value)==null?void 0:T.open()})},[p(le,{display:"Info",direction:o(W).Right},{default:q(()=>[Kc]),_:1},8,["direction"])]),g("div",null,[g("a",Zc,[p(le,{display:"Forums",direction:o(W).Right,xoffset:"7px"},{default:q(()=>[Xc]),_:1},8,["direction"])])]),g("div",Qc,[g("span",{onClick:m,class:"material-icons"},"discord"),g("ul",ed,[o(f)?(b(),k("li",td,[g("a",{href:o(f),target:"_blank"},L(o(c)),9,nd)])):F("",!0),rd,id])])],16)),p(Tc,{ref_key:"info",ref:t,changelog:i.value},null,8,["changelog"]),p(Or,{ref_key:"savesManager",ref:n},null,512),p(Ec,{ref_key:"options",ref:r},null,512),p(gc,{ref_key:"changelog",ref:i},null,512)],64))}});var xr=G(sd,[["__scopeId","data-v-fae09efc"]]);const ad={class:"inner-tab"},od=A({__name:"Game",setup(e){const t=rt(D,"tabs"),n=O(()=>Object.keys(he)),r=z.useHeader;function i(s){const{display:a,minimized:u,name:c,color:f,minimizable:h,nodes:m,minimizedDisplay:w}=s;return{display:a,minimized:u,name:c,color:f,minimizable:h,nodes:m,minimizedDisplay:w}}return(s,a)=>(b(),k("div",{class:X(["tabs-container",{useHeader:o(r)}])},[(b(!0),k(j,null,We(o(t),(u,c)=>{var f,h;return b(),k("div",{key:c,class:X(["tab",o((f=o(he)[u])==null?void 0:f.classes)]),style:se(o((h=o(he)[u])==null?void 0:h.style))},[c===0&&!o(r)?(b(),R(xr,{key:0})):F("",!0),g("div",ad,[o(n).includes(u)?(b(),R(uc,ze({key:0},i(o(he)[u]),{index:c,onSetMinimized:m=>o(he)[u].minimized.value=m}),null,16,["index","onSetMinimized"])):(b(),R(ae(u),{key:1,index:c},null,8,["index"]))])],6)}),128))],2))}});var ld=G(od,[["__scopeId","data-v-dcd207b4"]]);const ud={key:0,class:"tpsDisplay"},cd=A({__name:"TPS",setup(e){const t=O(()=>l.div(te.lastTenTicks.length,te.lastTenTicks.reduce((n,r)=>n+r,0)));return(n,r)=>o(t).isNan()?F("",!0):(b(),k("div",ud,"TPS: "+L(o(yt)(o(t))),1))}});var dd=G(cd,[["__scopeId","data-v-89b89152"]]);var fd=A({__name:"App",setup(e){const t=z.useHeader,n=O(()=>Ut[Y.theme].variables),r=rt(Y,"showTPS"),i=rt(te,"errors"),s=O(()=>ee(Z(()=>p(j,null,[Hi.map(Ee)]))));return(a,u)=>o(i).length>0?(b(),k("div",{key:0,class:"error-container",style:se(o(n))},[p(Kn,{errors:o(i)},null,8,["errors"])],4)):(b(),k(j,{key:1},[g("div",{id:"modal-root",style:se(o(n))},null,4),g("div",{class:X(["app",{useHeader:o(t)}]),style:se(o(n))},[o(t)?(b(),R(xr,{key:0})):F("",!0),p(ld),o(o(r))?(b(),R(dd,{key:1})):F("",!0),p(vo),p(Lu),p(sc),p(pl),(b(),R(ae(o(s))))],6)],64))}});var gd=G(fd,[["__scopeId","data-v-1ba599d8"]]);function md(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:a}=e;let u,c,f,h;const m=async(C=!0)=>{await f,C&&(u==null||u.addEventListener("controlling",y=>{y.isUpdate&&window.location.reload()})),await(h==null?void 0:h())};async function w(){if("serviceWorker"in navigator){const{Workbox:C,messageSW:y}=await Dt(()=>import("./workbox-window.4a8794bb.js"),[]);h=async()=>{c&&c.waiting&&await y(c.waiting,{type:"SKIP_WAITING"})},u=new C("./sw.js",{scope:"./",type:"classic"}),u.addEventListener("activated",N=>{N.isUpdate||r==null||r()});{const N=()=>{n==null||n()};u.addEventListener("waiting",N),u.addEventListener("externalwaiting",N)}u.register({immediate:t}).then(N=>{c=N,s?s("./sw.js",N):i==null||i(N)}).catch(N=>{a==null||a(N)})}}return f=w(),m}function pd(e={}){const{immediate:t=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:a}=e,u=E(!1),c=E(!1);return{updateServiceWorker:md({immediate:t,onNeedRefresh(){u.value=!0,n==null||n()},onOfflineReady(){c.value=!0,r==null||r()},onRegistered:i,onRegisteredSW:s,onRegisterError:a}),offlineReady:c,needRefresh:u}}const xn=console.error;console.error=function(...e){xn(...e)};window.onerror=function(e,t,n,r,i){return te.errors.push(i instanceof Error?i:new Error(JSON.stringify(i))),xn(i),!0};window.onunhandledrejection=function(e){te.errors.push(e.reason instanceof Error?e.reason:new Error(JSON.stringify(e.reason))),xn(e.reason)};document.title=z.title;window.projInfo=z;z.id===""&&console.error("Project ID is empty!","Please select a unique ID for this project in /src/data/projInfo.json");requestAnimationFrame(async()=>{console.log(`%cMade in Profectus%c
Learn more at www.moddingtree.com`,"font-weight: bold; font-size: 24px; color: #A3BE8C; background: #2E3440; padding: 4px 8px; border-radius: 8px;","padding: 4px;"),await Li();const{globalBus:e}=await Dt(()=>Promise.resolve().then(function(){return Ri}),void 0),{startGameLoop:t}=await Dt(()=>import("./gameLoop.4efd95cd.js"),["assets/gameLoop.4efd95cd.js","assets/@fontsource.f66d05e7.css","assets/vue.c3499eac.js","assets/lz-string.bfbf8ec3.js","assets/@vue.6f8187b0.js","assets/nanoevents.1080beb7.js","assets/unofficial-galaxy-sdk.21372393.js","assets/vue-textarea-autosize.35804eaf.js","assets/vue-toastification.c30555b4.js","assets/vue-toastification.4b5f8ac8.css","assets/vuedraggable.987e5684.js","assets/sortablejs.5e46dd67.js","assets/vue-next-select.ccd7a9ab.js","assets/vue-next-select.9e6f4164.css"]),n=window.vue=Ur(gd);n.config.errorHandler=function(r,i,s){console.error(r,s,i)},e.emit("setupVue",n),n.mount("#app"),bt(()=>{const r=Hr(),{updateServiceWorker:i}=pd({onNeedRefresh(){r.info("New content available, click here to update.",{timeout:!1,closeOnClick:!1,draggable:!1,icon:{iconClass:"material-icons",iconChildren:"refresh",iconTag:"i"},rtl:!1,onClick(){i()}})},onOfflineReady(){r.info("App ready to work offline")},onRegisterError:console.warn,onRegistered(s){s&&setInterval(()=>s.update(),60*60*1e3)}})}),t()});export{l as D,Dt as _,te as a,z as b,Su as c,me as g,hn as l,D as p,Y as s};
